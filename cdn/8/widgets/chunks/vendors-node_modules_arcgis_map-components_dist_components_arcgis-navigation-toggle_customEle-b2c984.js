"use strict";
(self["webpackChunkexb_client"] = self["webpackChunkexb_client"] || []).push([["vendors-node_modules_arcgis_map-components_dist_components_arcgis-navigation-toggle_customEle-b2c984"],{

/***/ "./node_modules/@arcgis/map-components/dist/chunks/component-utils.js":
/*!****************************************************************************!*\
  !*** ./node_modules/@arcgis/map-components/dist/chunks/component-utils.js ***!
  \****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   a: () => (/* binding */ p),
/* harmony export */   b: () => (/* binding */ P),
/* harmony export */   c: () => (/* binding */ H),
/* harmony export */   d: () => (/* binding */ L),
/* harmony export */   e: () => (/* binding */ O),
/* harmony export */   f: () => (/* binding */ x),
/* harmony export */   i: () => (/* binding */ N),
/* harmony export */   p: () => (/* binding */ u),
/* harmony export */   r: () => (/* binding */ S)
/* harmony export */ });
/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.32/esri/copyright.txt for details.
v4.32.1 */
function P(e, i) {
  Array.isArray(i) ? e._watchHandles = [...e._watchHandles, ...i] : e._watchHandles.push(i);
}
function p(e) {
  e.el.childElem && (e.el.childElem.ownedBy = e.el);
  const i = h(e);
  if (!i) {
    const t = y(e.referenceElement);
    if (!t) {
      g(e);
      return;
    }
    return f(t, e, !0), t;
  }
  return w(i, e.el.parent) || (e.el.parent = i, i.tagName.toLowerCase() === "arcgis-expand" ? v(i, e) : i.tagName.toLowerCase() === "arcgis-placement" ? C(i, e) : f(i, e, !1)), i;
}
function h({ el: e }) {
  for (let i = e.parentElement; i; i = i?.parentElement ?? null) {
    if (c.has(i.tagName.toLowerCase()))
      return i;
    if ("ownedBy" in i && i.ownedBy instanceof HTMLElement && c.has(i.ownedBy.tagName.toLowerCase()))
      return i.ownedBy;
  }
}
const c = /* @__PURE__ */ new Set([
  "arcgis-map",
  "arcgis-scene",
  "arcgis-link-chart",
  "arcgis-expand",
  "arcgis-placement"
]);
function w(e, i) {
  if (e !== i)
    return !1;
  const t = e.tagName.toLowerCase();
  return t === "arcgis-expand" || t === "arcgis-placement";
}
function l(e, i, t = "arcgisReady") {
  const r = e;
  if (typeof r.view?.ready == "boolean")
    i(r.view);
  else {
    let s = function(d) {
      d.target === e && (l(e, i, t), e.removeEventListener(t, s));
    };
    e.addEventListener(t, s);
  }
}
const v = (e, i) => l(e, (t) => {
  i.el.childElem && e.content != null && e.content.append(i.el.childElem), e.expandIcon = i.icon || i.widget?.icon || e.expandIcon, i.position = e.position, i.el.view = t;
}), C = (e, i) => l(e, (t) => {
  i.el.childElem && i.el.append(i.el.childElem), i.position = e.position, i.el.view = t;
}), f = (e, i, t) => l(
  e,
  (r) => {
    t ? g(i) : i.el.childElem && E(e, i), i.el.view = r;
  },
  "arcgisViewReadyChange"
);
function E(e, i) {
  const t = i.el.childElem ?? i.el, r = [...e.children], s = {};
  for (const a of r) {
    const n = a.getAttribute("position") ?? "manual";
    s[n] ??= [], s[n].push({ child: a, position: n, index: r.indexOf(a) });
  }
  const d = s[i.position ?? "manual"]?.findIndex(({ child: a }) => a === i.el), o = e.view.ui;
  o.remove(t), o.add(t, { position: i.position, index: d });
}
function L(e) {
  let i = !1, t = e.el.view;
  const r = Object.getOwnPropertyDescriptor(Object.getPrototypeOf(e.el), "view") ?? {
    get: () => t,
    set: (s) => t = s
  };
  Object.defineProperty(e.el, "view", {
    get: r.get.bind(e.el),
    set: (s) => {
      r.set.call(e.el, s), s && !i && (i = !0, e.arcgisReady.emit());
    },
    configurable: !0,
    enumerable: !0
  }), t && (e.el.view = t);
}
function x(e) {
  return e == null || e === "";
}
function H(e, i) {
  return i != null && e?.position === i.position && e?.heading === i.heading && e?.tilt === i.tilt && e?.fov === i.fov;
}
function N(e, i) {
  return i === void 0 || e?.targetGeometry !== i?.targetGeometry || e?.rotation !== i?.rotation || e?.scale !== i?.scale;
}
function O(e, i) {
  return u(i?.center, e);
}
function u(e, i) {
  if (typeof i == "string")
    return u(e, i.split(",").map(Number));
  if (!e)
    return i;
  if (Array.isArray(i)) {
    const t = i[0], r = i[1], s = i.length > 2 ? i[2] : void 0;
    if (t !== e.longitude || r !== e.latitude || s !== e.z)
      return i;
  } else if (i && !e?.equals(i))
    return i;
}
async function S(e, i) {
  i != null && (typeof i == "string" ? e.el.view = await b(i) : e.widget && (e.el.view = i.view));
}
async function b(e) {
  const i = y(e);
  return await new Promise((t) => {
    typeof i?.view?.ready == "boolean" ? t(i.view) : i && i.addEventListener("arcgisViewReadyChange", () => t(i.view), { once: !0 });
  });
}
function g(e) {
  e.el.childElem && (e.el.shadowRoot ?? e.el).append(e.el.childElem);
}
function y(e) {
  return typeof e != "string" ? e ?? void 0 : (e.includes("#") || e.includes(".") || e.includes("[") ? void 0 : document.querySelector(`#${e}`)) ?? document.querySelector(e) ?? void 0;
}



/***/ }),

/***/ "./node_modules/@arcgis/map-components/dist/chunks/globalCss.js":
/*!**********************************************************************!*\
  !*** ./node_modules/@arcgis/map-components/dist/chunks/globalCss.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   g: () => (/* binding */ e)
/* harmony export */ });
/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.32/esri/copyright.txt for details.
v4.32.1 */
const e = {
  anchor: "esri-widget__anchor",
  anchorDisabled: "esri-widget__anchor--disabled",
  button: "esri-button",
  buttonDisabled: "esri-button--disabled",
  buttonHalf: "esri-button--half",
  buttonSecondary: "esri-button--secondary",
  buttonSmall: "esri-button--small",
  buttonTertiary: "esri-button--tertiary",
  buttonThird: "esri-button--third",
  disabled: "esri-disabled",
  disabledElement: "esri-disabled-element",
  empty: "esri-widget__content--empty",
  emptyIllustration: "esri-widget__content-illustration--empty",
  heading: "esri-widget__heading",
  hidden: "esri-hidden",
  input: "esri-input",
  interactive: "esri-interactive",
  loader: "esri-widget__loader",
  loaderAnimation: "esri-widget__loader-animation",
  loaderText: "esri-widget__loader-text",
  menu: "esri-menu",
  menuHeader: "esri-menu__header",
  menuItem: "esri-menu__list-item",
  menuItemActive: "esri-menu__list-item--active",
  menuItemFocus: "esri-menu__list-item--focus",
  menuList: "esri-menu__list",
  noBookmarksIcon: "esri-widget__no-bookmark-icon",
  panel: "esri-widget--panel",
  panelHeightOnly: "esri-widget--panel-height-only",
  primaryTick: "primary-tick",
  primaryTickAmPm: "primary-tick__ampm",
  primaryTickLabel: "primary-tick__label",
  rotating: "esri-rotating",
  secondaryTick: "secondary-tick",
  select: "esri-select",
  table: "esri-widget__table",
  ui: "esri-component",
  widget: "esri-widget esri-component",
  widgetButton: "esri-widget--button",
  widgetButtonActive: "esri-widget--button-active",
  widgetDisabled: "esri-widget--disabled"
};



/***/ }),

/***/ "./node_modules/@arcgis/map-components/dist/chunks/useView.js":
/*!********************************************************************!*\
  !*** ./node_modules/@arcgis/map-components/dist/chunks/useView.js ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   V: () => (/* binding */ v),
/* harmony export */   a: () => (/* binding */ _),
/* harmony export */   u: () => (/* binding */ E)
/* harmony export */ });
/* harmony import */ var _arcgis_components_controllers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @arcgis/components-controllers */ "./node_modules/@arcgis/components-controllers/dist/index.js");
/* harmony import */ var _runtime_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./runtime.js */ "./node_modules/@arcgis/map-components/dist/chunks/runtime.js");
/* harmony import */ var _arcgis_core_applications_Components_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @arcgis/core/applications/Components/reactiveUtils.js */ "@arcgis/core/applications/Components/reactiveUtils.js");
/* harmony import */ var _arcgis_core_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @arcgis/core/core/reactiveUtils.js */ "@arcgis/core/core/reactiveUtils.js");
/* harmony import */ var _component_utils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./component-utils.js */ "./node_modules/@arcgis/map-components/dist/chunks/component-utils.js");





/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.32/esri/copyright.txt for details.
v4.32.1 */
const E = (0,_arcgis_components_controllers__WEBPACK_IMPORTED_MODULE_0__.makeT9nController)(_runtime_js__WEBPACK_IMPORTED_MODULE_1__.g), _ = (s) => u(s);
class v extends _arcgis_components_controllers__WEBPACK_IMPORTED_MODULE_0__.GenericController {
  constructor(e) {
    super(e), this._view$ = (0,_arcgis_core_applications_Components_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_2__.signal)(void 0), this._viewDestroyHandle = void 0, this._arcgisReadyEmitted = !1;
    const { el: t } = e, r = t.view;
    this.setProvisionalExports(void 0), Object.defineProperty(t, "view", {
      get: () => this._view$.value,
      set: (o) => {
        if (this.exports === o)
          return;
        const c = t.view;
        this._view$.value = o, this.exports = o, this.component.requestUpdate("view", c), !this._arcgisReadyEmitted && o != null && (this._arcgisReadyEmitted = !0, this.component.arcgisReady.emit());
      },
      configurable: !0,
      enumerable: !0
    }), e !== t && Object.defineProperty(e, "view", {
      get: () => t.view,
      set: (o) => {
        t.view = o;
      }
    }), queueMicrotask(() => {
      r && (t.view = r);
    });
  }
  hostConnected() {
    this._viewDestroyHandle ??= _arcgis_core_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_3__.when(
      () => this._view$.value?.destroyed,
      () => void this.component.destroy?.().catch(console.error),
      { sync: !0 }
    ), this.component.manager.loadedCalled && (0,_component_utils_js__WEBPACK_IMPORTED_MODULE_4__.a)(this.component);
  }
  hostLoad() {
    this.component.manager.destroyed || this._watchMetaProperties();
  }
  hostLoaded() {
    const { el: e } = this.component, t = e.shadowRoot?.firstElementChild ?? e.firstElementChild ?? void 0;
    e.childElem = t ?? e.childElem, e.isConnected && (0,_component_utils_js__WEBPACK_IMPORTED_MODULE_4__.a)(this.component);
  }
  hostDisconnected() {
    typeof this.component.el.childElem == "object" && this._view$.value?.ui?.remove(this.component.el.childElem);
  }
  hostDestroy() {
    this._viewDestroyHandle?.remove();
  }
  _watchMetaProperties() {
    (0,_arcgis_components_controllers__WEBPACK_IMPORTED_MODULE_0__.watch)(this.component, "position", (e) => {
      this.component.el.childElem != null && typeof e == "string" && (0,_component_utils_js__WEBPACK_IMPORTED_MODULE_4__.a)(this.component);
    }), (0,_arcgis_components_controllers__WEBPACK_IMPORTED_MODULE_0__.watch)(this.component, "referenceElement", () => (0,_component_utils_js__WEBPACK_IMPORTED_MODULE_4__.a)(this.component));
  }
}
const u = (0,_arcgis_components_controllers__WEBPACK_IMPORTED_MODULE_0__.proxyExports)(v);



/***/ }),

/***/ "./node_modules/@arcgis/map-components/dist/components/arcgis-navigation-toggle/customElement.js":
/*!*******************************************************************************************************!*\
  !*** ./node_modules/@arcgis/map-components/dist/components/arcgis-navigation-toggle/customElement.js ***!
  \*******************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ArcgisNavigationToggle: () => (/* binding */ C)
/* harmony export */ });
/* harmony import */ var _chunks_runtime_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../chunks/runtime.js */ "./node_modules/@arcgis/map-components/dist/chunks/runtime.js");
/* harmony import */ var _arcgis_components_controllers__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @arcgis/components-controllers */ "./node_modules/@arcgis/components-controllers/dist/index.js");
/* harmony import */ var _arcgis_core_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @arcgis/core/core/reactiveUtils.js */ "@arcgis/core/core/reactiveUtils.js");
/* harmony import */ var _arcgis_lumina__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @arcgis/lumina */ "./node_modules/@arcgis/lumina/dist/index.js");
/* harmony import */ var lit__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! lit */ "./node_modules/lit/index.js");
/* harmony import */ var _chunks_useView_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../chunks/useView.js */ "./node_modules/@arcgis/map-components/dist/chunks/useView.js");
/* harmony import */ var _chunks_globalCss_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../chunks/globalCss.js */ "./node_modules/@arcgis/map-components/dist/chunks/globalCss.js");
/* harmony import */ var _lit_reactive_element_css_tag_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @lit/reactive-element/css-tag.js */ "./node_modules/@lit/reactive-element/development/css-tag.js");








/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.32/esri/copyright.txt for details.
v4.32.1 */
const $ = "arcgis-navigation-toggle", w = {
  base: $
}, _ = (0,_lit_reactive_element_css_tag_js__WEBPACK_IMPORTED_MODULE_7__.css)`@layer{.arcgis-navigation-toggle{display:flex;inline-size:fit-content;block-size:fit-content}}`, e = {
  pan: "move",
  rotate: "rotate"
};
class C extends _arcgis_lumina__WEBPACK_IMPORTED_MODULE_3__.LitElement {
  constructor() {
    super(...arguments), this.view = (0,_chunks_useView_js__WEBPACK_IMPORTED_MODULE_5__.a)(this), this._messages = (0,_chunks_useView_js__WEBPACK_IMPORTED_MODULE_5__.u)(), this.autoDestroyDisabled = !1, this.icon = e.pan, this.layout = "vertical", this.navigationMode = "pan", this.position = "top-left", this.state = "disabled", this.arcgisPropertyChange = (0,_arcgis_components_controllers__WEBPACK_IMPORTED_MODULE_1__.usePropertyChange)()("layout", "state"), this.arcgisReady = (0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_3__.createEvent)();
  }
  static {
    this.properties = { autoDestroyDisabled: 5, icon: 3, label: 1, layout: 3, navigationMode: 3, position: 1, referenceElement: 1, state: 3 };
  }
  static {
    this.shadowRootOptions = _arcgis_lumina__WEBPACK_IMPORTED_MODULE_3__.noShadowRoot;
  }
  static {
    this.styles = _;
  }
  //#endregion
  //#region Public Methods
  /** Permanently destroy the component */
  async destroy() {
    await this.manager.destroy();
  }
  async toggle() {
    this.state !== "disabled" && (this.navigationMode = this.navigationMode !== "pan" ? "pan" : "rotate");
  }
  //#endregion
  //#region Lifecycle
  load() {
    this.manager.onLifecycle(() => [
      (0,_arcgis_core_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_2__.when)(() => this.view?.navigation?.actionMap, () => this._updateNavigationActionMap()),
      (0,_arcgis_core_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_2__.when)(() => {
        const { view: t } = this;
        return t?.ready && t?.type === "3d" ? "ready" : "disabled";
      }, (t) => {
        this.state = t;
      }, { sync: !0, initial: !0 })
    ]);
  }
  willUpdate(t) {
    t.has("navigationMode") && this._updateNavigationActionMap();
  }
  //#endregion
  //#region Private Methods
  _onPanClick() {
    this.navigationMode = "pan";
  }
  _onRotateClick() {
    this.navigationMode = "rotate";
  }
  _updateNavigationActionMap() {
    const t = this.view?.navigation?.actionMap;
    if (!t)
      return;
    const a = this.navigationMode === "pan";
    t.dragPrimary = a ? "pan" : "rotate", t.dragSecondary = a ? "rotate" : "pan";
  }
  //#endregion
  //#region Rendering
  render() {
    const { _messages: t, navigationMode: a, state: l } = this, s = t.pan ?? "", o = t.rotate ?? "", i = l === "disabled", n = a === "pan";
    return (0,lit__WEBPACK_IMPORTED_MODULE_4__.html)`<calcite-action-bar class=${(0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_3__.safeClassMap)({ [w.base]: !0, [_chunks_globalCss_js__WEBPACK_IMPORTED_MODULE_6__.g.disabled]: i })} expand-disabled .layout=${this.layout} scale=s><calcite-action .active=${n} appearance=solid data-testid=navigation-toggle-pan .disabled=${i} .icon=${e.pan} @click=${this._onPanClick} scale=s .text=${s} title=${s ?? _arcgis_lumina__WEBPACK_IMPORTED_MODULE_3__.nothing}></calcite-action><calcite-action .active=${!n} appearance=solid data-testid=navigation-toggle-rotate .disabled=${i} .icon=${e.rotate} @click=${this._onRotateClick} scale=s .text=${o} title=${o ?? _arcgis_lumina__WEBPACK_IMPORTED_MODULE_3__.nothing}></calcite-action></calcite-action-bar>`;
  }
}
(0,_chunks_runtime_js__WEBPACK_IMPORTED_MODULE_0__.c)("arcgis-navigation-toggle", C);



/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2lkZ2V0cy9jaHVua3MvdmVuZG9ycy1ub2RlX21vZHVsZXNfYXJjZ2lzX21hcC1jb21wb25lbnRzX2Rpc3RfY29tcG9uZW50c19hcmNnaXMtbmF2aWdhdGlvbi10b2dnbGVfY3VzdG9tRWxlLWIyYzk4NC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsT0FBTztBQUNwQixnQ0FBZ0MsR0FBRztBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsNENBQTRDO0FBQ3pFO0FBQ0Esb0RBQW9ELFVBQVU7QUFDOUQsMEJBQTBCLGdDQUFnQztBQUMxRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlIQUF5SCxVQUFVO0FBQ25JLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMklBQTJJLEVBQUU7QUFDN0k7QUFXRTs7Ozs7Ozs7Ozs7Ozs7O0FDdklGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0U7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNoRDZIO0FBQ3pGO0FBQzhDO0FBQzVCO0FBQ1Y7QUFDOUM7QUFDQTtBQUNBO0FBQ0EsVUFBVSxpRkFBQyxDQUFDLDBDQUFDO0FBQ2IsZ0JBQWdCLDZFQUFDO0FBQ2pCO0FBQ0EsNEJBQTRCLDZGQUFDO0FBQzdCLFlBQVksUUFBUTtBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxnQ0FBZ0Msb0VBQU07QUFDdEM7QUFDQTtBQUNBLFFBQVE7QUFDUiw4Q0FBOEMsc0RBQUM7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksUUFBUTtBQUNwQixxREFBcUQsc0RBQUM7QUFDdEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUkscUVBQUM7QUFDTCxxRUFBcUUsc0RBQUM7QUFDdEUsS0FBSyxHQUFHLHFFQUFDLDJDQUEyQyxzREFBQztBQUNyRDtBQUNBO0FBQ0EsVUFBVSw0RUFBQztBQUtUOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQy9EK0M7QUFDdUI7QUFDVDtBQUN3RDtBQUN2RjtBQUN5QjtBQUNOO0FBQ1M7QUFDNUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsTUFBTSxxRUFBQyxRQUFRLDBCQUEwQixhQUFhLHdCQUF3Qix3QkFBd0I7QUFDdkc7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLHNEQUFDO0FBQ2pCO0FBQ0EscUNBQXFDLHFEQUFDLHlCQUF5QixxREFBQyw4TEFBOEwsaUZBQUMsMENBQTBDLDJEQUFDO0FBQzFTO0FBQ0E7QUFDQSx3QkFBd0I7QUFDeEI7QUFDQTtBQUNBLDZCQUE2Qix3REFBQztBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTSx3RUFBQztBQUNQLE1BQU0sd0VBQUM7QUFDUCxnQkFBZ0IsVUFBVTtBQUMxQjtBQUNBLE9BQU87QUFDUDtBQUNBLE9BQU8sSUFBSSx1QkFBdUI7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksNENBQTRDO0FBQ3hELFdBQVcseUNBQUMsNkJBQTZCLDREQUFDLEdBQUcsZUFBZSxtREFBQyxlQUFlLEdBQUcsMEJBQTBCLGFBQWEsa0NBQWtDLEdBQUcsK0RBQStELEdBQUcsUUFBUSxPQUFPLFNBQVMsa0JBQWtCLGdCQUFnQixHQUFHLFFBQVEsS0FBSyxtREFBQyxDQUFDLDRDQUE0QyxJQUFJLGtFQUFrRSxHQUFHLFFBQVEsVUFBVSxTQUFTLHFCQUFxQixnQkFBZ0IsR0FBRyxRQUFRLEtBQUssbURBQUMsQ0FBQztBQUNoZjtBQUNBO0FBQ0EscURBQUM7QUFHQyIsInNvdXJjZXMiOlsid2VicGFjazovL2V4Yi1jbGllbnQvLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9tYXAtY29tcG9uZW50cy9kaXN0L2NodW5rcy9jb21wb25lbnQtdXRpbHMuanMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL21hcC1jb21wb25lbnRzL2Rpc3QvY2h1bmtzL2dsb2JhbENzcy5qcyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vbm9kZV9tb2R1bGVzL0BhcmNnaXMvbWFwLWNvbXBvbmVudHMvZGlzdC9jaHVua3MvdXNlVmlldy5qcyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vbm9kZV9tb2R1bGVzL0BhcmNnaXMvbWFwLWNvbXBvbmVudHMvZGlzdC9jb21wb25lbnRzL2FyY2dpcy1uYXZpZ2F0aW9uLXRvZ2dsZS9jdXN0b21FbGVtZW50LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qISBBbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVzcmksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjMyL2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbnY0LjMyLjEgKi9cbmZ1bmN0aW9uIFAoZSwgaSkge1xuICBBcnJheS5pc0FycmF5KGkpID8gZS5fd2F0Y2hIYW5kbGVzID0gWy4uLmUuX3dhdGNoSGFuZGxlcywgLi4uaV0gOiBlLl93YXRjaEhhbmRsZXMucHVzaChpKTtcbn1cbmZ1bmN0aW9uIHAoZSkge1xuICBlLmVsLmNoaWxkRWxlbSAmJiAoZS5lbC5jaGlsZEVsZW0ub3duZWRCeSA9IGUuZWwpO1xuICBjb25zdCBpID0gaChlKTtcbiAgaWYgKCFpKSB7XG4gICAgY29uc3QgdCA9IHkoZS5yZWZlcmVuY2VFbGVtZW50KTtcbiAgICBpZiAoIXQpIHtcbiAgICAgIGcoZSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHJldHVybiBmKHQsIGUsICEwKSwgdDtcbiAgfVxuICByZXR1cm4gdyhpLCBlLmVsLnBhcmVudCkgfHwgKGUuZWwucGFyZW50ID0gaSwgaS50YWdOYW1lLnRvTG93ZXJDYXNlKCkgPT09IFwiYXJjZ2lzLWV4cGFuZFwiID8gdihpLCBlKSA6IGkudGFnTmFtZS50b0xvd2VyQ2FzZSgpID09PSBcImFyY2dpcy1wbGFjZW1lbnRcIiA/IEMoaSwgZSkgOiBmKGksIGUsICExKSksIGk7XG59XG5mdW5jdGlvbiBoKHsgZWw6IGUgfSkge1xuICBmb3IgKGxldCBpID0gZS5wYXJlbnRFbGVtZW50OyBpOyBpID0gaT8ucGFyZW50RWxlbWVudCA/PyBudWxsKSB7XG4gICAgaWYgKGMuaGFzKGkudGFnTmFtZS50b0xvd2VyQ2FzZSgpKSlcbiAgICAgIHJldHVybiBpO1xuICAgIGlmIChcIm93bmVkQnlcIiBpbiBpICYmIGkub3duZWRCeSBpbnN0YW5jZW9mIEhUTUxFbGVtZW50ICYmIGMuaGFzKGkub3duZWRCeS50YWdOYW1lLnRvTG93ZXJDYXNlKCkpKVxuICAgICAgcmV0dXJuIGkub3duZWRCeTtcbiAgfVxufVxuY29uc3QgYyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KFtcbiAgXCJhcmNnaXMtbWFwXCIsXG4gIFwiYXJjZ2lzLXNjZW5lXCIsXG4gIFwiYXJjZ2lzLWxpbmstY2hhcnRcIixcbiAgXCJhcmNnaXMtZXhwYW5kXCIsXG4gIFwiYXJjZ2lzLXBsYWNlbWVudFwiXG5dKTtcbmZ1bmN0aW9uIHcoZSwgaSkge1xuICBpZiAoZSAhPT0gaSlcbiAgICByZXR1cm4gITE7XG4gIGNvbnN0IHQgPSBlLnRhZ05hbWUudG9Mb3dlckNhc2UoKTtcbiAgcmV0dXJuIHQgPT09IFwiYXJjZ2lzLWV4cGFuZFwiIHx8IHQgPT09IFwiYXJjZ2lzLXBsYWNlbWVudFwiO1xufVxuZnVuY3Rpb24gbChlLCBpLCB0ID0gXCJhcmNnaXNSZWFkeVwiKSB7XG4gIGNvbnN0IHIgPSBlO1xuICBpZiAodHlwZW9mIHIudmlldz8ucmVhZHkgPT0gXCJib29sZWFuXCIpXG4gICAgaShyLnZpZXcpO1xuICBlbHNlIHtcbiAgICBsZXQgcyA9IGZ1bmN0aW9uKGQpIHtcbiAgICAgIGQudGFyZ2V0ID09PSBlICYmIChsKGUsIGksIHQpLCBlLnJlbW92ZUV2ZW50TGlzdGVuZXIodCwgcykpO1xuICAgIH07XG4gICAgZS5hZGRFdmVudExpc3RlbmVyKHQsIHMpO1xuICB9XG59XG5jb25zdCB2ID0gKGUsIGkpID0+IGwoZSwgKHQpID0+IHtcbiAgaS5lbC5jaGlsZEVsZW0gJiYgZS5jb250ZW50ICE9IG51bGwgJiYgZS5jb250ZW50LmFwcGVuZChpLmVsLmNoaWxkRWxlbSksIGUuZXhwYW5kSWNvbiA9IGkuaWNvbiB8fCBpLndpZGdldD8uaWNvbiB8fCBlLmV4cGFuZEljb24sIGkucG9zaXRpb24gPSBlLnBvc2l0aW9uLCBpLmVsLnZpZXcgPSB0O1xufSksIEMgPSAoZSwgaSkgPT4gbChlLCAodCkgPT4ge1xuICBpLmVsLmNoaWxkRWxlbSAmJiBpLmVsLmFwcGVuZChpLmVsLmNoaWxkRWxlbSksIGkucG9zaXRpb24gPSBlLnBvc2l0aW9uLCBpLmVsLnZpZXcgPSB0O1xufSksIGYgPSAoZSwgaSwgdCkgPT4gbChcbiAgZSxcbiAgKHIpID0+IHtcbiAgICB0ID8gZyhpKSA6IGkuZWwuY2hpbGRFbGVtICYmIEUoZSwgaSksIGkuZWwudmlldyA9IHI7XG4gIH0sXG4gIFwiYXJjZ2lzVmlld1JlYWR5Q2hhbmdlXCJcbik7XG5mdW5jdGlvbiBFKGUsIGkpIHtcbiAgY29uc3QgdCA9IGkuZWwuY2hpbGRFbGVtID8/IGkuZWwsIHIgPSBbLi4uZS5jaGlsZHJlbl0sIHMgPSB7fTtcbiAgZm9yIChjb25zdCBhIG9mIHIpIHtcbiAgICBjb25zdCBuID0gYS5nZXRBdHRyaWJ1dGUoXCJwb3NpdGlvblwiKSA/PyBcIm1hbnVhbFwiO1xuICAgIHNbbl0gPz89IFtdLCBzW25dLnB1c2goeyBjaGlsZDogYSwgcG9zaXRpb246IG4sIGluZGV4OiByLmluZGV4T2YoYSkgfSk7XG4gIH1cbiAgY29uc3QgZCA9IHNbaS5wb3NpdGlvbiA/PyBcIm1hbnVhbFwiXT8uZmluZEluZGV4KCh7IGNoaWxkOiBhIH0pID0+IGEgPT09IGkuZWwpLCBvID0gZS52aWV3LnVpO1xuICBvLnJlbW92ZSh0KSwgby5hZGQodCwgeyBwb3NpdGlvbjogaS5wb3NpdGlvbiwgaW5kZXg6IGQgfSk7XG59XG5mdW5jdGlvbiBMKGUpIHtcbiAgbGV0IGkgPSAhMSwgdCA9IGUuZWwudmlldztcbiAgY29uc3QgciA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoT2JqZWN0LmdldFByb3RvdHlwZU9mKGUuZWwpLCBcInZpZXdcIikgPz8ge1xuICAgIGdldDogKCkgPT4gdCxcbiAgICBzZXQ6IChzKSA9PiB0ID0gc1xuICB9O1xuICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5lbCwgXCJ2aWV3XCIsIHtcbiAgICBnZXQ6IHIuZ2V0LmJpbmQoZS5lbCksXG4gICAgc2V0OiAocykgPT4ge1xuICAgICAgci5zZXQuY2FsbChlLmVsLCBzKSwgcyAmJiAhaSAmJiAoaSA9ICEwLCBlLmFyY2dpc1JlYWR5LmVtaXQoKSk7XG4gICAgfSxcbiAgICBjb25maWd1cmFibGU6ICEwLFxuICAgIGVudW1lcmFibGU6ICEwXG4gIH0pLCB0ICYmIChlLmVsLnZpZXcgPSB0KTtcbn1cbmZ1bmN0aW9uIHgoZSkge1xuICByZXR1cm4gZSA9PSBudWxsIHx8IGUgPT09IFwiXCI7XG59XG5mdW5jdGlvbiBIKGUsIGkpIHtcbiAgcmV0dXJuIGkgIT0gbnVsbCAmJiBlPy5wb3NpdGlvbiA9PT0gaS5wb3NpdGlvbiAmJiBlPy5oZWFkaW5nID09PSBpLmhlYWRpbmcgJiYgZT8udGlsdCA9PT0gaS50aWx0ICYmIGU/LmZvdiA9PT0gaS5mb3Y7XG59XG5mdW5jdGlvbiBOKGUsIGkpIHtcbiAgcmV0dXJuIGkgPT09IHZvaWQgMCB8fCBlPy50YXJnZXRHZW9tZXRyeSAhPT0gaT8udGFyZ2V0R2VvbWV0cnkgfHwgZT8ucm90YXRpb24gIT09IGk/LnJvdGF0aW9uIHx8IGU/LnNjYWxlICE9PSBpPy5zY2FsZTtcbn1cbmZ1bmN0aW9uIE8oZSwgaSkge1xuICByZXR1cm4gdShpPy5jZW50ZXIsIGUpO1xufVxuZnVuY3Rpb24gdShlLCBpKSB7XG4gIGlmICh0eXBlb2YgaSA9PSBcInN0cmluZ1wiKVxuICAgIHJldHVybiB1KGUsIGkuc3BsaXQoXCIsXCIpLm1hcChOdW1iZXIpKTtcbiAgaWYgKCFlKVxuICAgIHJldHVybiBpO1xuICBpZiAoQXJyYXkuaXNBcnJheShpKSkge1xuICAgIGNvbnN0IHQgPSBpWzBdLCByID0gaVsxXSwgcyA9IGkubGVuZ3RoID4gMiA/IGlbMl0gOiB2b2lkIDA7XG4gICAgaWYgKHQgIT09IGUubG9uZ2l0dWRlIHx8IHIgIT09IGUubGF0aXR1ZGUgfHwgcyAhPT0gZS56KVxuICAgICAgcmV0dXJuIGk7XG4gIH0gZWxzZSBpZiAoaSAmJiAhZT8uZXF1YWxzKGkpKVxuICAgIHJldHVybiBpO1xufVxuYXN5bmMgZnVuY3Rpb24gUyhlLCBpKSB7XG4gIGkgIT0gbnVsbCAmJiAodHlwZW9mIGkgPT0gXCJzdHJpbmdcIiA/IGUuZWwudmlldyA9IGF3YWl0IGIoaSkgOiBlLndpZGdldCAmJiAoZS5lbC52aWV3ID0gaS52aWV3KSk7XG59XG5hc3luYyBmdW5jdGlvbiBiKGUpIHtcbiAgY29uc3QgaSA9IHkoZSk7XG4gIHJldHVybiBhd2FpdCBuZXcgUHJvbWlzZSgodCkgPT4ge1xuICAgIHR5cGVvZiBpPy52aWV3Py5yZWFkeSA9PSBcImJvb2xlYW5cIiA/IHQoaS52aWV3KSA6IGkgJiYgaS5hZGRFdmVudExpc3RlbmVyKFwiYXJjZ2lzVmlld1JlYWR5Q2hhbmdlXCIsICgpID0+IHQoaS52aWV3KSwgeyBvbmNlOiAhMCB9KTtcbiAgfSk7XG59XG5mdW5jdGlvbiBnKGUpIHtcbiAgZS5lbC5jaGlsZEVsZW0gJiYgKGUuZWwuc2hhZG93Um9vdCA/PyBlLmVsKS5hcHBlbmQoZS5lbC5jaGlsZEVsZW0pO1xufVxuZnVuY3Rpb24geShlKSB7XG4gIHJldHVybiB0eXBlb2YgZSAhPSBcInN0cmluZ1wiID8gZSA/PyB2b2lkIDAgOiAoZS5pbmNsdWRlcyhcIiNcIikgfHwgZS5pbmNsdWRlcyhcIi5cIikgfHwgZS5pbmNsdWRlcyhcIltcIikgPyB2b2lkIDAgOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAjJHtlfWApKSA/PyBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGUpID8/IHZvaWQgMDtcbn1cbmV4cG9ydCB7XG4gIHAgYXMgYSxcbiAgUCBhcyBiLFxuICBIIGFzIGMsXG4gIEwgYXMgZCxcbiAgTyBhcyBlLFxuICB4IGFzIGYsXG4gIE4gYXMgaSxcbiAgdSBhcyBwLFxuICBTIGFzIHJcbn07XG4iLCIvKiEgQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFc3JpLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4zMi9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG52NC4zMi4xICovXG5jb25zdCBlID0ge1xuICBhbmNob3I6IFwiZXNyaS13aWRnZXRfX2FuY2hvclwiLFxuICBhbmNob3JEaXNhYmxlZDogXCJlc3JpLXdpZGdldF9fYW5jaG9yLS1kaXNhYmxlZFwiLFxuICBidXR0b246IFwiZXNyaS1idXR0b25cIixcbiAgYnV0dG9uRGlzYWJsZWQ6IFwiZXNyaS1idXR0b24tLWRpc2FibGVkXCIsXG4gIGJ1dHRvbkhhbGY6IFwiZXNyaS1idXR0b24tLWhhbGZcIixcbiAgYnV0dG9uU2Vjb25kYXJ5OiBcImVzcmktYnV0dG9uLS1zZWNvbmRhcnlcIixcbiAgYnV0dG9uU21hbGw6IFwiZXNyaS1idXR0b24tLXNtYWxsXCIsXG4gIGJ1dHRvblRlcnRpYXJ5OiBcImVzcmktYnV0dG9uLS10ZXJ0aWFyeVwiLFxuICBidXR0b25UaGlyZDogXCJlc3JpLWJ1dHRvbi0tdGhpcmRcIixcbiAgZGlzYWJsZWQ6IFwiZXNyaS1kaXNhYmxlZFwiLFxuICBkaXNhYmxlZEVsZW1lbnQ6IFwiZXNyaS1kaXNhYmxlZC1lbGVtZW50XCIsXG4gIGVtcHR5OiBcImVzcmktd2lkZ2V0X19jb250ZW50LS1lbXB0eVwiLFxuICBlbXB0eUlsbHVzdHJhdGlvbjogXCJlc3JpLXdpZGdldF9fY29udGVudC1pbGx1c3RyYXRpb24tLWVtcHR5XCIsXG4gIGhlYWRpbmc6IFwiZXNyaS13aWRnZXRfX2hlYWRpbmdcIixcbiAgaGlkZGVuOiBcImVzcmktaGlkZGVuXCIsXG4gIGlucHV0OiBcImVzcmktaW5wdXRcIixcbiAgaW50ZXJhY3RpdmU6IFwiZXNyaS1pbnRlcmFjdGl2ZVwiLFxuICBsb2FkZXI6IFwiZXNyaS13aWRnZXRfX2xvYWRlclwiLFxuICBsb2FkZXJBbmltYXRpb246IFwiZXNyaS13aWRnZXRfX2xvYWRlci1hbmltYXRpb25cIixcbiAgbG9hZGVyVGV4dDogXCJlc3JpLXdpZGdldF9fbG9hZGVyLXRleHRcIixcbiAgbWVudTogXCJlc3JpLW1lbnVcIixcbiAgbWVudUhlYWRlcjogXCJlc3JpLW1lbnVfX2hlYWRlclwiLFxuICBtZW51SXRlbTogXCJlc3JpLW1lbnVfX2xpc3QtaXRlbVwiLFxuICBtZW51SXRlbUFjdGl2ZTogXCJlc3JpLW1lbnVfX2xpc3QtaXRlbS0tYWN0aXZlXCIsXG4gIG1lbnVJdGVtRm9jdXM6IFwiZXNyaS1tZW51X19saXN0LWl0ZW0tLWZvY3VzXCIsXG4gIG1lbnVMaXN0OiBcImVzcmktbWVudV9fbGlzdFwiLFxuICBub0Jvb2ttYXJrc0ljb246IFwiZXNyaS13aWRnZXRfX25vLWJvb2ttYXJrLWljb25cIixcbiAgcGFuZWw6IFwiZXNyaS13aWRnZXQtLXBhbmVsXCIsXG4gIHBhbmVsSGVpZ2h0T25seTogXCJlc3JpLXdpZGdldC0tcGFuZWwtaGVpZ2h0LW9ubHlcIixcbiAgcHJpbWFyeVRpY2s6IFwicHJpbWFyeS10aWNrXCIsXG4gIHByaW1hcnlUaWNrQW1QbTogXCJwcmltYXJ5LXRpY2tfX2FtcG1cIixcbiAgcHJpbWFyeVRpY2tMYWJlbDogXCJwcmltYXJ5LXRpY2tfX2xhYmVsXCIsXG4gIHJvdGF0aW5nOiBcImVzcmktcm90YXRpbmdcIixcbiAgc2Vjb25kYXJ5VGljazogXCJzZWNvbmRhcnktdGlja1wiLFxuICBzZWxlY3Q6IFwiZXNyaS1zZWxlY3RcIixcbiAgdGFibGU6IFwiZXNyaS13aWRnZXRfX3RhYmxlXCIsXG4gIHVpOiBcImVzcmktY29tcG9uZW50XCIsXG4gIHdpZGdldDogXCJlc3JpLXdpZGdldCBlc3JpLWNvbXBvbmVudFwiLFxuICB3aWRnZXRCdXR0b246IFwiZXNyaS13aWRnZXQtLWJ1dHRvblwiLFxuICB3aWRnZXRCdXR0b25BY3RpdmU6IFwiZXNyaS13aWRnZXQtLWJ1dHRvbi1hY3RpdmVcIixcbiAgd2lkZ2V0RGlzYWJsZWQ6IFwiZXNyaS13aWRnZXQtLWRpc2FibGVkXCJcbn07XG5leHBvcnQge1xuICBlIGFzIGdcbn07XG4iLCJpbXBvcnQgeyBtYWtlVDluQ29udHJvbGxlciBhcyBhLCBwcm94eUV4cG9ydHMgYXMgaCwgR2VuZXJpY0NvbnRyb2xsZXIgYXMgbCwgd2F0Y2ggYXMgbiB9IGZyb20gXCJAYXJjZ2lzL2NvbXBvbmVudHMtY29udHJvbGxlcnNcIjtcbmltcG9ydCB7IGcgYXMgZCB9IGZyb20gXCIuL3J1bnRpbWUuanNcIjtcbmltcG9ydCB7IHNpZ25hbCBhcyBtIH0gZnJvbSBcIkBhcmNnaXMvY29yZS9hcHBsaWNhdGlvbnMvQ29tcG9uZW50cy9yZWFjdGl2ZVV0aWxzLmpzXCI7XG5pbXBvcnQgKiBhcyBwIGZyb20gXCJAYXJjZ2lzL2NvcmUvY29yZS9yZWFjdGl2ZVV0aWxzLmpzXCI7XG5pbXBvcnQgeyBhIGFzIGkgfSBmcm9tIFwiLi9jb21wb25lbnQtdXRpbHMuanNcIjtcbi8qISBBbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVzcmksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjMyL2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbnY0LjMyLjEgKi9cbmNvbnN0IEUgPSBhKGQpLCBfID0gKHMpID0+IHUocyk7XG5jbGFzcyB2IGV4dGVuZHMgbCB7XG4gIGNvbnN0cnVjdG9yKGUpIHtcbiAgICBzdXBlcihlKSwgdGhpcy5fdmlldyQgPSBtKHZvaWQgMCksIHRoaXMuX3ZpZXdEZXN0cm95SGFuZGxlID0gdm9pZCAwLCB0aGlzLl9hcmNnaXNSZWFkeUVtaXR0ZWQgPSAhMTtcbiAgICBjb25zdCB7IGVsOiB0IH0gPSBlLCByID0gdC52aWV3O1xuICAgIHRoaXMuc2V0UHJvdmlzaW9uYWxFeHBvcnRzKHZvaWQgMCksIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCBcInZpZXdcIiwge1xuICAgICAgZ2V0OiAoKSA9PiB0aGlzLl92aWV3JC52YWx1ZSxcbiAgICAgIHNldDogKG8pID0+IHtcbiAgICAgICAgaWYgKHRoaXMuZXhwb3J0cyA9PT0gbylcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIGNvbnN0IGMgPSB0LnZpZXc7XG4gICAgICAgIHRoaXMuX3ZpZXckLnZhbHVlID0gbywgdGhpcy5leHBvcnRzID0gbywgdGhpcy5jb21wb25lbnQucmVxdWVzdFVwZGF0ZShcInZpZXdcIiwgYyksICF0aGlzLl9hcmNnaXNSZWFkeUVtaXR0ZWQgJiYgbyAhPSBudWxsICYmICh0aGlzLl9hcmNnaXNSZWFkeUVtaXR0ZWQgPSAhMCwgdGhpcy5jb21wb25lbnQuYXJjZ2lzUmVhZHkuZW1pdCgpKTtcbiAgICAgIH0sXG4gICAgICBjb25maWd1cmFibGU6ICEwLFxuICAgICAgZW51bWVyYWJsZTogITBcbiAgICB9KSwgZSAhPT0gdCAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwgXCJ2aWV3XCIsIHtcbiAgICAgIGdldDogKCkgPT4gdC52aWV3LFxuICAgICAgc2V0OiAobykgPT4ge1xuICAgICAgICB0LnZpZXcgPSBvO1xuICAgICAgfVxuICAgIH0pLCBxdWV1ZU1pY3JvdGFzaygoKSA9PiB7XG4gICAgICByICYmICh0LnZpZXcgPSByKTtcbiAgICB9KTtcbiAgfVxuICBob3N0Q29ubmVjdGVkKCkge1xuICAgIHRoaXMuX3ZpZXdEZXN0cm95SGFuZGxlID8/PSBwLndoZW4oXG4gICAgICAoKSA9PiB0aGlzLl92aWV3JC52YWx1ZT8uZGVzdHJveWVkLFxuICAgICAgKCkgPT4gdm9pZCB0aGlzLmNvbXBvbmVudC5kZXN0cm95Py4oKS5jYXRjaChjb25zb2xlLmVycm9yKSxcbiAgICAgIHsgc3luYzogITAgfVxuICAgICksIHRoaXMuY29tcG9uZW50Lm1hbmFnZXIubG9hZGVkQ2FsbGVkICYmIGkodGhpcy5jb21wb25lbnQpO1xuICB9XG4gIGhvc3RMb2FkKCkge1xuICAgIHRoaXMuY29tcG9uZW50Lm1hbmFnZXIuZGVzdHJveWVkIHx8IHRoaXMuX3dhdGNoTWV0YVByb3BlcnRpZXMoKTtcbiAgfVxuICBob3N0TG9hZGVkKCkge1xuICAgIGNvbnN0IHsgZWw6IGUgfSA9IHRoaXMuY29tcG9uZW50LCB0ID0gZS5zaGFkb3dSb290Py5maXJzdEVsZW1lbnRDaGlsZCA/PyBlLmZpcnN0RWxlbWVudENoaWxkID8/IHZvaWQgMDtcbiAgICBlLmNoaWxkRWxlbSA9IHQgPz8gZS5jaGlsZEVsZW0sIGUuaXNDb25uZWN0ZWQgJiYgaSh0aGlzLmNvbXBvbmVudCk7XG4gIH1cbiAgaG9zdERpc2Nvbm5lY3RlZCgpIHtcbiAgICB0eXBlb2YgdGhpcy5jb21wb25lbnQuZWwuY2hpbGRFbGVtID09IFwib2JqZWN0XCIgJiYgdGhpcy5fdmlldyQudmFsdWU/LnVpPy5yZW1vdmUodGhpcy5jb21wb25lbnQuZWwuY2hpbGRFbGVtKTtcbiAgfVxuICBob3N0RGVzdHJveSgpIHtcbiAgICB0aGlzLl92aWV3RGVzdHJveUhhbmRsZT8ucmVtb3ZlKCk7XG4gIH1cbiAgX3dhdGNoTWV0YVByb3BlcnRpZXMoKSB7XG4gICAgbih0aGlzLmNvbXBvbmVudCwgXCJwb3NpdGlvblwiLCAoZSkgPT4ge1xuICAgICAgdGhpcy5jb21wb25lbnQuZWwuY2hpbGRFbGVtICE9IG51bGwgJiYgdHlwZW9mIGUgPT0gXCJzdHJpbmdcIiAmJiBpKHRoaXMuY29tcG9uZW50KTtcbiAgICB9KSwgbih0aGlzLmNvbXBvbmVudCwgXCJyZWZlcmVuY2VFbGVtZW50XCIsICgpID0+IGkodGhpcy5jb21wb25lbnQpKTtcbiAgfVxufVxuY29uc3QgdSA9IGgodik7XG5leHBvcnQge1xuICB2IGFzIFYsXG4gIF8gYXMgYSxcbiAgRSBhcyB1XG59O1xuIiwiaW1wb3J0IHsgYyBhcyBkIH0gZnJvbSBcIi4uLy4uL2NodW5rcy9ydW50aW1lLmpzXCI7XG5pbXBvcnQgeyB1c2VQcm9wZXJ0eUNoYW5nZSBhcyBnIH0gZnJvbSBcIkBhcmNnaXMvY29tcG9uZW50cy1jb250cm9sbGVyc1wiO1xuaW1wb3J0IHsgd2hlbiBhcyBjIH0gZnJvbSBcIkBhcmNnaXMvY29yZS9jb3JlL3JlYWN0aXZlVXRpbHMuanNcIjtcbmltcG9ydCB7IExpdEVsZW1lbnQgYXMgcCwgY3JlYXRlRXZlbnQgYXMgaCwgbm9TaGFkb3dSb290IGFzIHYsIHNhZmVDbGFzc01hcCBhcyBtLCBub3RoaW5nIGFzIHIgfSBmcm9tIFwiQGFyY2dpcy9sdW1pbmFcIjtcbmltcG9ydCB7IGh0bWwgYXMgdSB9IGZyb20gXCJsaXRcIjtcbmltcG9ydCB7IGEgYXMgeSwgdSBhcyBiIH0gZnJvbSBcIi4uLy4uL2NodW5rcy91c2VWaWV3LmpzXCI7XG5pbXBvcnQgeyBnIGFzIGYgfSBmcm9tIFwiLi4vLi4vY2h1bmtzL2dsb2JhbENzcy5qc1wiO1xuaW1wb3J0IHsgY3NzIGFzIE0gfSBmcm9tIFwiQGxpdC9yZWFjdGl2ZS1lbGVtZW50L2Nzcy10YWcuanNcIjtcbi8qISBBbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVzcmksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjMyL2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbnY0LjMyLjEgKi9cbmNvbnN0ICQgPSBcImFyY2dpcy1uYXZpZ2F0aW9uLXRvZ2dsZVwiLCB3ID0ge1xuICBiYXNlOiAkXG59LCBfID0gTWBAbGF5ZXJ7LmFyY2dpcy1uYXZpZ2F0aW9uLXRvZ2dsZXtkaXNwbGF5OmZsZXg7aW5saW5lLXNpemU6Zml0LWNvbnRlbnQ7YmxvY2stc2l6ZTpmaXQtY29udGVudH19YCwgZSA9IHtcbiAgcGFuOiBcIm1vdmVcIixcbiAgcm90YXRlOiBcInJvdGF0ZVwiXG59O1xuY2xhc3MgQyBleHRlbmRzIHAge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlciguLi5hcmd1bWVudHMpLCB0aGlzLnZpZXcgPSB5KHRoaXMpLCB0aGlzLl9tZXNzYWdlcyA9IGIoKSwgdGhpcy5hdXRvRGVzdHJveURpc2FibGVkID0gITEsIHRoaXMuaWNvbiA9IGUucGFuLCB0aGlzLmxheW91dCA9IFwidmVydGljYWxcIiwgdGhpcy5uYXZpZ2F0aW9uTW9kZSA9IFwicGFuXCIsIHRoaXMucG9zaXRpb24gPSBcInRvcC1sZWZ0XCIsIHRoaXMuc3RhdGUgPSBcImRpc2FibGVkXCIsIHRoaXMuYXJjZ2lzUHJvcGVydHlDaGFuZ2UgPSBnKCkoXCJsYXlvdXRcIiwgXCJzdGF0ZVwiKSwgdGhpcy5hcmNnaXNSZWFkeSA9IGgoKTtcbiAgfVxuICBzdGF0aWMge1xuICAgIHRoaXMucHJvcGVydGllcyA9IHsgYXV0b0Rlc3Ryb3lEaXNhYmxlZDogNSwgaWNvbjogMywgbGFiZWw6IDEsIGxheW91dDogMywgbmF2aWdhdGlvbk1vZGU6IDMsIHBvc2l0aW9uOiAxLCByZWZlcmVuY2VFbGVtZW50OiAxLCBzdGF0ZTogMyB9O1xuICB9XG4gIHN0YXRpYyB7XG4gICAgdGhpcy5zaGFkb3dSb290T3B0aW9ucyA9IHY7XG4gIH1cbiAgc3RhdGljIHtcbiAgICB0aGlzLnN0eWxlcyA9IF87XG4gIH1cbiAgLy8jZW5kcmVnaW9uXG4gIC8vI3JlZ2lvbiBQdWJsaWMgTWV0aG9kc1xuICAvKiogUGVybWFuZW50bHkgZGVzdHJveSB0aGUgY29tcG9uZW50ICovXG4gIGFzeW5jIGRlc3Ryb3koKSB7XG4gICAgYXdhaXQgdGhpcy5tYW5hZ2VyLmRlc3Ryb3koKTtcbiAgfVxuICBhc3luYyB0b2dnbGUoKSB7XG4gICAgdGhpcy5zdGF0ZSAhPT0gXCJkaXNhYmxlZFwiICYmICh0aGlzLm5hdmlnYXRpb25Nb2RlID0gdGhpcy5uYXZpZ2F0aW9uTW9kZSAhPT0gXCJwYW5cIiA/IFwicGFuXCIgOiBcInJvdGF0ZVwiKTtcbiAgfVxuICAvLyNlbmRyZWdpb25cbiAgLy8jcmVnaW9uIExpZmVjeWNsZVxuICBsb2FkKCkge1xuICAgIHRoaXMubWFuYWdlci5vbkxpZmVjeWNsZSgoKSA9PiBbXG4gICAgICBjKCgpID0+IHRoaXMudmlldz8ubmF2aWdhdGlvbj8uYWN0aW9uTWFwLCAoKSA9PiB0aGlzLl91cGRhdGVOYXZpZ2F0aW9uQWN0aW9uTWFwKCkpLFxuICAgICAgYygoKSA9PiB7XG4gICAgICAgIGNvbnN0IHsgdmlldzogdCB9ID0gdGhpcztcbiAgICAgICAgcmV0dXJuIHQ/LnJlYWR5ICYmIHQ/LnR5cGUgPT09IFwiM2RcIiA/IFwicmVhZHlcIiA6IFwiZGlzYWJsZWRcIjtcbiAgICAgIH0sICh0KSA9PiB7XG4gICAgICAgIHRoaXMuc3RhdGUgPSB0O1xuICAgICAgfSwgeyBzeW5jOiAhMCwgaW5pdGlhbDogITAgfSlcbiAgICBdKTtcbiAgfVxuICB3aWxsVXBkYXRlKHQpIHtcbiAgICB0LmhhcyhcIm5hdmlnYXRpb25Nb2RlXCIpICYmIHRoaXMuX3VwZGF0ZU5hdmlnYXRpb25BY3Rpb25NYXAoKTtcbiAgfVxuICAvLyNlbmRyZWdpb25cbiAgLy8jcmVnaW9uIFByaXZhdGUgTWV0aG9kc1xuICBfb25QYW5DbGljaygpIHtcbiAgICB0aGlzLm5hdmlnYXRpb25Nb2RlID0gXCJwYW5cIjtcbiAgfVxuICBfb25Sb3RhdGVDbGljaygpIHtcbiAgICB0aGlzLm5hdmlnYXRpb25Nb2RlID0gXCJyb3RhdGVcIjtcbiAgfVxuICBfdXBkYXRlTmF2aWdhdGlvbkFjdGlvbk1hcCgpIHtcbiAgICBjb25zdCB0ID0gdGhpcy52aWV3Py5uYXZpZ2F0aW9uPy5hY3Rpb25NYXA7XG4gICAgaWYgKCF0KVxuICAgICAgcmV0dXJuO1xuICAgIGNvbnN0IGEgPSB0aGlzLm5hdmlnYXRpb25Nb2RlID09PSBcInBhblwiO1xuICAgIHQuZHJhZ1ByaW1hcnkgPSBhID8gXCJwYW5cIiA6IFwicm90YXRlXCIsIHQuZHJhZ1NlY29uZGFyeSA9IGEgPyBcInJvdGF0ZVwiIDogXCJwYW5cIjtcbiAgfVxuICAvLyNlbmRyZWdpb25cbiAgLy8jcmVnaW9uIFJlbmRlcmluZ1xuICByZW5kZXIoKSB7XG4gICAgY29uc3QgeyBfbWVzc2FnZXM6IHQsIG5hdmlnYXRpb25Nb2RlOiBhLCBzdGF0ZTogbCB9ID0gdGhpcywgcyA9IHQucGFuID8/IFwiXCIsIG8gPSB0LnJvdGF0ZSA/PyBcIlwiLCBpID0gbCA9PT0gXCJkaXNhYmxlZFwiLCBuID0gYSA9PT0gXCJwYW5cIjtcbiAgICByZXR1cm4gdWA8Y2FsY2l0ZS1hY3Rpb24tYmFyIGNsYXNzPSR7bSh7IFt3LmJhc2VdOiAhMCwgW2YuZGlzYWJsZWRdOiBpIH0pfSBleHBhbmQtZGlzYWJsZWQgLmxheW91dD0ke3RoaXMubGF5b3V0fSBzY2FsZT1zPjxjYWxjaXRlLWFjdGlvbiAuYWN0aXZlPSR7bn0gYXBwZWFyYW5jZT1zb2xpZCBkYXRhLXRlc3RpZD1uYXZpZ2F0aW9uLXRvZ2dsZS1wYW4gLmRpc2FibGVkPSR7aX0gLmljb249JHtlLnBhbn0gQGNsaWNrPSR7dGhpcy5fb25QYW5DbGlja30gc2NhbGU9cyAudGV4dD0ke3N9IHRpdGxlPSR7cyA/PyByfT48L2NhbGNpdGUtYWN0aW9uPjxjYWxjaXRlLWFjdGlvbiAuYWN0aXZlPSR7IW59IGFwcGVhcmFuY2U9c29saWQgZGF0YS10ZXN0aWQ9bmF2aWdhdGlvbi10b2dnbGUtcm90YXRlIC5kaXNhYmxlZD0ke2l9IC5pY29uPSR7ZS5yb3RhdGV9IEBjbGljaz0ke3RoaXMuX29uUm90YXRlQ2xpY2t9IHNjYWxlPXMgLnRleHQ9JHtvfSB0aXRsZT0ke28gPz8gcn0+PC9jYWxjaXRlLWFjdGlvbj48L2NhbGNpdGUtYWN0aW9uLWJhcj5gO1xuICB9XG59XG5kKFwiYXJjZ2lzLW5hdmlnYXRpb24tdG9nZ2xlXCIsIEMpO1xuZXhwb3J0IHtcbiAgQyBhcyBBcmNnaXNOYXZpZ2F0aW9uVG9nZ2xlXG59O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9