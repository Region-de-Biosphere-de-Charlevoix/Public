"use strict";
(self["webpackChunkexb_client"] = self["webpackChunkexb_client"] || []).push([["vendors-node_modules_arcgis_map-components_dist_components_arcgis-scale-bar_customElement_js"],{

/***/ "./node_modules/@arcgis/map-components/dist/chunks/globalCss.js":
/*!**********************************************************************!*\
  !*** ./node_modules/@arcgis/map-components/dist/chunks/globalCss.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   g: () => (/* binding */ e)
/* harmony export */ });
/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.32/esri/copyright.txt for details.
v4.32.1 */
const e = {
  anchor: "esri-widget__anchor",
  anchorDisabled: "esri-widget__anchor--disabled",
  button: "esri-button",
  buttonDisabled: "esri-button--disabled",
  buttonHalf: "esri-button--half",
  buttonSecondary: "esri-button--secondary",
  buttonSmall: "esri-button--small",
  buttonTertiary: "esri-button--tertiary",
  buttonThird: "esri-button--third",
  disabled: "esri-disabled",
  disabledElement: "esri-disabled-element",
  empty: "esri-widget__content--empty",
  emptyIllustration: "esri-widget__content-illustration--empty",
  heading: "esri-widget__heading",
  hidden: "esri-hidden",
  input: "esri-input",
  interactive: "esri-interactive",
  loader: "esri-widget__loader",
  loaderAnimation: "esri-widget__loader-animation",
  loaderText: "esri-widget__loader-text",
  menu: "esri-menu",
  menuHeader: "esri-menu__header",
  menuItem: "esri-menu__list-item",
  menuItemActive: "esri-menu__list-item--active",
  menuItemFocus: "esri-menu__list-item--focus",
  menuList: "esri-menu__list",
  noBookmarksIcon: "esri-widget__no-bookmark-icon",
  panel: "esri-widget--panel",
  panelHeightOnly: "esri-widget--panel-height-only",
  primaryTick: "primary-tick",
  primaryTickAmPm: "primary-tick__ampm",
  primaryTickLabel: "primary-tick__label",
  rotating: "esri-rotating",
  secondaryTick: "secondary-tick",
  select: "esri-select",
  table: "esri-widget__table",
  ui: "esri-component",
  widget: "esri-widget esri-component",
  widgetButton: "esri-widget--button",
  widgetButtonActive: "esri-widget--button-active",
  widgetDisabled: "esri-widget--disabled"
};



/***/ }),

/***/ "./node_modules/@arcgis/map-components/dist/chunks/useView.js":
/*!********************************************************************!*\
  !*** ./node_modules/@arcgis/map-components/dist/chunks/useView.js ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   V: () => (/* binding */ v),
/* harmony export */   a: () => (/* binding */ _),
/* harmony export */   u: () => (/* binding */ E)
/* harmony export */ });
/* harmony import */ var _arcgis_components_controllers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @arcgis/components-controllers */ "./node_modules/@arcgis/components-controllers/dist/index.js");
/* harmony import */ var _runtime_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./runtime.js */ "./node_modules/@arcgis/map-components/dist/chunks/runtime.js");
/* harmony import */ var _arcgis_core_applications_Components_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @arcgis/core/applications/Components/reactiveUtils.js */ "@arcgis/core/applications/Components/reactiveUtils.js");
/* harmony import */ var _arcgis_core_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @arcgis/core/core/reactiveUtils.js */ "@arcgis/core/core/reactiveUtils.js");
/* harmony import */ var _component_utils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./component-utils.js */ "./node_modules/@arcgis/map-components/dist/chunks/component-utils.js");





/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.32/esri/copyright.txt for details.
v4.32.1 */
const E = (0,_arcgis_components_controllers__WEBPACK_IMPORTED_MODULE_0__.makeT9nController)(_runtime_js__WEBPACK_IMPORTED_MODULE_1__.g), _ = (s) => u(s);
class v extends _arcgis_components_controllers__WEBPACK_IMPORTED_MODULE_0__.GenericController {
  constructor(e) {
    super(e), this._view$ = (0,_arcgis_core_applications_Components_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_2__.signal)(void 0), this._viewDestroyHandle = void 0, this._arcgisReadyEmitted = !1;
    const { el: t } = e, r = t.view;
    this.setProvisionalExports(void 0), Object.defineProperty(t, "view", {
      get: () => this._view$.value,
      set: (o) => {
        if (this.exports === o)
          return;
        const c = t.view;
        this._view$.value = o, this.exports = o, this.component.requestUpdate("view", c), !this._arcgisReadyEmitted && o != null && (this._arcgisReadyEmitted = !0, this.component.arcgisReady.emit());
      },
      configurable: !0,
      enumerable: !0
    }), e !== t && Object.defineProperty(e, "view", {
      get: () => t.view,
      set: (o) => {
        t.view = o;
      }
    }), queueMicrotask(() => {
      r && (t.view = r);
    });
  }
  hostConnected() {
    this._viewDestroyHandle ??= _arcgis_core_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_3__.when(
      () => this._view$.value?.destroyed,
      () => void this.component.destroy?.().catch(console.error),
      { sync: !0 }
    ), this.component.manager.loadedCalled && (0,_component_utils_js__WEBPACK_IMPORTED_MODULE_4__.a)(this.component);
  }
  hostLoad() {
    this.component.manager.destroyed || this._watchMetaProperties();
  }
  hostLoaded() {
    const { el: e } = this.component, t = e.shadowRoot?.firstElementChild ?? e.firstElementChild ?? void 0;
    e.childElem = t ?? e.childElem, e.isConnected && (0,_component_utils_js__WEBPACK_IMPORTED_MODULE_4__.a)(this.component);
  }
  hostDisconnected() {
    typeof this.component.el.childElem == "object" && this._view$.value?.ui?.remove(this.component.el.childElem);
  }
  hostDestroy() {
    this._viewDestroyHandle?.remove();
  }
  _watchMetaProperties() {
    (0,_arcgis_components_controllers__WEBPACK_IMPORTED_MODULE_0__.watch)(this.component, "position", (e) => {
      this.component.el.childElem != null && typeof e == "string" && (0,_component_utils_js__WEBPACK_IMPORTED_MODULE_4__.a)(this.component);
    }), (0,_arcgis_components_controllers__WEBPACK_IMPORTED_MODULE_0__.watch)(this.component, "referenceElement", () => (0,_component_utils_js__WEBPACK_IMPORTED_MODULE_4__.a)(this.component));
  }
}
const u = (0,_arcgis_components_controllers__WEBPACK_IMPORTED_MODULE_0__.proxyExports)(v);



/***/ }),

/***/ "./node_modules/@arcgis/map-components/dist/chunks/useViewModel.js":
/*!*************************************************************************!*\
  !*** ./node_modules/@arcgis/map-components/dist/chunks/useViewModel.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   m: () => (/* binding */ m)
/* harmony export */ });
/* harmony import */ var _arcgis_components_controllers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @arcgis/components-controllers */ "./node_modules/@arcgis/components-controllers/dist/index.js");
/* harmony import */ var _arcgis_components_controllers_accessor__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @arcgis/components-controllers/accessor */ "./node_modules/@arcgis/components-controllers/dist/accessor/index.js");
/* harmony import */ var _useView_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./useView.js */ "./node_modules/@arcgis/map-components/dist/chunks/useView.js");



/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.32/esri/copyright.txt for details.
v4.32.1 */
const m = (o, t) => (e, s) => l(e, o, s);
class a extends _arcgis_components_controllers_accessor__WEBPACK_IMPORTED_MODULE_1__.AccessorController {
  constructor() {
    super(...arguments), this.viewController = new _useView_js__WEBPACK_IMPORTED_MODULE_2__.V(this.component), this._viewWatchHandle = void 0;
  }
  async hostLoad() {
    await super.hostLoad(), this._viewWatchHandle = this.reactiveUtils.watch(
      () => this.component.el.view,
      (t) => {
        this._instance.view = t, this._instance.map = t?.map;
      },
      { sync: !0, initial: !0 }
    );
  }
  hostDestroy() {
    this._viewWatchHandle?.remove(), super.hostDestroy();
  }
}
const l = (0,_arcgis_components_controllers__WEBPACK_IMPORTED_MODULE_0__.proxyExports)(a);



/***/ }),

/***/ "./node_modules/@arcgis/map-components/dist/components/arcgis-scale-bar/customElement.js":
/*!***********************************************************************************************!*\
  !*** ./node_modules/@arcgis/map-components/dist/components/arcgis-scale-bar/customElement.js ***!
  \***********************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ArcgisScaleBar: () => (/* binding */ k)
/* harmony export */ });
/* harmony import */ var _chunks_runtime_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../chunks/runtime.js */ "./node_modules/@arcgis/map-components/dist/chunks/runtime.js");
/* harmony import */ var lit_html_directives_ref_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit-html/directives/ref.js */ "./node_modules/lit-html/development/directives/ref.js");
/* harmony import */ var lit_html__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! lit-html */ "./node_modules/lit-html/development/lit-html.js");
/* harmony import */ var _arcgis_components_utils__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @arcgis/components-utils */ "./node_modules/@arcgis/components-utils/dist/index.js");
/* harmony import */ var _arcgis_core_applications_Components_getDefaultUnits_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @arcgis/core/applications/Components/getDefaultUnits.js */ "@arcgis/core/applications/Components/getDefaultUnits.js");
/* harmony import */ var _arcgis_core_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @arcgis/core/core/reactiveUtils.js */ "@arcgis/core/core/reactiveUtils.js");
/* harmony import */ var _arcgis_core_intl_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @arcgis/core/intl.js */ "@arcgis/core/intl.js");
/* harmony import */ var _arcgis_core_widgets_ScaleBar_ScaleBarViewModel_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @arcgis/core/widgets/ScaleBar/ScaleBarViewModel.js */ "@arcgis/core/widgets/ScaleBar/ScaleBarViewModel.js");
/* harmony import */ var _arcgis_lumina__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @arcgis/lumina */ "./node_modules/@arcgis/lumina/dist/index.js");
/* harmony import */ var _chunks_useView_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../chunks/useView.js */ "./node_modules/@arcgis/map-components/dist/chunks/useView.js");
/* harmony import */ var _chunks_useViewModel_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../chunks/useViewModel.js */ "./node_modules/@arcgis/map-components/dist/chunks/useViewModel.js");
/* harmony import */ var _chunks_globalCss_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../chunks/globalCss.js */ "./node_modules/@arcgis/map-components/dist/chunks/globalCss.js");












/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.32/esri/copyright.txt for details.
v4.32.1 */
function $(f = 0, e = 0) {
  return { x: f, y: e };
}
const r = "esri-scale-bar", t = {
  base: r,
  labelContainer: `${r}__label-container`,
  rulerLabelContainer: `${r}__label-container--ruler`,
  lineLabelContainer: `${r}__label-container--line`,
  topLabelContainer: `${r}__label-container--top`,
  bottomLabelContainer: `${r}__label-container--bottom`,
  label: `${r}__label`,
  line: `${r}__line`,
  topLine: `${r}__line--top`,
  bottomLine: `${r}__line--bottom`,
  ruler: `${r}__ruler`,
  rulerBlock: `${r}__ruler-block`,
  barContainer: `${r}__bar-container`,
  rulerBarContainer: `${r}__bar-container--ruler`,
  lineBarContainer: `${r}__bar-container--line`
}, U = (0,_chunks_useViewModel_js__WEBPACK_IMPORTED_MODULE_9__.m)(_arcgis_core_widgets_ScaleBar_ScaleBarViewModel_js__WEBPACK_IMPORTED_MODULE_6__["default"]);
class k extends _arcgis_lumina__WEBPACK_IMPORTED_MODULE_7__.LitElement {
  constructor() {
    super(...arguments), this._defaultUnit = "metric", this.messages = (0,_chunks_useView_js__WEBPACK_IMPORTED_MODULE_8__.u)(), this._scaleComputedFrom = $(), this.viewModel = U(this), this.autoDestroyDisabled = !1, this.barStyle = "line", this.icon = "actual-size", this.position = "top-left", this.arcgisReady = (0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_7__.createEvent)();
  }
  static {
    this.properties = { autoDestroyDisabled: 5, barStyle: 1, icon: 3, label: 1, messageOverrides: 0, position: 3, referenceElement: 1, unit: 1 };
  }
  static {
    this.shadowRootOptions = _arcgis_lumina__WEBPACK_IMPORTED_MODULE_7__.noShadowRoot;
  }
  /**
   * Units to use for the scale bar.
   * When using `dual`, the scale bar displays both metric and imperial units.
   * When metric, distances will be shown in either kilometers, meters, centimeters, or millimeters depending on the scale. Similarly, imperial
   * units will be shown in either miles, feet, or inches.
   */
  get unit() {
    return this._unit ?? this._defaultUnit;
  }
  set unit(e) {
    this._unit = e;
  }
  // #endregion
  // #region Public Methods
  /** Permanently destroy the component */
  async destroy() {
    await this.manager.destroy();
  }
  // #endregion
  // #region Lifecycle
  updated() {
    this._handleRootCreateOrUpdate();
  }
  loaded() {
    this.manager.onLifecycle(() => (0,_arcgis_core_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_4__.watch)(() => {
      const e = this.viewModel.view;
      return {
        defaultUnit: e ? (0,_arcgis_core_applications_Components_getDefaultUnits_js__WEBPACK_IMPORTED_MODULE_3__.getDefaultUnitForView)(e) : void 0,
        stationary: e?.stationary,
        center: e?.center,
        scale: e?.scale,
        zoom: e?.zoom
      };
    }, ({ defaultUnit: e, stationary: i }) => {
      this._defaultUnit = e ?? "metric", i && this.requestUpdate();
    }));
  }
  // #endregion
  // #region Private Methods
  _handleContainerRef(e) {
    e !== void 0 && this._handleRootCreateOrUpdate();
  }
  _handleRootCreateOrUpdate() {
    if (!this.viewModel)
      return;
    const e = this._scaleComputedFrom, i = this.el.getBoundingClientRect(), s = i.left + window.pageXOffset, l = i.top + window.pageYOffset, n = $(s, l);
    (n.x !== e.x || n.y !== e.y) && (this._scaleComputedFrom = n);
  }
  _formatDistance(e, i) {
    return (0,_arcgis_core_intl_js__WEBPACK_IMPORTED_MODULE_5__.formatNumber)(e, {
      style: "unit",
      unit: i,
      unitDisplay: "short"
    });
  }
  // #endregion
  // #region Rendering
  render() {
    const e = this.viewModel.state === "disabled", i = {
      [_chunks_globalCss_js__WEBPACK_IMPORTED_MODULE_10__.g.disabled]: e
    };
    let s, l;
    if (!e) {
      const { unit: n, barStyle: c } = this, p = n === "imperial" || n === "dual", b = n === "metric" || n === "dual", m = 100, h = n === "dual" ? "line" : c;
      if (p) {
        const o = this.viewModel.getScaleBarProperties(m, "imperial");
        o && (l = h === "ruler" ? this._renderRuler(o) : this._renderLine(o, "bottom"));
      }
      if (b) {
        const o = this.viewModel.getScaleBarProperties(m, "metric");
        o && (s = h === "ruler" ? this._renderRuler(o) : this._renderLine(o, "top"));
      }
    }
    return (0,lit_html__WEBPACK_IMPORTED_MODULE_2__.html)`<div class=${(0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_7__.safeClassMap)((0,_arcgis_components_utils__WEBPACK_IMPORTED_MODULE_11__.classes)(t.base, _chunks_globalCss_js__WEBPACK_IMPORTED_MODULE_10__.g.widget, i))} ${(0,lit_html_directives_ref_js__WEBPACK_IMPORTED_MODULE_1__.ref)(this._handleContainerRef)}>${s}${l}</div>`;
  }
  _renderRuler(e) {
    const { length: i, unit: s, value: l } = e, n = Math.round(i), c = this._formatDistance(l, s);
    return (0,lit_html__WEBPACK_IMPORTED_MODULE_2__.html)`<div class=${(0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_7__.safeClassMap)((0,_arcgis_components_utils__WEBPACK_IMPORTED_MODULE_11__.classes)(t.barContainer, t.rulerBarContainer))}><div class=${(0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_7__.safeClassMap)(t.ruler)} style=${(0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_7__.safeStyleMap)({ width: `${n}px` })}><div class=${(0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_7__.safeClassMap)(t.rulerBlock)}></div><div class=${(0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_7__.safeClassMap)(t.rulerBlock)}></div><div class=${(0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_7__.safeClassMap)(t.rulerBlock)}></div><div class=${(0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_7__.safeClassMap)(t.rulerBlock)}></div></div><div class=${(0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_7__.safeClassMap)((0,_arcgis_components_utils__WEBPACK_IMPORTED_MODULE_11__.classes)(t.labelContainer, t.rulerLabelContainer))}><div class=${(0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_7__.safeClassMap)(t.label)}>0</div><div class=${(0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_7__.safeClassMap)(t.label)}>${c}</div></div></div>`;
  }
  _renderLine(e, i) {
    const { length: s, unit: l, value: n } = e, c = Math.round(s), p = this._formatDistance(n, l), b = {
      [t.topLabelContainer]: i === "top",
      [t.bottomLabelContainer]: i === "bottom"
    }, m = (0,lit_html__WEBPACK_IMPORTED_MODULE_2__.html)`<div class=${(0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_7__.safeClassMap)((0,_arcgis_components_utils__WEBPACK_IMPORTED_MODULE_11__.classes)(t.labelContainer, t.lineLabelContainer, b))}><div class=${(0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_7__.safeClassMap)(t.label)}>${p}</div></div>`, h = {
      [t.topLine]: i === "top",
      [t.bottomLine]: i === "bottom"
    }, o = (0,lit_html__WEBPACK_IMPORTED_MODULE_2__.html)`<div class=${(0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_7__.safeClassMap)((0,_arcgis_components_utils__WEBPACK_IMPORTED_MODULE_11__.classes)(t.line, h))} style=${(0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_7__.safeStyleMap)({ width: `${c}px` })}></div>`;
    return (0,lit_html__WEBPACK_IMPORTED_MODULE_2__.html)`<div class=${(0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_7__.safeClassMap)((0,_arcgis_components_utils__WEBPACK_IMPORTED_MODULE_11__.classes)(t.barContainer, t.lineBarContainer))}>${[o, m]}</div>`;
  }
}
(0,_chunks_runtime_js__WEBPACK_IMPORTED_MODULE_0__.c)("arcgis-scale-bar", k);



/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2lkZ2V0cy9jaHVua3MvdmVuZG9ycy1ub2RlX21vZHVsZXNfYXJjZ2lzX21hcC1jb21wb25lbnRzX2Rpc3RfY29tcG9uZW50c19hcmNnaXMtc2NhbGUtYmFyX2N1c3RvbUVsZW1lbnRfanMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0U7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNoRDZIO0FBQ3pGO0FBQzhDO0FBQzVCO0FBQ1Y7QUFDOUM7QUFDQTtBQUNBO0FBQ0EsVUFBVSxpRkFBQyxDQUFDLDBDQUFDO0FBQ2IsZ0JBQWdCLDZFQUFDO0FBQ2pCO0FBQ0EsNEJBQTRCLDZGQUFDO0FBQzdCLFlBQVksUUFBUTtBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxnQ0FBZ0Msb0VBQU07QUFDdEM7QUFDQTtBQUNBLFFBQVE7QUFDUiw4Q0FBOEMsc0RBQUM7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksUUFBUTtBQUNwQixxREFBcUQsc0RBQUM7QUFDdEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUkscUVBQUM7QUFDTCxxRUFBcUUsc0RBQUM7QUFDdEUsS0FBSyxHQUFHLHFFQUFDLDJDQUEyQyxzREFBQztBQUNyRDtB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Yyw0REFBQyxDQUFDLGtFQUFDLHNDQUFzQyxHQUFHLE9BQU87QUFDN0U7QUFDQTtBQUNBLHFEQUFDO0FBR0MiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vbm9kZV9tb2R1bGVzL0BhcmNnaXMvbWFwLWNvbXBvbmVudHMvZGlzdC9jaHVua3MvZ2xvYmFsQ3NzLmpzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9tYXAtY29tcG9uZW50cy9kaXN0L2NodW5rcy91c2VWaWV3LmpzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9tYXAtY29tcG9uZW50cy9kaXN0L2NodW5rcy91c2VWaWV3TW9kZWwuanMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL21hcC1jb21wb25lbnRzL2Rpc3QvY29tcG9uZW50cy9hcmNnaXMtc2NhbGUtYmFyL2N1c3RvbUVsZW1lbnQuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyohIEFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRXNyaSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMzIvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxudjQuMzIuMSAqL1xuY29uc3QgZSA9IHtcbiAgYW5jaG9yOiBcImVzcmktd2lkZ2V0X19hbmNob3JcIixcbiAgYW5jaG9yRGlzYWJsZWQ6IFwiZXNyaS13aWRnZXRfX2FuY2hvci0tZGlzYWJsZWRcIixcbiAgYnV0dG9uOiBcImVzcmktYnV0dG9uXCIsXG4gIGJ1dHRvbkRpc2FibGVkOiBcImVzcmktYnV0dG9uLS1kaXNhYmxlZFwiLFxuICBidXR0b25IYWxmOiBcImVzcmktYnV0dG9uLS1oYWxmXCIsXG4gIGJ1dHRvblNlY29uZGFyeTogXCJlc3JpLWJ1dHRvbi0tc2Vjb25kYXJ5XCIsXG4gIGJ1dHRvblNtYWxsOiBcImVzcmktYnV0dG9uLS1zbWFsbFwiLFxuICBidXR0b25UZXJ0aWFyeTogXCJlc3JpLWJ1dHRvbi0tdGVydGlhcnlcIixcbiAgYnV0dG9uVGhpcmQ6IFwiZXNyaS1idXR0b24tLXRoaXJkXCIsXG4gIGRpc2FibGVkOiBcImVzcmktZGlzYWJsZWRcIixcbiAgZGlzYWJsZWRFbGVtZW50OiBcImVzcmktZGlzYWJsZWQtZWxlbWVudFwiLFxuICBlbXB0eTogXCJlc3JpLXdpZGdldF9fY29udGVudC0tZW1wdHlcIixcbiAgZW1wdHlJbGx1c3RyYXRpb246IFwiZXNyaS13aWRnZXRfX2NvbnRlbnQtaWxsdXN0cmF0aW9uLS1lbXB0eVwiLFxuICBoZWFkaW5nOiBcImVzcmktd2lkZ2V0X19oZWFkaW5nXCIsXG4gIGhpZGRlbjogXCJlc3JpLWhpZGRlblwiLFxuICBpbnB1dDogXCJlc3JpLWlucHV0XCIsXG4gIGludGVyYWN0aXZlOiBcImVzcmktaW50ZXJhY3RpdmVcIixcbiAgbG9hZGVyOiBcImVzcmktd2lkZ2V0X19sb2FkZXJcIixcbiAgbG9hZGVyQW5pbWF0aW9uOiBcImVzcmktd2lkZ2V0X19sb2FkZXItYW5pbWF0aW9uXCIsXG4gIGxvYWRlclRleHQ6IFwiZXNyaS13aWRnZXRfX2xvYWRlci10ZXh0XCIsXG4gIG1lbnU6IFwiZXNyaS1tZW51XCIsXG4gIG1lbnVIZWFkZXI6IFwiZXNyaS1tZW51X19oZWFkZXJcIixcbiAgbWVudUl0ZW06IFwiZXNyaS1tZW51X19saXN0LWl0ZW1cIixcbiAgbWVudUl0ZW1BY3RpdmU6IFwiZXNyaS1tZW51X19saXN0LWl0ZW0tLWFjdGl2ZVwiLFxuICBtZW51SXRlbUZvY3VzOiBcImVzcmktbWVudV9fbGlzdC1pdGVtLS1mb2N1c1wiLFxuICBtZW51TGlzdDogXCJlc3JpLW1lbnVfX2xpc3RcIixcbiAgbm9Cb29rbWFya3NJY29uOiBcImVzcmktd2lkZ2V0X19uby1ib29rbWFyay1pY29uXCIsXG4gIHBhbmVsOiBcImVzcmktd2lkZ2V0LS1wYW5lbFwiLFxuICBwYW5lbEhlaWdodE9ubHk6IFwiZXNyaS13aWRnZXQtLXBhbmVsLWhlaWdodC1vbmx5XCIsXG4gIHByaW1hcnlUaWNrOiBcInByaW1hcnktdGlja1wiLFxuICBwcmltYXJ5VGlja0FtUG06IFwicHJpbWFyeS10aWNrX19hbXBtXCIsXG4gIHByaW1hcnlUaWNrTGFiZWw6IFwicHJpbWFyeS10aWNrX19sYWJlbFwiLFxuICByb3RhdGluZzogXCJlc3JpLXJvdGF0aW5nXCIsXG4gIHNlY29uZGFyeVRpY2s6IFwic2Vjb25kYXJ5LXRpY2tcIixcbiAgc2VsZWN0OiBcImVzcmktc2VsZWN0XCIsXG4gIHRhYmxlOiBcImVzcmktd2lkZ2V0X190YWJsZVwiLFxuICB1aTogXCJlc3JpLWNvbXBvbmVudFwiLFxuICB3aWRnZXQ6IFwiZXNyaS13aWRnZXQgZXNyaS1jb21wb25lbnRcIixcbiAgd2lkZ2V0QnV0dG9uOiBcImVzcmktd2lkZ2V0LS1idXR0b25cIixcbiAgd2lkZ2V0QnV0dG9uQWN0aXZlOiBcImVzcmktd2lkZ2V0LS1idXR0b24tYWN0aXZlXCIsXG4gIHdpZGdldERpc2FibGVkOiBcImVzcmktd2lkZ2V0LS1kaXNhYmxlZFwiXG59O1xuZXhwb3J0IHtcbiAgZSBhcyBnXG59O1xuIiwiaW1wb3J0IHsgbWFrZVQ5bkNvbnRyb2xsZXIgYXMgYSwgcHJveHlFeHBvcnRzIGFzIGgsIEdlbmVyaWNDb250cm9sbGVyIGFzIGwsIHdhdGNoIGFzIG4gfSBmcm9tIFwiQGFyY2dpcy9jb21wb25lbnRzLWNvbnRyb2xsZXJzXCI7XG5pbXBvcnQgeyBnIGFzIGQgfSBmcm9tIFwiLi9ydW50aW1lLmpzXCI7XG5pbXBvcnQgeyBzaWduYWwgYXMgbSB9IGZyb20gXCJAYXJjZ2lzL2NvcmUvYXBwbGljYXRpb25zL0NvbXBvbmVudHMvcmVhY3RpdmVVdGlscy5qc1wiO1xuaW1wb3J0ICogYXMgcCBmcm9tIFwiQGFyY2dpcy9jb3JlL2NvcmUvcmVhY3RpdmVVdGlscy5qc1wiO1xuaW1wb3J0IHsgYSBhcyBpIH0gZnJvbSBcIi4vY29tcG9uZW50LXV0aWxzLmpzXCI7XG4vKiEgQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFc3JpLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4zMi9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG52NC4zMi4xICovXG5jb25zdCBFID0gYShkKSwgXyA9IChzKSA9PiB1KHMpO1xuY2xhc3MgdiBleHRlbmRzIGwge1xuICBjb25zdHJ1Y3RvcihlKSB7XG4gICAgc3VwZXIoZSksIHRoaXMuX3ZpZXckID0gbSh2b2lkIDApLCB0aGlzLl92aWV3RGVzdHJveUhhbmRsZSA9IHZvaWQgMCwgdGhpcy5fYXJjZ2lzUmVhZHlFbWl0dGVkID0gITE7XG4gICAgY29uc3QgeyBlbDogdCB9ID0gZSwgciA9IHQudmlldztcbiAgICB0aGlzLnNldFByb3Zpc2lvbmFsRXhwb3J0cyh2b2lkIDApLCBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgXCJ2aWV3XCIsIHtcbiAgICAgIGdldDogKCkgPT4gdGhpcy5fdmlldyQudmFsdWUsXG4gICAgICBzZXQ6IChvKSA9PiB7XG4gICAgICAgIGlmICh0aGlzLmV4cG9ydHMgPT09IG8pXG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICBjb25zdCBjID0gdC52aWV3O1xuICAgICAgICB0aGlzLl92aWV3JC52YWx1ZSA9IG8sIHRoaXMuZXhwb3J0cyA9IG8sIHRoaXMuY29tcG9uZW50LnJlcXVlc3RVcGRhdGUoXCJ2aWV3XCIsIGMpLCAhdGhpcy5fYXJjZ2lzUmVhZHlFbWl0dGVkICYmIG8gIT0gbnVsbCAmJiAodGhpcy5fYXJjZ2lzUmVhZHlFbWl0dGVkID0gITAsIHRoaXMuY29tcG9uZW50LmFyY2dpc1JlYWR5LmVtaXQoKSk7XG4gICAgICB9LFxuICAgICAgY29uZmlndXJhYmxlOiAhMCxcbiAgICAgIGVudW1lcmFibGU6ICEwXG4gICAgfSksIGUgIT09IHQgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIFwidmlld1wiLCB7XG4gICAgICBnZXQ6ICgpID0+IHQudmlldyxcbiAgICAgIHNldDogKG8pID0+IHtcbiAgICAgICAgdC52aWV3ID0gbztcbiAgICAgIH1cbiAgICB9KSwgcXVldWVNaWNyb3Rhc2soKCkgPT4ge1xuICAgICAgciAmJiAodC52aWV3ID0gcik7XG4gICAgfSk7XG4gIH1cbiAgaG9zdENvbm5lY3RlZCgpIHtcbiAgICB0aGlzLl92aWV3RGVzdHJveUhhbmRsZSA/Pz0gcC53aGVuKFxuICAgICAgKCkgPT4gdGhpcy5fdmlldyQudmFsdWU/LmRlc3Ryb3llZCxcbiAgICAgICgpID0+IHZvaWQgdGhpcy5jb21wb25lbnQuZGVzdHJveT8uKCkuY2F0Y2goY29uc29sZS5lcnJvciksXG4gICAgICB7IHN5bmM6ICEwIH1cbiAgICApLCB0aGlzLmNvbXBvbmVudC5tYW5hZ2VyLmxvYWRlZENhbGxlZCAmJiBpKHRoaXMuY29tcG9uZW50KTtcbiAgfVxuICBob3N0TG9hZCgpIHtcbiAgICB0aGlzLmNvbXBvbmVudC5tYW5hZ2VyLmRlc3Ryb3llZCB8fCB0aGlzLl93YXRjaE1ldGFQcm9wZXJ0aWVzKCk7XG4gIH1cbiAgaG9zdExvYWRlZCgpIHtcbiAgICBjb25zdCB7IGVsOiBlIH0gPSB0aGlzLmNvbXBvbmVudCwgdCA9IGUuc2hhZG93Um9vdD8uZmlyc3RFbGVtZW50Q2hpbGQgPz8gZS5maXJzdEVsZW1lbnRDaGlsZCA/PyB2b2lkIDA7XG4gICAgZS5jaGlsZEVsZW0gPSB0ID8/IGUuY2hpbGRFbGVtLCBlLmlzQ29ubmVjdGVkICYmIGkodGhpcy5jb21wb25lbnQpO1xuICB9XG4gIGhvc3REaXNjb25uZWN0ZWQoKSB7XG4gICAgdHlwZW9mIHRoaXMuY29tcG9uZW50LmVsLmNoaWxkRWxlbSA9PSBcIm9iamVjdFwiICYmIHRoaXMuX3ZpZXckLnZhbHVlPy51aT8ucmVtb3ZlKHRoaXMuY29tcG9uZW50LmVsLmNoaWxkRWxlbSk7XG4gIH1cbiAgaG9zdERlc3Ryb3koKSB7XG4gICAgdGhpcy5fdmlld0Rlc3Ryb3lIYW5kbGU/LnJlbW92ZSgpO1xuICB9XG4gIF93YXRjaE1ldGFQcm9wZXJ0aWVzKCkge1xuICAgIG4odGhpcy5jb21wb25lbnQsIFwicG9zaXRpb25cIiwgKGUpID0+IHtcbiAgICAgIHRoaXMuY29tcG9uZW50LmVsLmNoaWxkRWxlbSAhPSBudWxsICYmIHR5cGVvZiBlID09IFwic3RyaW5nXCIgJiYgaSh0aGlzLmNvbXBvbmVudCk7XG4gICAgfSksIG4odGhpcy5jb21wb25lbnQsIFwicmVmZXJlbmNlRWxlbWVudFwiLCAoKSA9PiBpKHRoaXMuY29tcG9uZW50KSk7XG4gIH1cbn1cbmNvbnN0IHUgPSBoKHYpO1xuZXhwb3J0IHtcbiAgdiBhcyBWLFxuICBfIGFzIGEsXG4gIEUgYXMgdVxufTtcbiIsImltcG9ydCB7IHByb3h5RXhwb3J0cyBhcyByIH0gZnJvbSBcIkBhcmNnaXMvY29tcG9uZW50cy1jb250cm9sbGVyc1wiO1xuaW1wb3J0IHsgQWNjZXNzb3JDb250cm9sbGVyIGFzIGkgfSBmcm9tIFwiQGFyY2dpcy9jb21wb25lbnRzLWNvbnRyb2xsZXJzL2FjY2Vzc29yXCI7XG5pbXBvcnQgeyBWIGFzIG4gfSBmcm9tIFwiLi91c2VWaWV3LmpzXCI7XG4vKiEgQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFc3JpLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4zMi9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG52NC4zMi4xICovXG5jb25zdCBtID0gKG8sIHQpID0+IChlLCBzKSA9PiBsKGUsIG8sIHMpO1xuY2xhc3MgYSBleHRlbmRzIGkge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlciguLi5hcmd1bWVudHMpLCB0aGlzLnZpZXdDb250cm9sbGVyID0gbmV3IG4odGhpcy5jb21wb25lbnQpLCB0aGlzLl92aWV3V2F0Y2hIYW5kbGUgPSB2b2lkIDA7XG4gIH1cbiAgYXN5bmMgaG9zdExvYWQoKSB7XG4gICAgYXdhaXQgc3VwZXIuaG9zdExvYWQoKSwgdGhpcy5fdmlld1dhdGNoSGFuZGxlID0gdGhpcy5yZWFjdGl2ZVV0aWxzLndhdGNoKFxuICAgICAgKCkgPT4gdGhpcy5jb21wb25lbnQuZWwudmlldyxcbiAgICAgICh0KSA9PiB7XG4gICAgICAgIHRoaXMuX2luc3RhbmNlLnZpZXcgPSB0LCB0aGlzLl9pbnN0YW5jZS5tYXAgPSB0Py5tYXA7XG4gICAgICB9LFxuICAgICAgeyBzeW5jOiAhMCwgaW5pdGlhbDogITAgfVxuICAgICk7XG4gIH1cbiAgaG9zdERlc3Ryb3koKSB7XG4gICAgdGhpcy5fdmlld1dhdGNoSGFuZGxlPy5yZW1vdmUoKSwgc3VwZXIuaG9zdERlc3Ryb3koKTtcbiAgfVxufVxuY29uc3QgbCA9IHIoYSk7XG5leHBvcnQge1xuICBtXG59O1xuIiwiaW1wb3J0IHsgYyBhcyBDIH0gZnJvbSBcIi4uLy4uL2NodW5rcy9ydW50aW1lLmpzXCI7XG5pbXBvcnQgeyByZWYgYXMgZyB9IGZyb20gXCJsaXQtaHRtbC9kaXJlY3RpdmVzL3JlZi5qc1wiO1xuaW1wb3J0IHsgaHRtbCBhcyB1IH0gZnJvbSBcImxpdC1odG1sXCI7XG5pbXBvcnQgeyBjbGFzc2VzIGFzIGQgfSBmcm9tIFwiQGFyY2dpcy9jb21wb25lbnRzLXV0aWxzXCI7XG5pbXBvcnQgeyBnZXREZWZhdWx0VW5pdEZvclZpZXcgYXMgdyB9IGZyb20gXCJAYXJjZ2lzL2NvcmUvYXBwbGljYXRpb25zL0NvbXBvbmVudHMvZ2V0RGVmYXVsdFVuaXRzLmpzXCI7XG5pbXBvcnQgeyB3YXRjaCBhcyB5IH0gZnJvbSBcIkBhcmNnaXMvY29yZS9jb3JlL3JlYWN0aXZlVXRpbHMuanNcIjtcbmltcG9ydCB7IGZvcm1hdE51bWJlciBhcyBTIH0gZnJvbSBcIkBhcmNnaXMvY29yZS9pbnRsLmpzXCI7XG5pbXBvcnQgTCBmcm9tIFwiQGFyY2dpcy9jb3JlL3dpZGdldHMvU2NhbGVCYXIvU2NhbGVCYXJWaWV3TW9kZWwuanNcIjtcbmltcG9ydCB7IExpdEVsZW1lbnQgYXMgQiwgY3JlYXRlRXZlbnQgYXMgTSwgbm9TaGFkb3dSb290IGFzIFIsIHNhZmVDbGFzc01hcCBhcyBhLCBzYWZlU3R5bGVNYXAgYXMgXyB9IGZyb20gXCJAYXJjZ2lzL2x1bWluYVwiO1xuaW1wb3J0IHsgdSBhcyB4IH0gZnJvbSBcIi4uLy4uL2NodW5rcy91c2VWaWV3LmpzXCI7XG5pbXBvcnQgeyBtIGFzIEQgfSBmcm9tIFwiLi4vLi4vY2h1bmtzL3VzZVZpZXdNb2RlbC5qc1wiO1xuaW1wb3J0IHsgZyBhcyB2IH0gZnJvbSBcIi4uLy4uL2NodW5rcy9nbG9iYWxDc3MuanNcIjtcbi8qISBBbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVzcmksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjMyL2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbnY0LjMyLjEgKi9cbmZ1bmN0aW9uICQoZiA9IDAsIGUgPSAwKSB7XG4gIHJldHVybiB7IHg6IGYsIHk6IGUgfTtcbn1cbmNvbnN0IHIgPSBcImVzcmktc2NhbGUtYmFyXCIsIHQgPSB7XG4gIGJhc2U6IHIsXG4gIGxhYmVsQ29udGFpbmVyOiBgJHtyfV9fbGFiZWwtY29udGFpbmVyYCxcbiAgcnVsZXJMYWJlbENvbnRhaW5lcjogYCR7cn1fX2xhYmVsLWNvbnRhaW5lci0tcnVsZXJgLFxuICBsaW5lTGFiZWxDb250YWluZXI6IGAke3J9X19sYWJlbC1jb250YWluZXItLWxpbmVgLFxuICB0b3BMYWJlbENvbnRhaW5lcjogYCR7cn1fX2xhYmVsLWNvbnRhaW5lci0tdG9wYCxcbiAgYm90dG9tTGFiZWxDb250YWluZXI6IGAke3J9X19sYWJlbC1jb250YWluZXItLWJvdHRvbWAsXG4gIGxhYmVsOiBgJHtyfV9fbGFiZWxgLFxuICBsaW5lOiBgJHtyfV9fbGluZWAsXG4gIHRvcExpbmU6IGAke3J9X19saW5lLS10b3BgLFxuICBib3R0b21MaW5lOiBgJHtyfV9fbGluZS0tYm90dG9tYCxcbiAgcnVsZXI6IGAke3J9X19ydWxlcmAsXG4gIHJ1bGVyQmxvY2s6IGAke3J9X19ydWxlci1ibG9ja2AsXG4gIGJhckNvbnRhaW5lcjogYCR7cn1fX2Jhci1jb250YWluZXJgLFxuICBydWxlckJhckNvbnRhaW5lcjogYCR7cn1fX2Jhci1jb250YWluZXItLXJ1bGVyYCxcbiAgbGluZUJhckNvbnRhaW5lcjogYCR7cn1fX2Jhci1jb250YWluZXItLWxpbmVgXG59LCBVID0gRChMKTtcbmNsYXNzIGsgZXh0ZW5kcyBCIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoLi4uYXJndW1lbnRzKSwgdGhpcy5fZGVmYXVsdFVuaXQgPSBcIm1ldHJpY1wiLCB0aGlzLm1lc3NhZ2VzID0geCgpLCB0aGlzLl9zY2FsZUNvbXB1dGVkRnJvbSA9ICQoKSwgdGhpcy52aWV3TW9kZWwgPSBVKHRoaXMpLCB0aGlzLmF1dG9EZXN0cm95RGlzYWJsZWQgPSAhMSwgdGhpcy5iYXJTdHlsZSA9IFwibGluZVwiLCB0aGlzLmljb24gPSBcImFjdHVhbC1zaXplXCIsIHRoaXMucG9zaXRpb24gPSBcInRvcC1sZWZ0XCIsIHRoaXMuYXJjZ2lzUmVhZHkgPSBNKCk7XG4gIH1cbiAgc3RhdGljIHtcbiAgICB0aGlzLnByb3BlcnRpZXMgPSB7IGF1dG9EZXN0cm95RGlzYWJsZWQ6IDUsIGJhclN0eWxlOiAxLCBpY29uOiAzLCBsYWJlbDogMSwgbWVzc2FnZU92ZXJyaWRlczogMCwgcG9zaXRpb246IDMsIHJlZmVyZW5jZUVsZW1lbnQ6IDEsIHVuaXQ6IDEgfTtcbiAgfVxuICBzdGF0aWMge1xuICAgIHRoaXMuc2hhZG93Um9vdE9wdGlvbnMgPSBSO1xuICB9XG4gIC8qKlxuICAgKiBVbml0cyB0byB1c2UgZm9yIHRoZSBzY2FsZSBiYXIuXG4gICAqIFdoZW4gdXNpbmcgYGR1YWxgLCB0aGUgc2NhbGUgYmFyIGRpc3BsYXlzIGJvdGggbWV0cmljIGFuZCBpbXBlcmlhbCB1bml0cy5cbiAgICogV2hlbiBtZXRyaWMsIGRpc3RhbmNlcyB3aWxsIGJlIHNob3duIGluIGVpdGhlciBraWxvbWV0ZXJzLCBtZXRlcnMsIGNlbnRpbWV0ZXJzLCBvciBtaWxsaW1ldGVycyBkZXBlbmRpbmcgb24gdGhlIHNjYWxlLiBTaW1pbGFybHksIGltcGVyaWFsXG4gICAqIHVuaXRzIHdpbGwgYmUgc2hvd24gaW4gZWl0aGVyIG1pbGVzLCBmZWV0LCBvciBpbmNoZXMuXG4gICAqL1xuICBnZXQgdW5pdCgpIHtcbiAgICByZXR1cm4gdGhpcy5fdW5pdCA/PyB0aGlzLl9kZWZhdWx0VW5pdDtcbiAgfVxuICBzZXQgdW5pdChlKSB7XG4gICAgdGhpcy5fdW5pdCA9IGU7XG4gIH1cbiAgLy8gI2VuZHJlZ2lvblxuICAvLyAjcmVnaW9uIFB1YmxpYyBNZXRob2RzXG4gIC8qKiBQZXJtYW5lbnRseSBkZXN0cm95IHRoZSBjb21wb25lbnQgKi9cbiAgYXN5bmMgZGVzdHJveSgpIHtcbiAgICBhd2FpdCB0aGlzLm1hbmFnZXIuZGVzdHJveSgpO1xuICB9XG4gIC8vICNlbmRyZWdpb25cbiAgLy8gI3JlZ2lvbiBMaWZlY3ljbGVcbiAgdXBkYXRlZCgpIHtcbiAgICB0aGlzLl9oYW5kbGVSb290Q3JlYXRlT3JVcGRhdGUoKTtcbiAgfVxuICBsb2FkZWQoKSB7XG4gICAgdGhpcy5tYW5hZ2VyLm9uTGlmZWN5Y2xlKCgpID0+IHkoKCkgPT4ge1xuICAgICAgY29uc3QgZSA9IHRoaXMudmlld01vZGVsLnZpZXc7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBkZWZhdWx0VW5pdDogZSA/IHcoZSkgOiB2b2lkIDAsXG4gICAgICAgIHN0YXRpb25hcnk6IGU/LnN0YXRpb25hcnksXG4gICAgICAgIGNlbnRlcjogZT8uY2VudGVyLFxuICAgICAgICBzY2FsZTogZT8uc2NhbGUsXG4gICAgICAgIHpvb206IGU/Lnpvb21cbiAgICAgIH07XG4gICAgfSwgKHsgZGVmYXVsdFVuaXQ6IGUsIHN0YXRpb25hcnk6IGkgfSkgPT4ge1xuICAgICAgdGhpcy5fZGVmYXVsdFVuaXQgPSBlID8/IFwibWV0cmljXCIsIGkgJiYgdGhpcy5yZXF1ZXN0VXBkYXRlKCk7XG4gICAgfSkpO1xuICB9XG4gIC8vICNlbmRyZWdpb25cbiAgLy8gI3JlZ2lvbiBQcml2YXRlIE1ldGhvZHNcbiAgX2hhbmRsZUNvbnRhaW5lclJlZihlKSB7XG4gICAgZSAhPT0gdm9pZCAwICYmIHRoaXMuX2hhbmRsZVJvb3RDcmVhdGVPclVwZGF0ZSgpO1xuICB9XG4gIF9oYW5kbGVSb290Q3JlYXRlT3JVcGRhdGUoKSB7XG4gICAgaWYgKCF0aGlzLnZpZXdNb2RlbClcbiAgICAgIHJldHVybjtcbiAgICBjb25zdCBlID0gdGhpcy5fc2NhbGVDb21wdXRlZEZyb20sIGkgPSB0aGlzLmVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLCBzID0gaS5sZWZ0ICsgd2luZG93LnBhZ2VYT2Zmc2V0LCBsID0gaS50b3AgKyB3aW5kb3cucGFnZVlPZmZzZXQsIG4gPSAkKHMsIGwpO1xuICAgIChuLnggIT09IGUueCB8fCBuLnkgIT09IGUueSkgJiYgKHRoaXMuX3NjYWxlQ29tcHV0ZWRGcm9tID0gbik7XG4gIH1cbiAgX2Zvcm1hdERpc3RhbmNlKGUsIGkpIHtcbiAgICByZXR1cm4gUyhlLCB7XG4gICAgICBzdHlsZTogXCJ1bml0XCIsXG4gICAgICB1bml0OiBpLFxuICAgICAgdW5pdERpc3BsYXk6IFwic2hvcnRcIlxuICAgIH0pO1xuICB9XG4gIC8vICNlbmRyZWdpb25cbiAgLy8gI3JlZ2lvbiBSZW5kZXJpbmdcbiAgcmVuZGVyKCkge1xuICAgIGNvbnN0IGUgPSB0aGlzLnZpZXdNb2RlbC5zdGF0ZSA9PT0gXCJkaXNhYmxlZFwiLCBpID0ge1xuICAgICAgW3YuZGlzYWJsZWRdOiBlXG4gICAgfTtcbiAgICBsZXQgcywgbDtcbiAgICBpZiAoIWUpIHtcbiAgICAgIGNvbnN0IHsgdW5pdDogbiwgYmFyU3R5bGU6IGMgfSA9IHRoaXMsIHAgPSBuID09PSBcImltcGVyaWFsXCIgfHwgbiA9PT0gXCJkdWFsXCIsIGIgPSBuID09PSBcIm1ldHJpY1wiIHx8IG4gPT09IFwiZHVhbFwiLCBtID0gMTAwLCBoID0gbiA9PT0gXCJkdWFsXCIgPyBcImxpbmVcIiA6IGM7XG4gICAgICBpZiAocCkge1xuICAgICAgICBjb25zdCBvID0gdGhpcy52aWV3TW9kZWwuZ2V0U2NhbGVCYXJQcm9wZXJ0aWVzKG0sIFwiaW1wZXJpYWxcIik7XG4gICAgICAgIG8gJiYgKGwgPSBoID09PSBcInJ1bGVyXCIgPyB0aGlzLl9yZW5kZXJSdWxlcihvKSA6IHRoaXMuX3JlbmRlckxpbmUobywgXCJib3R0b21cIikpO1xuICAgICAgfVxuICAgICAgaWYgKGIpIHtcbiAgICAgICAgY29uc3QgbyA9IHRoaXMudmlld01vZGVsLmdldFNjYWxlQmFyUHJvcGVydGllcyhtLCBcIm1ldHJpY1wiKTtcbiAgICAgICAgbyAmJiAocyA9IGggPT09IFwicnVsZXJcIiA/IHRoaXMuX3JlbmRlclJ1bGVyKG8pIDogdGhpcy5fcmVuZGVyTGluZShvLCBcInRvcFwiKSk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB1YDxkaXYgY2xhc3M9JHthKGQodC5iYXNlLCB2LndpZGdldCwgaSkpfSAke2codGhpcy5faGFuZGxlQ29udGFpbmVyUmVmKX0+JHtzfSR7bH08L2Rpdj5gO1xuICB9XG4gIF9yZW5kZXJSdWxlcihlKSB7XG4gICAgY29uc3QgeyBsZW5ndGg6IGksIHVuaXQ6IHMsIHZhbHVlOiBsIH0gPSBlLCBuID0gTWF0aC5yb3VuZChpKSwgYyA9IHRoaXMuX2Zvcm1hdERpc3RhbmNlKGwsIHMpO1xuICAgIHJldHVybiB1YDxkaXYgY2xhc3M9JHthKGQodC5iYXJDb250YWluZXIsIHQucnVsZXJCYXJDb250YWluZXIpKX0+PGRpdiBjbGFzcz0ke2EodC5ydWxlcil9IHN0eWxlPSR7Xyh7IHdpZHRoOiBgJHtufXB4YCB9KX0+PGRpdiBjbGFzcz0ke2EodC5ydWxlckJsb2NrKX0+PC9kaXY+PGRpdiBjbGFzcz0ke2EodC5ydWxlckJsb2NrKX0+PC9kaXY+PGRpdiBjbGFzcz0ke2EodC5ydWxlckJsb2NrKX0+PC9kaXY+PGRpdiBjbGFzcz0ke2EodC5ydWxlckJsb2NrKX0+PC9kaXY+PC9kaXY+PGRpdiBjbGFzcz0ke2EoZCh0LmxhYmVsQ29udGFpbmVyLCB0LnJ1bGVyTGFiZWxDb250YWluZXIpKX0+PGRpdiBjbGFzcz0ke2EodC5sYWJlbCl9PjA8L2Rpdj48ZGl2IGNsYXNzPSR7YSh0LmxhYmVsKX0+JHtjfTwvZGl2PjwvZGl2PjwvZGl2PmA7XG4gIH1cbiAgX3JlbmRlckxpbmUoZSwgaSkge1xuICAgIGNvbnN0IHsgbGVuZ3RoOiBzLCB1bml0OiBsLCB2YWx1ZTogbiB9ID0gZSwgYyA9IE1hdGgucm91bmQocyksIHAgPSB0aGlzLl9mb3JtYXREaXN0YW5jZShuLCBsKSwgYiA9IHtcbiAgICAgIFt0LnRvcExhYmVsQ29udGFpbmVyXTogaSA9PT0gXCJ0b3BcIixcbiAgICAgIFt0LmJvdHRvbUxhYmVsQ29udGFpbmVyXTogaSA9PT0gXCJib3R0b21cIlxuICAgIH0sIG0gPSB1YDxkaXYgY2xhc3M9JHthKGQodC5sYWJlbENvbnRhaW5lciwgdC5saW5lTGFiZWxDb250YWluZXIsIGIpKX0+PGRpdiBjbGFzcz0ke2EodC5sYWJlbCl9PiR7cH08L2Rpdj48L2Rpdj5gLCBoID0ge1xuICAgICAgW3QudG9wTGluZV06IGkgPT09IFwidG9wXCIsXG4gICAgICBbdC5ib3R0b21MaW5lXTogaSA9PT0gXCJib3R0b21cIlxuICAgIH0sIG8gPSB1YDxkaXYgY2xhc3M9JHthKGQodC5saW5lLCBoKSl9IHN0eWxlPSR7Xyh7IHdpZHRoOiBgJHtjfXB4YCB9KX0+PC9kaXY+YDtcbiAgICByZXR1cm4gdWA8ZGl2IGNsYXNzPSR7YShkKHQuYmFyQ29udGFpbmVyLCB0LmxpbmVCYXJDb250YWluZXIpKX0+JHtbbywgbV19PC9kaXY+YDtcbiAgfVxufVxuQyhcImFyY2dpcy1zY2FsZS1iYXJcIiwgayk7XG5leHBvcnQge1xuICBrIGFzIEFyY2dpc1NjYWxlQmFyXG59O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9