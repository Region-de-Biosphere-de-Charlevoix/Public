"use strict";
(self["webpackChunkexb_client"] = self["webpackChunkexb_client"] || []).push([["node_modules_arcgis_map-components_dist_components_arcgis-area-measurement-3d_customElement_js"],{

/***/ "./node_modules/@arcgis/map-components/dist/chunks/useWidget.js":
/*!**********************************************************************!*\
  !*** ./node_modules/@arcgis/map-components/dist/chunks/useWidget.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   m: () => (/* binding */ P)
/* harmony export */ });
/* harmony import */ var _arcgis_components_controllers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @arcgis/components-controllers */ "./node_modules/@arcgis/components-controllers/dist/index.js");
/* harmony import */ var _arcgis_components_controllers_accessor__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @arcgis/components-controllers/accessor */ "./node_modules/@arcgis/components-controllers/dist/accessor/index.js");
/* harmony import */ var _component_utils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./component-utils.js */ "./node_modules/@arcgis/map-components/dist/chunks/component-utils.js");



/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.32/esri/copyright.txt for details.
v4.32.1 */
const P = (d, s) => (i, e) => _(i, d, e);
class y extends _arcgis_components_controllers_accessor__WEBPACK_IMPORTED_MODULE_1__.AccessorController {
  constructor(s, i, e) {
    super(s, i, e), this._watchedViewModelProperties = /* @__PURE__ */ new Map(), this._watchedVisibleElementsProperties = {}, this._isBindingViewModel = { value: !0 }, Object.defineProperty(this.exports, "viewModel", {
      value: _arcgis_components_controllers_accessor__WEBPACK_IMPORTED_MODULE_1__.accessorSupport.makeGetterProxy(s, this._watchedViewModelProperties, this._isBindingViewModel)
    }), Object.defineProperty(this.exports, "visibleElements", {
      value: this._makeVisibleElementsBinder()
    });
  }
  hostConnected() {
    super.hostConnected(), this._isBindingViewModel.value = !1, this.component.manager.loadedCalled && (0,_component_utils_js__WEBPACK_IMPORTED_MODULE_2__.a)(this.component);
  }
  async hostLoad() {
    if (this._watchedProperties.delete("viewModel"), await super.hostLoad(), this.component.manager.destroyed)
      return;
    this._watchMetaProperties(), this.onLifecycle(() => this.reactiveUtils.watch(() => this._instance.viewModel, (e) => {
      this.component.viewModel = e;
    }, { initial: !0 }));
    const s = this._instance.viewModel;
    typeof s == "object" && (_arcgis_components_controllers_accessor__WEBPACK_IMPORTED_MODULE_1__.accessorSupport.watchComponentUpdates(this, s, this._watchedViewModelProperties), _arcgis_components_controllers_accessor__WEBPACK_IMPORTED_MODULE_1__.accessorSupport.watchAccessorUpdates(this, s, this._watchedViewModelProperties));
    const i = Object.entries(this._watchedVisibleElementsProperties);
    i.length > 0 && this.onLifecycle(() => i.map(([e, t]) => {
      let n = this._instance.visibleElements ?? {}, o;
      for (const c of t.slice(0, -1))
        if (typeof n[c] == "object" && n[c] !== null)
          n = n[c];
        else {
          o = !!n[c];
          break;
        }
      o === void 0 && (o = !!(n[t.slice(-1)[0]] ?? !0)), e.startsWith("hide");
      const m = e.startsWith("hide") || e.startsWith("show") ? e.startsWith("hide") : o, h = this.component;
      return typeof h[e] == "boolean" ? this._updateWidgetVisibleElement(t, h[e], m) : h[e] = !1, (0,_arcgis_components_controllers__WEBPACK_IMPORTED_MODULE_0__.watch)(this.component, e, (c) => this._updateWidgetVisibleElement(t, c, m));
    }));
  }
  _updateWidgetVisibleElement(s, i, e) {
    let t = this._instance.visibleElements ?? {};
    for (const o of s.slice(0, -1))
      (typeof t[o] != "object" || t[o] === null) && (t[o] = {}), t = t[o];
    const n = !!(e ? !i : i);
    t[s.at(-1)] = n;
  }
  hostLoaded() {
    const { el: s } = this.component;
    s.childElem ??= document.createElement("div"), this._instance.container = s.childElem;
    let i = !1;
    const e = this.component.el.view;
    Object.defineProperty(this.component.el, "view", {
      get: () => this._instance.view ?? this._instance.viewModel?.view,
      set: (t) => {
        !("view" in this._instance) && typeof this._instance.viewModel == "object" ? this._instance.viewModel.view = t : this._instance.view = t, !("map" in this._instance) && typeof this._instance.viewModel == "object" ? this._instance.viewModel.map = t.map : this._instance.map = t.map, this._watchViewDestroy(), t && !i && (i = !0, this.component.arcgisReady.emit());
      },
      configurable: !0,
      enumerable: !0
    }), e && (this._instance.view = e), this.component.el.isConnected && ((0,_component_utils_js__WEBPACK_IMPORTED_MODULE_2__.a)(this.component), this._watchViewDestroy());
  }
  hostDisconnected() {
    typeof this.component.el.childElem == "object" && this.component.el.view?.ui?.remove(this.component.el.childElem);
  }
  hostDestroy() {
    super.hostDestroy(), this._watchViewDestroyHandle?.remove();
  }
  _watchMetaProperties() {
    (0,_arcgis_components_controllers__WEBPACK_IMPORTED_MODULE_0__.watch)(this.component, "position", (s) => {
      this.component.el.childElem != null && typeof s == "string" && (0,_component_utils_js__WEBPACK_IMPORTED_MODULE_2__.a)(this.component);
    }), (0,_arcgis_components_controllers__WEBPACK_IMPORTED_MODULE_0__.watch)(this.component, "referenceElement", () => (0,_component_utils_js__WEBPACK_IMPORTED_MODULE_2__.a)(this.component));
  }
  _makeVisibleElementsBinder() {
    return new Proxy({}, {
      has: (s, i) => typeof i == "string" || Reflect.has(s, i),
      get: (s, i) => {
        if (typeof i == "symbol" || i in Promise.prototype)
          return Reflect.get(s, i);
        const e = [i], t = this._makeRecursiveProxy(e);
        return (0,_arcgis_components_controllers__WEBPACK_IMPORTED_MODULE_0__.trackPropKey)(this.component, (n) => {
          const o = n;
          this.component[o] = !1, this._watchedVisibleElementsProperties[o] = e;
        }, t);
      }
    });
  }
  _makeRecursiveProxy(s) {
    const i = new Proxy({}, {
      get: (e, t) => {
        const n = Reflect.get(e, t);
        return typeof t == "symbol" || t in Promise.prototype ? n : (s.push(t), i);
      }
    });
    return i;
  }
  /**
   * Destroy the component if view gets destroyed.
   *
   * When view is destroyed, component disconnect is triggered, which will
   * destroy the component in 1s but that can be too late, because in the
   * meanwhile, a watcher on the widget/viewModel instance may get triggered,
   * and throw an error if it's not able to access this.view.map or etc
   * (happens in VersionManagementViewModel for example).
   *
   * We can't check for this in disconnectedCallback though as, if the entire
   * component tree is removed, the disconnect for the component will be
   * triggered before that of arcgis-map, so the view might not be destroyed
   * yet at that point.
   */
  _watchViewDestroy() {
    this._watchViewDestroyHandle?.remove(), this._watchViewDestroyHandle = this.reactiveUtils.when(() => this.component.el.view?.destroyed === !0, () => void this.component.destroy().catch(console.error), { sync: !0 });
  }
}
const _ = (0,_arcgis_components_controllers__WEBPACK_IMPORTED_MODULE_0__.proxyExports)(y);



/***/ }),

/***/ "./node_modules/@arcgis/map-components/dist/components/arcgis-area-measurement-3d/customElement.js":
/*!*********************************************************************************************************!*\
  !*** ./node_modules/@arcgis/map-components/dist/components/arcgis-area-measurement-3d/customElement.js ***!
  \*********************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ArcgisAreaMeasurement3d: () => (/* binding */ d)
/* harmony export */ });
/* harmony import */ var _chunks_runtime_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../chunks/runtime.js */ "./node_modules/@arcgis/map-components/dist/chunks/runtime.js");
/* harmony import */ var _arcgis_components_controllers__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @arcgis/components-controllers */ "./node_modules/@arcgis/components-controllers/dist/index.js");
/* harmony import */ var _arcgis_core_widgets_AreaMeasurement3D_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @arcgis/core/widgets/AreaMeasurement3D.js */ "@arcgis/core/widgets/AreaMeasurement3D.js");
/* harmony import */ var _arcgis_lumina__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @arcgis/lumina */ "./node_modules/@arcgis/lumina/dist/index.js");
/* harmony import */ var _chunks_useWidget_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../chunks/useWidget.js */ "./node_modules/@arcgis/map-components/dist/chunks/useWidget.js");
/* harmony import */ var _lit_reactive_element_css_tag_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @lit/reactive-element/css-tag.js */ "./node_modules/@lit/reactive-element/development/css-tag.js");






/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.32/esri/copyright.txt for details.
v4.32.1 */
const l = (0,_lit_reactive_element_css_tag_js__WEBPACK_IMPORTED_MODULE_5__.css)`@layer{arcgis-area-measurement-3d{display:block}}`, h = (0,_chunks_useWidget_js__WEBPACK_IMPORTED_MODULE_4__.m)(_arcgis_core_widgets_AreaMeasurement3D_js__WEBPACK_IMPORTED_MODULE_2__["default"]);
class d extends _arcgis_lumina__WEBPACK_IMPORTED_MODULE_3__.LitElement {
  constructor() {
    super(...arguments), this.widget = h(this), this.viewModel = this.widget.viewModel, this.analysis = this.widget.analysis, this.autoDestroyDisabled = !1, this.icon = this.widget.icon, this.label = this.widget.label, this.position = "bottom-left", this.state = this.viewModel.state, this.unit = this.widget.unit, this.unitOptions = this.widget.unitOptions, this.arcgisPropertyChange = (0,_arcgis_components_controllers__WEBPACK_IMPORTED_MODULE_1__.usePropertyChange)()("analysis", "state"), this.arcgisReady = (0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_3__.createEvent)();
  }
  static {
    this.properties = { analysis: 0, autoDestroyDisabled: 5, icon: 1, label: 1, position: 1, referenceElement: 1, state: 3, unit: 1, unitOptions: 0 };
  }
  static {
    this.shadowRootOptions = _arcgis_lumina__WEBPACK_IMPORTED_MODULE_3__.noShadowRoot;
  }
  static {
    this.styles = l;
  }
  // #endregion
  // #region Public Methods
  async clear() {
    this.widget?.viewModel.clear();
  }
  /** Permanently destroy the component */
  async destroy() {
    await this.manager.destroy();
  }
  async start() {
    this.widget?.viewModel.start();
  }
}
(0,_chunks_runtime_js__WEBPACK_IMPORTED_MODULE_0__.c)("arcgis-area-measurement-3d", d);



/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2lkZ2V0cy9jaHVua3Mvbm9kZV9tb2R1bGVzX2FyY2dpc19tYXAtY29tcG9uZW50c19kaXN0X2NvbXBvbmVudHNfYXJjZ2lzLWFyZWEtbWVhc3VyZW1lbnQtM2RfY3VzdG9tRWxlbWVudF9qcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7O0FBQWtHO0FBQ007QUFDMUQ7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsdUZBQUM7QUFDakI7QUFDQSw2SEFBNkgsK0JBQStCLFdBQVc7QUFDdkssYUFBYSxvRkFBQztBQUNkLEtBQUs7QUFDTDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsdUdBQXVHLHNEQUFDO0FBQ3hHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUssSUFBSSxhQUFhO0FBQ3RCO0FBQ0EsNkJBQTZCLG9GQUFDLG1FQUFtRSxvRkFBQztBQUNsRztBQUNBO0FBQ0Esa0RBQWtEO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtHQUFrRyxxRUFBQztBQUNuRyxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4REFBOEQ7QUFDOUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLFFBQVE7QUFDcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLEtBQUsscUVBQXFFLHNEQUFDO0FBQzNFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLHFFQUFDO0FBQ0wscUVBQXFFLHNEQUFDO0FBQ3RFLEtBQUssR0FBRyxxRUFBQywyQ0FBMkMsc0RBQUM7QUFDckQ7QUFDQTtBQUNBLHVCQUF1QjtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSw0RUFBQztBQUNoQjtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSwwQkFBMEI7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtNQUErTSxVQUFVO0FBQ3pOO0FBQ0E7QUFDQSxVQUFVLDRFQUFDO0FBR1Q7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ3JIK0M7QUFDdUI7QUFDZDtBQUM0QjtBQUNuQztBQUNTO0FBQzVEO0FBQ0E7QUFDQTtBQUNBLFVBQVUscUVBQUMsUUFBUSwyQkFBMkIsZUFBZSxPQUFPLHVEQUFDLENBQUMsaUZBQUM7QUFDdkUsZ0JBQWdCLHNEQUFDO0FBQ2pCO0FBQ0EsbVlBQW1ZLGlGQUFDLDRDQUE0QywyREFBQztBQUNqYjtBQUNBO0FBQ0Esd0JBQXdCO0FBQ3hCO0FBQ0E7QUFDQSw2QkFBNkIsd0RBQUM7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFEQUFDO0FBR0MiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vbm9kZV9tb2R1bGVzL0BhcmNnaXMvbWFwLWNvbXBvbmVudHMvZGlzdC9jaHVua3MvdXNlV2lkZ2V0LmpzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9tYXAtY29tcG9uZW50cy9kaXN0L2NvbXBvbmVudHMvYXJjZ2lzLWFyZWEtbWVhc3VyZW1lbnQtM2QvY3VzdG9tRWxlbWVudC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBwcm94eUV4cG9ydHMgYXMgdywgd2F0Y2ggYXMgciwgdHJhY2tQcm9wS2V5IGFzIGYgfSBmcm9tIFwiQGFyY2dpcy9jb21wb25lbnRzLWNvbnRyb2xsZXJzXCI7XG5pbXBvcnQgeyBBY2Nlc3NvckNvbnRyb2xsZXIgYXMgcCwgYWNjZXNzb3JTdXBwb3J0IGFzIGEgfSBmcm9tIFwiQGFyY2dpcy9jb21wb25lbnRzLWNvbnRyb2xsZXJzL2FjY2Vzc29yXCI7XG5pbXBvcnQgeyBhIGFzIGwgfSBmcm9tIFwiLi9jb21wb25lbnQtdXRpbHMuanNcIjtcbi8qISBBbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVzcmksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjMyL2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbnY0LjMyLjEgKi9cbmNvbnN0IFAgPSAoZCwgcykgPT4gKGksIGUpID0+IF8oaSwgZCwgZSk7XG5jbGFzcyB5IGV4dGVuZHMgcCB7XG4gIGNvbnN0cnVjdG9yKHMsIGksIGUpIHtcbiAgICBzdXBlcihzLCBpLCBlKSwgdGhpcy5fd2F0Y2hlZFZpZXdNb2RlbFByb3BlcnRpZXMgPSAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpLCB0aGlzLl93YXRjaGVkVmlzaWJsZUVsZW1lbnRzUHJvcGVydGllcyA9IHt9LCB0aGlzLl9pc0JpbmRpbmdWaWV3TW9kZWwgPSB7IHZhbHVlOiAhMCB9LCBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcy5leHBvcnRzLCBcInZpZXdNb2RlbFwiLCB7XG4gICAgICB2YWx1ZTogYS5tYWtlR2V0dGVyUHJveHkocywgdGhpcy5fd2F0Y2hlZFZpZXdNb2RlbFByb3BlcnRpZXMsIHRoaXMuX2lzQmluZGluZ1ZpZXdNb2RlbClcbiAgICB9KSwgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMuZXhwb3J0cywgXCJ2aXNpYmxlRWxlbWVudHNcIiwge1xuICAgICAgdmFsdWU6IHRoaXMuX21ha2VWaXNpYmxlRWxlbWVudHNCaW5kZXIoKVxuICAgIH0pO1xuICB9XG4gIGhvc3RDb25uZWN0ZWQoKSB7XG4gICAgc3VwZXIuaG9zdENvbm5lY3RlZCgpLCB0aGlzLl9pc0JpbmRpbmdWaWV3TW9kZWwudmFsdWUgPSAhMSwgdGhpcy5jb21wb25lbnQubWFuYWdlci5sb2FkZWRDYWxsZWQgJiYgbCh0aGlzLmNvbXBvbmVudCk7XG4gIH1cbiAgYXN5bmMgaG9zdExvYWQoKSB7XG4gICAgaWYgKHRoaXMuX3dhdGNoZWRQcm9wZXJ0aWVzLmRlbGV0ZShcInZpZXdNb2RlbFwiKSwgYXdhaXQgc3VwZXIuaG9zdExvYWQoKSwgdGhpcy5jb21wb25lbnQubWFuYWdlci5kZXN0cm95ZWQpXG4gICAgICByZXR1cm47XG4gICAgdGhpcy5fd2F0Y2hNZXRhUHJvcGVydGllcygpLCB0aGlzLm9uTGlmZWN5Y2xlKCgpID0+IHRoaXMucmVhY3RpdmVVdGlscy53YXRjaCgoKSA9PiB0aGlzLl9pbnN0YW5jZS52aWV3TW9kZWwsIChlKSA9PiB7XG4gICAgICB0aGlzLmNvbXBvbmVudC52aWV3TW9kZWwgPSBlO1xuICAgIH0sIHsgaW5pdGlhbDogITAgfSkpO1xuICAgIGNvbnN0IHMgPSB0aGlzLl9pbnN0YW5jZS52aWV3TW9kZWw7XG4gICAgdHlwZW9mIHMgPT0gXCJvYmplY3RcIiAmJiAoYS53YXRjaENvbXBvbmVudFVwZGF0ZXModGhpcywgcywgdGhpcy5fd2F0Y2hlZFZpZXdNb2RlbFByb3BlcnRpZXMpLCBhLndhdGNoQWNjZXNzb3JVcGRhdGVzKHRoaXMsIHMsIHRoaXMuX3dhdGNoZWRWaWV3TW9kZWxQcm9wZXJ0aWVzKSk7XG4gICAgY29uc3QgaSA9IE9iamVjdC5lbnRyaWVzKHRoaXMuX3dhdGNoZWRWaXNpYmxlRWxlbWVudHNQcm9wZXJ0aWVzKTtcbiAgICBpLmxlbmd0aCA+IDAgJiYgdGhpcy5vbkxpZmVjeWNsZSgoKSA9PiBpLm1hcCgoW2UsIHRdKSA9PiB7XG4gICAgICBsZXQgbiA9IHRoaXMuX2luc3RhbmNlLnZpc2libGVFbGVtZW50cyA/PyB7fSwgbztcbiAgICAgIGZvciAoY29uc3QgYyBvZiB0LnNsaWNlKDAsIC0xKSlcbiAgICAgICAgaWYgKHR5cGVvZiBuW2NdID09IFwib2JqZWN0XCIgJiYgbltjXSAhPT0gbnVsbClcbiAgICAgICAgICBuID0gbltjXTtcbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgbyA9ICEhbltjXTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgbyA9PT0gdm9pZCAwICYmIChvID0gISEoblt0LnNsaWNlKC0xKVswXV0gPz8gITApKSwgZS5zdGFydHNXaXRoKFwiaGlkZVwiKTtcbiAgICAgIGNvbnN0IG0gPSBlLnN0YXJ0c1dpdGgoXCJoaWRlXCIpIHx8IGUuc3RhcnRzV2l0aChcInNob3dcIikgPyBlLnN0YXJ0c1dpdGgoXCJoaWRlXCIpIDogbywgaCA9IHRoaXMuY29tcG9uZW50O1xuICAgICAgcmV0dXJuIHR5cGVvZiBoW2VdID09IFwiYm9vbGVhblwiID8gdGhpcy5fdXBkYXRlV2lkZ2V0VmlzaWJsZUVsZW1lbnQodCwgaFtlXSwgbSkgOiBoW2VdID0gITEsIHIodGhpcy5jb21wb25lbnQsIGUsIChjKSA9PiB0aGlzLl91cGRhdGVXaWRnZXRWaXNpYmxlRWxlbWVudCh0LCBjLCBtKSk7XG4gICAgfSkpO1xuICB9XG4gIF91cGRhdGVXaWRnZXRWaXNpYmxlRWxlbWVudChzLCBpLCBlKSB7XG4gICAgbGV0IHQgPSB0aGlzLl9pbnN0YW5jZS52aXNpYmxlRWxlbWVudHMgPz8ge307XG4gICAgZm9yIChjb25zdCBvIG9mIHMuc2xpY2UoMCwgLTEpKVxuICAgICAgKHR5cGVvZiB0W29dICE9IFwib2JqZWN0XCIgfHwgdFtvXSA9PT0gbnVsbCkgJiYgKHRbb10gPSB7fSksIHQgPSB0W29dO1xuICAgIGNvbnN0IG4gPSAhIShlID8gIWkgOiBpKTtcbiAgICB0W3MuYXQoLTEpXSA9IG47XG4gIH1cbiAgaG9zdExvYWRlZCgpIHtcbiAgICBjb25zdCB7IGVsOiBzIH0gPSB0aGlzLmNvbXBvbmVudDtcbiAgICBzLmNoaWxkRWxlbSA/Pz0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSwgdGhpcy5faW5zdGFuY2UuY29udGFpbmVyID0gcy5jaGlsZEVsZW07XG4gICAgbGV0IGkgPSAhMTtcbiAgICBjb25zdCBlID0gdGhpcy5jb21wb25lbnQuZWwudmlldztcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcy5jb21wb25lbnQuZWwsIFwidmlld1wiLCB7XG4gICAgICBnZXQ6ICgpID0+IHRoaXMuX2luc3RhbmNlLnZpZXcgPz8gdGhpcy5faW5zdGFuY2Uudmlld01vZGVsPy52aWV3LFxuICAgICAgc2V0OiAodCkgPT4ge1xuICAgICAgICAhKFwidmlld1wiIGluIHRoaXMuX2luc3RhbmNlKSAmJiB0eXBlb2YgdGhpcy5faW5zdGFuY2Uudmlld01vZGVsID09IFwib2JqZWN0XCIgPyB0aGlzLl9pbnN0YW5jZS52aWV3TW9kZWwudmlldyA9IHQgOiB0aGlzLl9pbnN0YW5jZS52aWV3ID0gdCwgIShcIm1hcFwiIGluIHRoaXMuX2luc3RhbmNlKSAmJiB0eXBlb2YgdGhpcy5faW5zdGFuY2Uudmlld01vZGVsID09IFwib2JqZWN0XCIgPyB0aGlzLl9pbnN0YW5jZS52aWV3TW9kZWwubWFwID0gdC5tYXAgOiB0aGlzLl9pbnN0YW5jZS5tYXAgPSB0Lm1hcCwgdGhpcy5fd2F0Y2hWaWV3RGVzdHJveSgpLCB0ICYmICFpICYmIChpID0gITAsIHRoaXMuY29tcG9uZW50LmFyY2dpc1JlYWR5LmVtaXQoKSk7XG4gICAgICB9LFxuICAgICAgY29uZmlndXJhYmxlOiAhMCxcbiAgICAgIGVudW1lcmFibGU6ICEwXG4gICAgfSksIGUgJiYgKHRoaXMuX2luc3RhbmNlLnZpZXcgPSBlKSwgdGhpcy5jb21wb25lbnQuZWwuaXNDb25uZWN0ZWQgJiYgKGwodGhpcy5jb21wb25lbnQpLCB0aGlzLl93YXRjaFZpZXdEZXN0cm95KCkpO1xuICB9XG4gIGhvc3REaXNjb25uZWN0ZWQoKSB7XG4gICAgdHlwZW9mIHRoaXMuY29tcG9uZW50LmVsLmNoaWxkRWxlbSA9PSBcIm9iamVjdFwiICYmIHRoaXMuY29tcG9uZW50LmVsLnZpZXc/LnVpPy5yZW1vdmUodGhpcy5jb21wb25lbnQuZWwuY2hpbGRFbGVtKTtcbiAgfVxuICBob3N0RGVzdHJveSgpIHtcbiAgICBzdXBlci5ob3N0RGVzdHJveSgpLCB0aGlzLl93YXRjaFZpZXdEZXN0cm95SGFuZGxlPy5yZW1vdmUoKTtcbiAgfVxuICBfd2F0Y2hNZXRhUHJvcGVydGllcygpIHtcbiAgICByKHRoaXMuY29tcG9uZW50LCBcInBvc2l0aW9uXCIsIChzKSA9PiB7XG4gICAgICB0aGlzLmNvbXBvbmVudC5lbC5jaGlsZEVsZW0gIT0gbnVsbCAmJiB0eXBlb2YgcyA9PSBcInN0cmluZ1wiICYmIGwodGhpcy5jb21wb25lbnQpO1xuICAgIH0pLCByKHRoaXMuY29tcG9uZW50LCBcInJlZmVyZW5jZUVsZW1lbnRcIiwgKCkgPT4gbCh0aGlzLmNvbXBvbmVudCkpO1xuICB9XG4gIF9tYWtlVmlzaWJsZUVsZW1lbnRzQmluZGVyKCkge1xuICAgIHJldHVybiBuZXcgUHJveHkoe30sIHtcbiAgICAgIGhhczogKHMsIGkpID0+IHR5cGVvZiBpID09IFwic3RyaW5nXCIgfHwgUmVmbGVjdC5oYXMocywgaSksXG4gICAgICBnZXQ6IChzLCBpKSA9PiB7XG4gICAgICAgIGlmICh0eXBlb2YgaSA9PSBcInN5bWJvbFwiIHx8IGkgaW4gUHJvbWlzZS5wcm90b3R5cGUpXG4gICAgICAgICAgcmV0dXJuIFJlZmxlY3QuZ2V0KHMsIGkpO1xuICAgICAgICBjb25zdCBlID0gW2ldLCB0ID0gdGhpcy5fbWFrZVJlY3Vyc2l2ZVByb3h5KGUpO1xuICAgICAgICByZXR1cm4gZih0aGlzLmNvbXBvbmVudCwgKG4pID0+IHtcbiAgICAgICAgICBjb25zdCBvID0gbjtcbiAgICAgICAgICB0aGlzLmNvbXBvbmVudFtvXSA9ICExLCB0aGlzLl93YXRjaGVkVmlzaWJsZUVsZW1lbnRzUHJvcGVydGllc1tvXSA9IGU7XG4gICAgICAgIH0sIHQpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG4gIF9tYWtlUmVjdXJzaXZlUHJveHkocykge1xuICAgIGNvbnN0IGkgPSBuZXcgUHJveHkoe30sIHtcbiAgICAgIGdldDogKGUsIHQpID0+IHtcbiAgICAgICAgY29uc3QgbiA9IFJlZmxlY3QuZ2V0KGUsIHQpO1xuICAgICAgICByZXR1cm4gdHlwZW9mIHQgPT0gXCJzeW1ib2xcIiB8fCB0IGluIFByb21pc2UucHJvdG90eXBlID8gbiA6IChzLnB1c2godCksIGkpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBpO1xuICB9XG4gIC8qKlxuICAgKiBEZXN0cm95IHRoZSBjb21wb25lbnQgaWYgdmlldyBnZXRzIGRlc3Ryb3llZC5cbiAgICpcbiAgICogV2hlbiB2aWV3IGlzIGRlc3Ryb3llZCwgY29tcG9uZW50IGRpc2Nvbm5lY3QgaXMgdHJpZ2dlcmVkLCB3aGljaCB3aWxsXG4gICAqIGRlc3Ryb3kgdGhlIGNvbXBvbmVudCBpbiAxcyBidXQgdGhhdCBjYW4gYmUgdG9vIGxhdGUsIGJlY2F1c2UgaW4gdGhlXG4gICAqIG1lYW53aGlsZSwgYSB3YXRjaGVyIG9uIHRoZSB3aWRnZXQvdmlld01vZGVsIGluc3RhbmNlIG1heSBnZXQgdHJpZ2dlcmVkLFxuICAgKiBhbmQgdGhyb3cgYW4gZXJyb3IgaWYgaXQncyBub3QgYWJsZSB0byBhY2Nlc3MgdGhpcy52aWV3Lm1hcCBvciBldGNcbiAgICogKGhhcHBlbnMgaW4gVmVyc2lvbk1hbmFnZW1lbnRWaWV3TW9kZWwgZm9yIGV4YW1wbGUpLlxuICAgKlxuICAgKiBXZSBjYW4ndCBjaGVjayBmb3IgdGhpcyBpbiBkaXNjb25uZWN0ZWRDYWxsYmFjayB0aG91Z2ggYXMsIGlmIHRoZSBlbnRpcmVcbiAgICogY29tcG9uZW50IHRyZWUgaXMgcmVtb3ZlZCwgdGhlIGRpc2Nvbm5lY3QgZm9yIHRoZSBjb21wb25lbnQgd2lsbCBiZVxuICAgKiB0cmlnZ2VyZWQgYmVmb3JlIHRoYXQgb2YgYXJjZ2lzLW1hcCwgc28gdGhlIHZpZXcgbWlnaHQgbm90IGJlIGRlc3Ryb3llZFxuICAgKiB5ZXQgYXQgdGhhdCBwb2ludC5cbiAgICovXG4gIF93YXRjaFZpZXdEZXN0cm95KCkge1xuICAgIHRoaXMuX3dhdGNoVmlld0Rlc3Ryb3lIYW5kbGU/LnJlbW92ZSgpLCB0aGlzLl93YXRjaFZpZXdEZXN0cm95SGFuZGxlID0gdGhpcy5yZWFjdGl2ZVV0aWxzLndoZW4oKCkgPT4gdGhpcy5jb21wb25lbnQuZWwudmlldz8uZGVzdHJveWVkID09PSAhMCwgKCkgPT4gdm9pZCB0aGlzLmNvbXBvbmVudC5kZXN0cm95KCkuY2F0Y2goY29uc29sZS5lcnJvciksIHsgc3luYzogITAgfSk7XG4gIH1cbn1cbmNvbnN0IF8gPSB3KHkpO1xuZXhwb3J0IHtcbiAgUCBhcyBtXG59O1xuIiwiaW1wb3J0IHsgYyBhcyB0IH0gZnJvbSBcIi4uLy4uL2NodW5rcy9ydW50aW1lLmpzXCI7XG5pbXBvcnQgeyB1c2VQcm9wZXJ0eUNoYW5nZSBhcyBlIH0gZnJvbSBcIkBhcmNnaXMvY29tcG9uZW50cy1jb250cm9sbGVyc1wiO1xuaW1wb3J0IHMgZnJvbSBcIkBhcmNnaXMvY29yZS93aWRnZXRzL0FyZWFNZWFzdXJlbWVudDNELmpzXCI7XG5pbXBvcnQgeyBMaXRFbGVtZW50IGFzIGksIGNyZWF0ZUV2ZW50IGFzIGEsIG5vU2hhZG93Um9vdCBhcyBvIH0gZnJvbSBcIkBhcmNnaXMvbHVtaW5hXCI7XG5pbXBvcnQgeyBtIGFzIHIgfSBmcm9tIFwiLi4vLi4vY2h1bmtzL3VzZVdpZGdldC5qc1wiO1xuaW1wb3J0IHsgY3NzIGFzIG4gfSBmcm9tIFwiQGxpdC9yZWFjdGl2ZS1lbGVtZW50L2Nzcy10YWcuanNcIjtcbi8qISBBbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVzcmksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjMyL2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbnY0LjMyLjEgKi9cbmNvbnN0IGwgPSBuYEBsYXllcnthcmNnaXMtYXJlYS1tZWFzdXJlbWVudC0zZHtkaXNwbGF5OmJsb2NrfX1gLCBoID0gcihzKTtcbmNsYXNzIGQgZXh0ZW5kcyBpIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoLi4uYXJndW1lbnRzKSwgdGhpcy53aWRnZXQgPSBoKHRoaXMpLCB0aGlzLnZpZXdNb2RlbCA9IHRoaXMud2lkZ2V0LnZpZXdNb2RlbCwgdGhpcy5hbmFseXNpcyA9IHRoaXMud2lkZ2V0LmFuYWx5c2lzLCB0aGlzLmF1dG9EZXN0cm95RGlzYWJsZWQgPSAhMSwgdGhpcy5pY29uID0gdGhpcy53aWRnZXQuaWNvbiwgdGhpcy5sYWJlbCA9IHRoaXMud2lkZ2V0LmxhYmVsLCB0aGlzLnBvc2l0aW9uID0gXCJib3R0b20tbGVmdFwiLCB0aGlzLnN0YXRlID0gdGhpcy52aWV3TW9kZWwuc3RhdGUsIHRoaXMudW5pdCA9IHRoaXMud2lkZ2V0LnVuaXQsIHRoaXMudW5pdE9wdGlvbnMgPSB0aGlzLndpZGdldC51bml0T3B0aW9ucywgdGhpcy5hcmNnaXNQcm9wZXJ0eUNoYW5nZSA9IGUoKShcImFuYWx5c2lzXCIsIFwic3RhdGVcIiksIHRoaXMuYXJjZ2lzUmVhZHkgPSBhKCk7XG4gIH1cbiAgc3RhdGljIHtcbiAgICB0aGlzLnByb3BlcnRpZXMgPSB7IGFuYWx5c2lzOiAwLCBhdXRvRGVzdHJveURpc2FibGVkOiA1LCBpY29uOiAxLCBsYWJlbDogMSwgcG9zaXRpb246IDEsIHJlZmVyZW5jZUVsZW1lbnQ6IDEsIHN0YXRlOiAzLCB1bml0OiAxLCB1bml0T3B0aW9uczogMCB9O1xuICB9XG4gIHN0YXRpYyB7XG4gICAgdGhpcy5zaGFkb3dSb290T3B0aW9ucyA9IG87XG4gIH1cbiAgc3RhdGljIHtcbiAgICB0aGlzLnN0eWxlcyA9IGw7XG4gIH1cbiAgLy8gI2VuZHJlZ2lvblxuICAvLyAjcmVnaW9uIFB1YmxpYyBNZXRob2RzXG4gIGFzeW5jIGNsZWFyKCkge1xuICAgIHRoaXMud2lkZ2V0Py52aWV3TW9kZWwuY2xlYXIoKTtcbiAgfVxuICAvKiogUGVybWFuZW50bHkgZGVzdHJveSB0aGUgY29tcG9uZW50ICovXG4gIGFzeW5jIGRlc3Ryb3koKSB7XG4gICAgYXdhaXQgdGhpcy5tYW5hZ2VyLmRlc3Ryb3koKTtcbiAgfVxuICBhc3luYyBzdGFydCgpIHtcbiAgICB0aGlzLndpZGdldD8udmlld01vZGVsLnN0YXJ0KCk7XG4gIH1cbn1cbnQoXCJhcmNnaXMtYXJlYS1tZWFzdXJlbWVudC0zZFwiLCBkKTtcbmV4cG9ydCB7XG4gIGQgYXMgQXJjZ2lzQXJlYU1lYXN1cmVtZW50M2Rcbn07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=