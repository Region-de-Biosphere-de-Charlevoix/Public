"use strict";
(self["webpackChunkexb_client"] = self["webpackChunkexb_client"] || []).push([["node_modules_arcgis_map-components_dist_components_arcgis-basemap-layer-list_customElement_js"],{

/***/ "./node_modules/@arcgis/map-components/dist/chunks/useWidget.js":
/*!**********************************************************************!*\
  !*** ./node_modules/@arcgis/map-components/dist/chunks/useWidget.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   m: () => (/* binding */ P)
/* harmony export */ });
/* harmony import */ var _arcgis_components_controllers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @arcgis/components-controllers */ "./node_modules/@arcgis/components-controllers/dist/index.js");
/* harmony import */ var _arcgis_components_controllers_accessor__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @arcgis/components-controllers/accessor */ "./node_modules/@arcgis/components-controllers/dist/accessor/index.js");
/* harmony import */ var _component_utils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./component-utils.js */ "./node_modules/@arcgis/map-components/dist/chunks/component-utils.js");



/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.32/esri/copyright.txt for details.
v4.32.1 */
const P = (d, s) => (i, e) => _(i, d, e);
class y extends _arcgis_components_controllers_accessor__WEBPACK_IMPORTED_MODULE_1__.AccessorController {
  constructor(s, i, e) {
    super(s, i, e), this._watchedViewModelProperties = /* @__PURE__ */ new Map(), this._watchedVisibleElementsProperties = {}, this._isBindingViewModel = { value: !0 }, Object.defineProperty(this.exports, "viewModel", {
      value: _arcgis_components_controllers_accessor__WEBPACK_IMPORTED_MODULE_1__.accessorSupport.makeGetterProxy(s, this._watchedViewModelProperties, this._isBindingViewModel)
    }), Object.defineProperty(this.exports, "visibleElements", {
      value: this._makeVisibleElementsBinder()
    });
  }
  hostConnected() {
    super.hostConnected(), this._isBindingViewModel.value = !1, this.component.manager.loadedCalled && (0,_component_utils_js__WEBPACK_IMPORTED_MODULE_2__.a)(this.component);
  }
  async hostLoad() {
    if (this._watchedProperties.delete("viewModel"), await super.hostLoad(), this.component.manager.destroyed)
      return;
    this._watchMetaProperties(), this.onLifecycle(() => this.reactiveUtils.watch(() => this._instance.viewModel, (e) => {
      this.component.viewModel = e;
    }, { initial: !0 }));
    const s = this._instance.viewModel;
    typeof s == "object" && (_arcgis_components_controllers_accessor__WEBPACK_IMPORTED_MODULE_1__.accessorSupport.watchComponentUpdates(this, s, this._watchedViewModelProperties), _arcgis_components_controllers_accessor__WEBPACK_IMPORTED_MODULE_1__.accessorSupport.watchAccessorUpdates(this, s, this._watchedViewModelProperties));
    const i = Object.entries(this._watchedVisibleElementsProperties);
    i.length > 0 && this.onLifecycle(() => i.map(([e, t]) => {
      let n = this._instance.visibleElements ?? {}, o;
      for (const c of t.slice(0, -1))
        if (typeof n[c] == "object" && n[c] !== null)
          n = n[c];
        else {
          o = !!n[c];
          break;
        }
      o === void 0 && (o = !!(n[t.slice(-1)[0]] ?? !0)), e.startsWith("hide");
      const m = e.startsWith("hide") || e.startsWith("show") ? e.startsWith("hide") : o, h = this.component;
      return typeof h[e] == "boolean" ? this._updateWidgetVisibleElement(t, h[e], m) : h[e] = !1, (0,_arcgis_components_controllers__WEBPACK_IMPORTED_MODULE_0__.watch)(this.component, e, (c) => this._updateWidgetVisibleElement(t, c, m));
    }));
  }
  _updateWidgetVisibleElement(s, i, e) {
    let t = this._instance.visibleElements ?? {};
    for (const o of s.slice(0, -1))
      (typeof t[o] != "object" || t[o] === null) && (t[o] = {}), t = t[o];
    const n = !!(e ? !i : i);
    t[s.at(-1)] = n;
  }
  hostLoaded() {
    const { el: s } = this.component;
    s.childElem ??= document.createElement("div"), this._instance.container = s.childElem;
    let i = !1;
    const e = this.component.el.view;
    Object.defineProperty(this.component.el, "view", {
      get: () => this._instance.view ?? this._instance.viewModel?.view,
      set: (t) => {
        !("view" in this._instance) && typeof this._instance.viewModel == "object" ? this._instance.viewModel.view = t : this._instance.view = t, !("map" in this._instance) && typeof this._instance.viewModel == "object" ? this._instance.viewModel.map = t.map : this._instance.map = t.map, this._watchViewDestroy(), t && !i && (i = !0, this.component.arcgisReady.emit());
      },
      configurable: !0,
      enumerable: !0
    }), e && (this._instance.view = e), this.component.el.isConnected && ((0,_component_utils_js__WEBPACK_IMPORTED_MODULE_2__.a)(this.component), this._watchViewDestroy());
  }
  hostDisconnected() {
    typeof this.component.el.childElem == "object" && this.component.el.view?.ui?.remove(this.component.el.childElem);
  }
  hostDestroy() {
    super.hostDestroy(), this._watchViewDestroyHandle?.remove();
  }
  _watchMetaProperties() {
    (0,_arcgis_components_controllers__WEBPACK_IMPORTED_MODULE_0__.watch)(this.component, "position", (s) => {
      this.component.el.childElem != null && typeof s == "string" && (0,_component_utils_js__WEBPACK_IMPORTED_MODULE_2__.a)(this.component);
    }), (0,_arcgis_components_controllers__WEBPACK_IMPORTED_MODULE_0__.watch)(this.component, "referenceElement", () => (0,_component_utils_js__WEBPACK_IMPORTED_MODULE_2__.a)(this.component));
  }
  _makeVisibleElementsBinder() {
    return new Proxy({}, {
      has: (s, i) => typeof i == "string" || Reflect.has(s, i),
      get: (s, i) => {
        if (typeof i == "symbol" || i in Promise.prototype)
          return Reflect.get(s, i);
        const e = [i], t = this._makeRecursiveProxy(e);
        return (0,_arcgis_components_controllers__WEBPACK_IMPORTED_MODULE_0__.trackPropKey)(this.component, (n) => {
          const o = n;
          this.component[o] = !1, this._watchedVisibleElementsProperties[o] = e;
        }, t);
      }
    });
  }
  _makeRecursiveProxy(s) {
    const i = new Proxy({}, {
      get: (e, t) => {
        const n = Reflect.get(e, t);
        return typeof t == "symbol" || t in Promise.prototype ? n : (s.push(t), i);
      }
    });
    return i;
  }
  /**
   * Destroy the component if view gets destroyed.
   *
   * When view is destroyed, component disconnect is triggered, which will
   * destroy the component in 1s but that can be too late, because in the
   * meanwhile, a watcher on the widget/viewModel instance may get triggered,
   * and throw an error if it's not able to access this.view.map or etc
   * (happens in VersionManagementViewModel for example).
   *
   * We can't check for this in disconnectedCallback though as, if the entire
   * component tree is removed, the disconnect for the component will be
   * triggered before that of arcgis-map, so the view might not be destroyed
   * yet at that point.
   */
  _watchViewDestroy() {
    this._watchViewDestroyHandle?.remove(), this._watchViewDestroyHandle = this.reactiveUtils.when(() => this.component.el.view?.destroyed === !0, () => void this.component.destroy().catch(console.error), { sync: !0 });
  }
}
const _ = (0,_arcgis_components_controllers__WEBPACK_IMPORTED_MODULE_0__.proxyExports)(y);



/***/ }),

/***/ "./node_modules/@arcgis/map-components/dist/components/arcgis-basemap-layer-list/customElement.js":
/*!********************************************************************************************************!*\
  !*** ./node_modules/@arcgis/map-components/dist/components/arcgis-basemap-layer-list/customElement.js ***!
  \********************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ArcgisBasemapLayerList: () => (/* binding */ c)
/* harmony export */ });
/* harmony import */ var _chunks_runtime_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../chunks/runtime.js */ "./node_modules/@arcgis/map-components/dist/chunks/runtime.js");
/* harmony import */ var _arcgis_components_controllers__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @arcgis/components-controllers */ "./node_modules/@arcgis/components-controllers/dist/index.js");
/* harmony import */ var _arcgis_components_controllers_accessor__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @arcgis/components-controllers/accessor */ "./node_modules/@arcgis/components-controllers/dist/accessor/index.js");
/* harmony import */ var _arcgis_core_widgets_BasemapLayerList_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @arcgis/core/widgets/BasemapLayerList.js */ "@arcgis/core/widgets/BasemapLayerList.js");
/* harmony import */ var _arcgis_lumina__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @arcgis/lumina */ "./node_modules/@arcgis/lumina/dist/index.js");
/* harmony import */ var _chunks_useWidget_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../chunks/useWidget.js */ "./node_modules/@arcgis/map-components/dist/chunks/useWidget.js");
/* harmony import */ var _lit_reactive_element_css_tag_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @lit/reactive-element/css-tag.js */ "./node_modules/@lit/reactive-element/development/css-tag.js");







/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.32/esri/copyright.txt for details.
v4.32.1 */
const d = (0,_lit_reactive_element_css_tag_js__WEBPACK_IMPORTED_MODULE_6__.css)`@layer{arcgis-basemap-layer-list{display:block}}`, n = (0,_chunks_useWidget_js__WEBPACK_IMPORTED_MODULE_5__.m)(_arcgis_core_widgets_BasemapLayerList_js__WEBPACK_IMPORTED_MODULE_3__["default"]);
class c extends _arcgis_lumina__WEBPACK_IMPORTED_MODULE_4__.LitElement {
  constructor() {
    super(...arguments), this.widget = n(this), this.viewModel = this.widget.viewModel, this.autoDestroyDisabled = !1, this.baseFilterPredicate = this.widget.baseFilterPredicate, this.baseFilterText = this.widget.baseFilterText, this.baseListItemCreatedFunction = this.widget.baseListItemCreatedFunction, this.basemapTitle = this.widget.basemapTitle, this.catalogOptions = this.widget.catalogOptions, this.collapsed = this.widget.collapsed, this.dragEnabled = this.widget.dragEnabled, this.editingTitle = this.widget.editingTitle, this.filterPlaceholder = this.widget.filterPlaceholder, this.headingLevel = this.widget.headingLevel, this.hideBaseLayers = this.widget.visibleElements.baseLayers, this.hideFlow = this.widget.visibleElements.flow, this.hideHeading = this.widget.visibleElements.heading, this.hideReferenceLayers = this.widget.visibleElements.referenceLayers, this.hideStatusIndicators = this.widget.visibleElements.statusIndicators, this.icon = this.widget.icon, this.label = this.widget.label, this.minFilterItems = this.widget.minFilterItems, this.position = "bottom-left", this.referenceFilterPredicate = this.widget.referenceFilterPredicate, this.referenceFilterText = this.widget.referenceFilterText, this.referenceListItemCreatedFunction = this.widget.referenceListItemCreatedFunction, this.selectedItems = this.widget.selectedItems, this.selectionMode = this.widget.selectionMode, this.showCloseButton = this.widget.visibleElements.closeButton, this.showCollapseButton = this.widget.visibleElements.collapseButton, this.showEditTitleButton = this.widget.visibleElements.editTitleButton, this.showErrors = this.widget.visibleElements.errors, this.showFilter = this.widget.visibleElements.filter, this.showTemporaryLayerIndicators = this.widget.visibleElements.temporaryLayerIndicators, this.state = this.viewModel.state, this.visibilityAppearance = this.widget.visibilityAppearance, this.arcgisPropertyChange = (0,_arcgis_components_controllers__WEBPACK_IMPORTED_MODULE_1__.usePropertyChange)()("state"), this.arcgisReady = (0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_4__.createEvent)(), this.arcgisTriggerAction = (0,_arcgis_components_controllers_accessor__WEBPACK_IMPORTED_MODULE_2__.reEmitEvent)(() => this.widget, "trigger-action");
  }
  static {
    this.properties = { autoDestroyDisabled: 5, baseFilterPredicate: 0, baseFilterText: 1, baseItems: 32, baseListItemCreatedFunction: 0, basemapTitle: 1, catalogLayerList: 32, catalogOptions: 0, collapsed: 7, dragEnabled: 5, editingTitle: 5, filterPlaceholder: 1, headingLevel: 9, hideBaseLayers: 5, hideFlow: 5, hideHeading: 5, hideReferenceLayers: 5, hideStatusIndicators: 5, icon: 1, label: 1, minFilterItems: 9, position: 1, referenceElement: 1, referenceFilterPredicate: 0, referenceFilterText: 1, referenceItems: 32, referenceListItemCreatedFunction: 0, selectedItems: 0, selectionMode: 1, showCloseButton: 5, showCollapseButton: 5, showEditTitleButton: 5, showErrors: 5, showFilter: 5, showTemporaryLayerIndicators: 5, state: 3, visibilityAppearance: 1 };
  }
  static {
    this.shadowRootOptions = _arcgis_lumina__WEBPACK_IMPORTED_MODULE_4__.noShadowRoot;
  }
  static {
    this.styles = d;
  }
  /** A collection of ListItems representing the baseLayers. */
  get baseItems() {
    return this.widget.baseItems;
  }
  /** The CatalogLayerList that displays a catalog layer's dynamic group layer. */
  get catalogLayerList() {
    return this.widget.catalogLayerList;
  }
  /** A collection of ListItems representing the referenceLayers. */
  get referenceItems() {
    return this.widget.referenceItems;
  }
  // #endregion
  // #region Public Methods
  /** Permanently destroy the component */
  async destroy() {
    await this.manager.destroy();
  }
}
(0,_chunks_runtime_js__WEBPACK_IMPORTED_MODULE_0__.c)("arcgis-basemap-layer-list", c);



/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2lkZ2V0cy9jaHVua3Mvbm9kZV9tb2R1bGVzX2FyY2dpc19tYXAtY29tcG9uZW50c19kaXN0X2NvbXBvbmVudHNfYXJjZ2lzLWJhc2VtYXAtbGF5ZXItbGlzdF9jdXN0b21FbGVtZW50X2pzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBa0c7QUFDTTtBQUMxRDtBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQix1RkFBQztBQUNqQjtBQUNBLDZIQUE2SCwrQkFBK0IsV0FBVztBQUN2SyxhQUFhLG9GQUFDO0FBQ2QsS0FBSztBQUNMO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSx1R0FBdUcsc0RBQUM7QUFDeEc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSyxJQUFJLGFBQWE7QUFDdEI7QUFDQSw2QkFBNkIsb0ZBQUMsbUVBQW1FLG9GQUFDO0FBQ2xHO0FBQ0E7QUFDQSxrREFBa0Q7QUFDbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0dBQWtHLHFFQUFDO0FBQ25HLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhEQUE4RDtBQUM5RDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksUUFBUTtBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0EsS0FBSyxxRUFBcUUsc0RBQUM7QUFDM0U7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUkscUVBQUM7QUFDTCxxRUFBcUUsc0RBQUM7QUFDdEUsS0FBSyxHQUFHLHFFQUFDLDJDQUEyQyxzREFBQztBQUNyRDtBQUNBO0FBQ0EsdUJBQXVCO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLDRFQUFDO0FBQ2hCO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLDBCQUEwQjtBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK01BQStNLFVBQVU7QUFDek47QUFDQTtBQUNBLFVBQVUsNEVBQUM7QUFHVDs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ3JIK0M7QUFDdUI7QUFDRztBQUNsQjtBQUM2QjtBQUNuQztBQUNTO0FBQzVEO0FBQ0E7QUFDQTtBQUNBLFVBQVUscUVBQUMsUUFBUSwwQkFBMEIsZUFBZSxPQUFPLHVEQUFDLENBQUMsZ0ZBQUM7QUFDdEUsZ0JBQWdCLHNEQUFDO0FBQ2pCO0FBQ0EsMjREQUEyNEQsaUZBQUMsZ0NBQWdDLDJEQUFDLCtCQUErQixvRkFBQztBQUM3OEQ7QUFDQTtBQUNBLHdCQUF3QjtBQUN4QjtBQUNBO0FBQ0EsNkJBQTZCLHdEQUFDO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxREFBQztBQUdDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL21hcC1jb21wb25lbnRzL2Rpc3QvY2h1bmtzL3VzZVdpZGdldC5qcyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vbm9kZV9tb2R1bGVzL0BhcmNnaXMvbWFwLWNvbXBvbmVudHMvZGlzdC9jb21wb25lbnRzL2FyY2dpcy1iYXNlbWFwLWxheWVyLWxpc3QvY3VzdG9tRWxlbWVudC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBwcm94eUV4cG9ydHMgYXMgdywgd2F0Y2ggYXMgciwgdHJhY2tQcm9wS2V5IGFzIGYgfSBmcm9tIFwiQGFyY2dpcy9jb21wb25lbnRzLWNvbnRyb2xsZXJzXCI7XG5pbXBvcnQgeyBBY2Nlc3NvckNvbnRyb2xsZXIgYXMgcCwgYWNjZXNzb3JTdXBwb3J0IGFzIGEgfSBmcm9tIFwiQGFyY2dpcy9jb21wb25lbnRzLWNvbnRyb2xsZXJzL2FjY2Vzc29yXCI7XG5pbXBvcnQgeyBhIGFzIGwgfSBmcm9tIFwiLi9jb21wb25lbnQtdXRpbHMuanNcIjtcbi8qISBBbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVzcmksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjMyL2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbnY0LjMyLjEgKi9cbmNvbnN0IFAgPSAoZCwgcykgPT4gKGksIGUpID0+IF8oaSwgZCwgZSk7XG5jbGFzcyB5IGV4dGVuZHMgcCB7XG4gIGNvbnN0cnVjdG9yKHMsIGksIGUpIHtcbiAgICBzdXBlcihzLCBpLCBlKSwgdGhpcy5fd2F0Y2hlZFZpZXdNb2RlbFByb3BlcnRpZXMgPSAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpLCB0aGlzLl93YXRjaGVkVmlzaWJsZUVsZW1lbnRzUHJvcGVydGllcyA9IHt9LCB0aGlzLl9pc0JpbmRpbmdWaWV3TW9kZWwgPSB7IHZhbHVlOiAhMCB9LCBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcy5leHBvcnRzLCBcInZpZXdNb2RlbFwiLCB7XG4gICAgICB2YWx1ZTogYS5tYWtlR2V0dGVyUHJveHkocywgdGhpcy5fd2F0Y2hlZFZpZXdNb2RlbFByb3BlcnRpZXMsIHRoaXMuX2lzQmluZGluZ1ZpZXdNb2RlbClcbiAgICB9KSwgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMuZXhwb3J0cywgXCJ2aXNpYmxlRWxlbWVudHNcIiwge1xuICAgICAgdmFsdWU6IHRoaXMuX21ha2VWaXNpYmxlRWxlbWVudHNCaW5kZXIoKVxuICAgIH0pO1xuICB9XG4gIGhvc3RDb25uZWN0ZWQoKSB7XG4gICAgc3VwZXIuaG9zdENvbm5lY3RlZCgpLCB0aGlzLl9pc0JpbmRpbmdWaWV3TW9kZWwudmFsdWUgPSAhMSwgdGhpcy5jb21wb25lbnQubWFuYWdlci5sb2FkZWRDYWxsZWQgJiYgbCh0aGlzLmNvbXBvbmVudCk7XG4gIH1cbiAgYXN5bmMgaG9zdExvYWQoKSB7XG4gICAgaWYgKHRoaXMuX3dhdGNoZWRQcm9wZXJ0aWVzLmRlbGV0ZShcInZpZXdNb2RlbFwiKSwgYXdhaXQgc3VwZXIuaG9zdExvYWQoKSwgdGhpcy5jb21wb25lbnQubWFuYWdlci5kZXN0cm95ZWQpXG4gICAgICByZXR1cm47XG4gICAgdGhpcy5fd2F0Y2hNZXRhUHJvcGVydGllcygpLCB0aGlzLm9uTGlmZWN5Y2xlKCgpID0+IHRoaXMucmVhY3RpdmVVdGlscy53YXRjaCgoKSA9PiB0aGlzLl9pbnN0YW5jZS52aWV3TW9kZWwsIChlKSA9PiB7XG4gICAgICB0aGlzLmNvbXBvbmVudC52aWV3TW9kZWwgPSBlO1xuICAgIH0sIHsgaW5pdGlhbDogITAgfSkpO1xuICAgIGNvbnN0IHMgPSB0aGlzLl9pbnN0YW5jZS52aWV3TW9kZWw7XG4gICAgdHlwZW9mIHMgPT0gXCJvYmplY3RcIiAmJiAoYS53YXRjaENvbXBvbmVudFVwZGF0ZXModGhpcywgcywgdGhpcy5fd2F0Y2hlZFZpZXdNb2RlbFByb3BlcnRpZXMpLCBhLndhdGNoQWNjZXNzb3JVcGRhdGVzKHRoaXMsIHMsIHRoaXMuX3dhdGNoZWRWaWV3TW9kZWxQcm9wZXJ0aWVzKSk7XG4gICAgY29uc3QgaSA9IE9iamVjdC5lbnRyaWVzKHRoaXMuX3dhdGNoZWRWaXNpYmxlRWxlbWVudHNQcm9wZXJ0aWVzKTtcbiAgICBpLmxlbmd0aCA+IDAgJiYgdGhpcy5vbkxpZmVjeWNsZSgoKSA9PiBpLm1hcCgoW2UsIHRdKSA9PiB7XG4gICAgICBsZXQgbiA9IHRoaXMuX2luc3RhbmNlLnZpc2libGVFbGVtZW50cyA/PyB7fSwgbztcbiAgICAgIGZvciAoY29uc3QgYyBvZiB0LnNsaWNlKDAsIC0xKSlcbiAgICAgICAgaWYgKHR5cGVvZiBuW2NdID09IFwib2JqZWN0XCIgJiYgbltjXSAhPT0gbnVsbClcbiAgICAgICAgICBuID0gbltjXTtcbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgbyA9ICEhbltjXTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgbyA9PT0gdm9pZCAwICYmIChvID0gISEoblt0LnNsaWNlKC0xKVswXV0gPz8gITApKSwgZS5zdGFydHNXaXRoKFwiaGlkZVwiKTtcbiAgICAgIGNvbnN0IG0gPSBlLnN0YXJ0c1dpdGgoXCJoaWRlXCIpIHx8IGUuc3RhcnRzV2l0aChcInNob3dcIikgPyBlLnN0YXJ0c1dpdGgoXCJoaWRlXCIpIDogbywgaCA9IHRoaXMuY29tcG9uZW50O1xuICAgICAgcmV0dXJuIHR5cGVvZiBoW2VdID09IFwiYm9vbGVhblwiID8gdGhpcy5fdXBkYXRlV2lkZ2V0VmlzaWJsZUVsZW1lbnQodCwgaFtlXSwgbSkgOiBoW2VdID0gITEsIHIodGhpcy5jb21wb25lbnQsIGUsIChjKSA9PiB0aGlzLl91cGRhdGVXaWRnZXRWaXNpYmxlRWxlbWVudCh0LCBjLCBtKSk7XG4gICAgfSkpO1xuICB9XG4gIF91cGRhdGVXaWRnZXRWaXNpYmxlRWxlbWVudChzLCBpLCBlKSB7XG4gICAgbGV0IHQgPSB0aGlzLl9pbnN0YW5jZS52aXNpYmxlRWxlbWVudHMgPz8ge307XG4gICAgZm9yIChjb25zdCBvIG9mIHMuc2xpY2UoMCwgLTEpKVxuICAgICAgKHR5cGVvZiB0W29dICE9IFwib2JqZWN0XCIgfHwgdFtvXSA9PT0gbnVsbCkgJiYgKHRbb10gPSB7fSksIHQgPSB0W29dO1xuICAgIGNvbnN0IG4gPSAhIShlID8gIWkgOiBpKTtcbiAgICB0W3MuYXQoLTEpXSA9IG47XG4gIH1cbiAgaG9zdExvYWRlZCgpIHtcbiAgICBjb25zdCB7IGVsOiBzIH0gPSB0aGlzLmNvbXBvbmVudDtcbiAgICBzLmNoaWxkRWxlbSA/Pz0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSwgdGhpcy5faW5zdGFuY2UuY29udGFpbmVyID0gcy5jaGlsZEVsZW07XG4gICAgbGV0IGkgPSAhMTtcbiAgICBjb25zdCBlID0gdGhpcy5jb21wb25lbnQuZWwudmlldztcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcy5jb21wb25lbnQuZWwsIFwidmlld1wiLCB7XG4gICAgICBnZXQ6ICgpID0+IHRoaXMuX2luc3RhbmNlLnZpZXcgPz8gdGhpcy5faW5zdGFuY2Uudmlld01vZGVsPy52aWV3LFxuICAgICAgc2V0OiAodCkgPT4ge1xuICAgICAgICAhKFwidmlld1wiIGluIHRoaXMuX2luc3RhbmNlKSAmJiB0eXBlb2YgdGhpcy5faW5zdGFuY2Uudmlld01vZGVsID09IFwib2JqZWN0XCIgPyB0aGlzLl9pbnN0YW5jZS52aWV3TW9kZWwudmlldyA9IHQgOiB0aGlzLl9pbnN0YW5jZS52aWV3ID0gdCwgIShcIm1hcFwiIGluIHRoaXMuX2luc3RhbmNlKSAmJiB0eXBlb2YgdGhpcy5faW5zdGFuY2Uudmlld01vZGVsID09IFwib2JqZWN0XCIgPyB0aGlzLl9pbnN0YW5jZS52aWV3TW9kZWwubWFwID0gdC5tYXAgOiB0aGlzLl9pbnN0YW5jZS5tYXAgPSB0Lm1hcCwgdGhpcy5fd2F0Y2hWaWV3RGVzdHJveSgpLCB0ICYmICFpICYmIChpID0gITAsIHRoaXMuY29tcG9uZW50LmFyY2dpc1JlYWR5LmVtaXQoKSk7XG4gICAgICB9LFxuICAgICAgY29uZmlndXJhYmxlOiAhMCxcbiAgICAgIGVudW1lcmFibGU6ICEwXG4gICAgfSksIGUgJiYgKHRoaXMuX2luc3RhbmNlLnZpZXcgPSBlKSwgdGhpcy5jb21wb25lbnQuZWwuaXNDb25uZWN0ZWQgJiYgKGwodGhpcy5jb21wb25lbnQpLCB0aGlzLl93YXRjaFZpZXdEZXN0cm95KCkpO1xuICB9XG4gIGhvc3REaXNjb25uZWN0ZWQoKSB7XG4gICAgdHlwZW9mIHRoaXMuY29tcG9uZW50LmVsLmNoaWxkRWxlbSA9PSBcIm9iamVjdFwiICYmIHRoaXMuY29tcG9uZW50LmVsLnZpZXc/LnVpPy5yZW1vdmUodGhpcy5jb21wb25lbnQuZWwuY2hpbGRFbGVtKTtcbiAgfVxuICBob3N0RGVzdHJveSgpIHtcbiAgICBzdXBlci5ob3N0RGVzdHJveSgpLCB0aGlzLl93YXRjaFZpZXdEZXN0cm95SGFuZGxlPy5yZW1vdmUoKTtcbiAgfVxuICBfd2F0Y2hNZXRhUHJvcGVydGllcygpIHtcbiAgICByKHRoaXMuY29tcG9uZW50LCBcInBvc2l0aW9uXCIsIChzKSA9PiB7XG4gICAgICB0aGlzLmNvbXBvbmVudC5lbC5jaGlsZEVsZW0gIT0gbnVsbCAmJiB0eXBlb2YgcyA9PSBcInN0cmluZ1wiICYmIGwodGhpcy5jb21wb25lbnQpO1xuICAgIH0pLCByKHRoaXMuY29tcG9uZW50LCBcInJlZmVyZW5jZUVsZW1lbnRcIiwgKCkgPT4gbCh0aGlzLmNvbXBvbmVudCkpO1xuICB9XG4gIF9tYWtlVmlzaWJsZUVsZW1lbnRzQmluZGVyKCkge1xuICAgIHJldHVybiBuZXcgUHJveHkoe30sIHtcbiAgICAgIGhhczogKHMsIGkpID0+IHR5cGVvZiBpID09IFwic3RyaW5nXCIgfHwgUmVmbGVjdC5oYXMocywgaSksXG4gICAgICBnZXQ6IChzLCBpKSA9PiB7XG4gICAgICAgIGlmICh0eXBlb2YgaSA9PSBcInN5bWJvbFwiIHx8IGkgaW4gUHJvbWlzZS5wcm90b3R5cGUpXG4gICAgICAgICAgcmV0dXJuIFJlZmxlY3QuZ2V0KHMsIGkpO1xuICAgICAgICBjb25zdCBlID0gW2ldLCB0ID0gdGhpcy5fbWFrZVJlY3Vyc2l2ZVByb3h5KGUpO1xuICAgICAgICByZXR1cm4gZih0aGlzLmNvbXBvbmVudCwgKG4pID0+IHtcbiAgICAgICAgICBjb25zdCBvID0gbjtcbiAgICAgICAgICB0aGlzLmNvbXBvbmVudFtvXSA9ICExLCB0aGlzLl93YXRjaGVkVmlzaWJsZUVsZW1lbnRzUHJvcGVydGllc1tvXSA9IGU7XG4gICAgICAgIH0sIHQpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG4gIF9tYWtlUmVjdXJzaXZlUHJveHkocykge1xuICAgIGNvbnN0IGkgPSBuZXcgUHJveHkoe30sIHtcbiAgICAgIGdldDogKGUsIHQpID0+IHtcbiAgICAgICAgY29uc3QgbiA9IFJlZmxlY3QuZ2V0KGUsIHQpO1xuICAgICAgICByZXR1cm4gdHlwZW9mIHQgPT0gXCJzeW1ib2xcIiB8fCB0IGluIFByb21pc2UucHJvdG90eXBlID8gbiA6IChzLnB1c2godCksIGkpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBpO1xuICB9XG4gIC8qKlxuICAgKiBEZXN0cm95IHRoZSBjb21wb25lbnQgaWYgdmlldyBnZXRzIGRlc3Ryb3llZC5cbiAgICpcbiAgICogV2hlbiB2aWV3IGlzIGRlc3Ryb3llZCwgY29tcG9uZW50IGRpc2Nvbm5lY3QgaXMgdHJpZ2dlcmVkLCB3aGljaCB3aWxsXG4gICAqIGRlc3Ryb3kgdGhlIGNvbXBvbmVudCBpbiAxcyBidXQgdGhhdCBjYW4gYmUgdG9vIGxhdGUsIGJlY2F1c2UgaW4gdGhlXG4gICAqIG1lYW53aGlsZSwgYSB3YXRjaGVyIG9uIHRoZSB3aWRnZXQvdmlld01vZGVsIGluc3RhbmNlIG1heSBnZXQgdHJpZ2dlcmVkLFxuICAgKiBhbmQgdGhyb3cgYW4gZXJyb3IgaWYgaXQncyBub3QgYWJsZSB0byBhY2Nlc3MgdGhpcy52aWV3Lm1hcCBvciBldGNcbiAgICogKGhhcHBlbnMgaW4gVmVyc2lvbk1hbmFnZW1lbnRWaWV3TW9kZWwgZm9yIGV4YW1wbGUpLlxuICAgKlxuICAgKiBXZSBjYW4ndCBjaGVjayBmb3IgdGhpcyBpbiBkaXNjb25uZWN0ZWRDYWxsYmFjayB0aG91Z2ggYXMsIGlmIHRoZSBlbnRpcmVcbiAgICogY29tcG9uZW50IHRyZWUgaXMgcmVtb3ZlZCwgdGhlIGRpc2Nvbm5lY3QgZm9yIHRoZSBjb21wb25lbnQgd2lsbCBiZVxuICAgKiB0cmlnZ2VyZWQgYmVmb3JlIHRoYXQgb2YgYXJjZ2lzLW1hcCwgc28gdGhlIHZpZXcgbWlnaHQgbm90IGJlIGRlc3Ryb3llZFxuICAgKiB5ZXQgYXQgdGhhdCBwb2ludC5cbiAgICovXG4gIF93YXRjaFZpZXdEZXN0cm95KCkge1xuICAgIHRoaXMuX3dhdGNoVmlld0Rlc3Ryb3lIYW5kbGU/LnJlbW92ZSgpLCB0aGlzLl93YXRjaFZpZXdEZXN0cm95SGFuZGxlID0gdGhpcy5yZWFjdGl2ZVV0aWxzLndoZW4oKCkgPT4gdGhpcy5jb21wb25lbnQuZWwudmlldz8uZGVzdHJveWVkID09PSAhMCwgKCkgPT4gdm9pZCB0aGlzLmNvbXBvbmVudC5kZXN0cm95KCkuY2F0Y2goY29uc29sZS5lcnJvciksIHsgc3luYzogITAgfSk7XG4gIH1cbn1cbmNvbnN0IF8gPSB3KHkpO1xuZXhwb3J0IHtcbiAgUCBhcyBtXG59O1xuIiwiaW1wb3J0IHsgYyBhcyBlIH0gZnJvbSBcIi4uLy4uL2NodW5rcy9ydW50aW1lLmpzXCI7XG5pbXBvcnQgeyB1c2VQcm9wZXJ0eUNoYW5nZSBhcyB0IH0gZnJvbSBcIkBhcmNnaXMvY29tcG9uZW50cy1jb250cm9sbGVyc1wiO1xuaW1wb3J0IHsgcmVFbWl0RXZlbnQgYXMgaSB9IGZyb20gXCJAYXJjZ2lzL2NvbXBvbmVudHMtY29udHJvbGxlcnMvYWNjZXNzb3JcIjtcbmltcG9ydCBzIGZyb20gXCJAYXJjZ2lzL2NvcmUvd2lkZ2V0cy9CYXNlbWFwTGF5ZXJMaXN0LmpzXCI7XG5pbXBvcnQgeyBMaXRFbGVtZW50IGFzIHIsIGNyZWF0ZUV2ZW50IGFzIGEsIG5vU2hhZG93Um9vdCBhcyBsIH0gZnJvbSBcIkBhcmNnaXMvbHVtaW5hXCI7XG5pbXBvcnQgeyBtIGFzIG8gfSBmcm9tIFwiLi4vLi4vY2h1bmtzL3VzZVdpZGdldC5qc1wiO1xuaW1wb3J0IHsgY3NzIGFzIGggfSBmcm9tIFwiQGxpdC9yZWFjdGl2ZS1lbGVtZW50L2Nzcy10YWcuanNcIjtcbi8qISBBbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVzcmksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjMyL2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbnY0LjMyLjEgKi9cbmNvbnN0IGQgPSBoYEBsYXllcnthcmNnaXMtYmFzZW1hcC1sYXllci1saXN0e2Rpc3BsYXk6YmxvY2t9fWAsIG4gPSBvKHMpO1xuY2xhc3MgYyBleHRlbmRzIHIge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlciguLi5hcmd1bWVudHMpLCB0aGlzLndpZGdldCA9IG4odGhpcyksIHRoaXMudmlld01vZGVsID0gdGhpcy53aWRnZXQudmlld01vZGVsLCB0aGlzLmF1dG9EZXN0cm95RGlzYWJsZWQgPSAhMSwgdGhpcy5iYXNlRmlsdGVyUHJlZGljYXRlID0gdGhpcy53aWRnZXQuYmFzZUZpbHRlclByZWRpY2F0ZSwgdGhpcy5iYXNlRmlsdGVyVGV4dCA9IHRoaXMud2lkZ2V0LmJhc2VGaWx0ZXJUZXh0LCB0aGlzLmJhc2VMaXN0SXRlbUNyZWF0ZWRGdW5jdGlvbiA9IHRoaXMud2lkZ2V0LmJhc2VMaXN0SXRlbUNyZWF0ZWRGdW5jdGlvbiwgdGhpcy5iYXNlbWFwVGl0bGUgPSB0aGlzLndpZGdldC5iYXNlbWFwVGl0bGUsIHRoaXMuY2F0YWxvZ09wdGlvbnMgPSB0aGlzLndpZGdldC5jYXRhbG9nT3B0aW9ucywgdGhpcy5jb2xsYXBzZWQgPSB0aGlzLndpZGdldC5jb2xsYXBzZWQsIHRoaXMuZHJhZ0VuYWJsZWQgPSB0aGlzLndpZGdldC5kcmFnRW5hYmxlZCwgdGhpcy5lZGl0aW5nVGl0bGUgPSB0aGlzLndpZGdldC5lZGl0aW5nVGl0bGUsIHRoaXMuZmlsdGVyUGxhY2Vob2xkZXIgPSB0aGlzLndpZGdldC5maWx0ZXJQbGFjZWhvbGRlciwgdGhpcy5oZWFkaW5nTGV2ZWwgPSB0aGlzLndpZGdldC5oZWFkaW5nTGV2ZWwsIHRoaXMuaGlkZUJhc2VMYXllcnMgPSB0aGlzLndpZGdldC52aXNpYmxlRWxlbWVudHMuYmFzZUxheWVycywgdGhpcy5oaWRlRmxvdyA9IHRoaXMud2lkZ2V0LnZpc2libGVFbGVtZW50cy5mbG93LCB0aGlzLmhpZGVIZWFkaW5nID0gdGhpcy53aWRnZXQudmlzaWJsZUVsZW1lbnRzLmhlYWRpbmcsIHRoaXMuaGlkZVJlZmVyZW5jZUxheWVycyA9IHRoaXMud2lkZ2V0LnZpc2libGVFbGVtZW50cy5yZWZlcmVuY2VMYXllcnMsIHRoaXMuaGlkZVN0YXR1c0luZGljYXRvcnMgPSB0aGlzLndpZGdldC52aXNpYmxlRWxlbWVudHMuc3RhdHVzSW5kaWNhdG9ycywgdGhpcy5pY29uID0gdGhpcy53aWRnZXQuaWNvbiwgdGhpcy5sYWJlbCA9IHRoaXMud2lkZ2V0LmxhYmVsLCB0aGlzLm1pbkZpbHRlckl0ZW1zID0gdGhpcy53aWRnZXQubWluRmlsdGVySXRlbXMsIHRoaXMucG9zaXRpb24gPSBcImJvdHRvbS1sZWZ0XCIsIHRoaXMucmVmZXJlbmNlRmlsdGVyUHJlZGljYXRlID0gdGhpcy53aWRnZXQucmVmZXJlbmNlRmlsdGVyUHJlZGljYXRlLCB0aGlzLnJlZmVyZW5jZUZpbHRlclRleHQgPSB0aGlzLndpZGdldC5yZWZlcmVuY2VGaWx0ZXJUZXh0LCB0aGlzLnJlZmVyZW5jZUxpc3RJdGVtQ3JlYXRlZEZ1bmN0aW9uID0gdGhpcy53aWRnZXQucmVmZXJlbmNlTGlzdEl0ZW1DcmVhdGVkRnVuY3Rpb24sIHRoaXMuc2VsZWN0ZWRJdGVtcyA9IHRoaXMud2lkZ2V0LnNlbGVjdGVkSXRlbXMsIHRoaXMuc2VsZWN0aW9uTW9kZSA9IHRoaXMud2lkZ2V0LnNlbGVjdGlvbk1vZGUsIHRoaXMuc2hvd0Nsb3NlQnV0dG9uID0gdGhpcy53aWRnZXQudmlzaWJsZUVsZW1lbnRzLmNsb3NlQnV0dG9uLCB0aGlzLnNob3dDb2xsYXBzZUJ1dHRvbiA9IHRoaXMud2lkZ2V0LnZpc2libGVFbGVtZW50cy5jb2xsYXBzZUJ1dHRvbiwgdGhpcy5zaG93RWRpdFRpdGxlQnV0dG9uID0gdGhpcy53aWRnZXQudmlzaWJsZUVsZW1lbnRzLmVkaXRUaXRsZUJ1dHRvbiwgdGhpcy5zaG93RXJyb3JzID0gdGhpcy53aWRnZXQudmlzaWJsZUVsZW1lbnRzLmVycm9ycywgdGhpcy5zaG93RmlsdGVyID0gdGhpcy53aWRnZXQudmlzaWJsZUVsZW1lbnRzLmZpbHRlciwgdGhpcy5zaG93VGVtcG9yYXJ5TGF5ZXJJbmRpY2F0b3JzID0gdGhpcy53aWRnZXQudmlzaWJsZUVsZW1lbnRzLnRlbXBvcmFyeUxheWVySW5kaWNhdG9ycywgdGhpcy5zdGF0ZSA9IHRoaXMudmlld01vZGVsLnN0YXRlLCB0aGlzLnZpc2liaWxpdHlBcHBlYXJhbmNlID0gdGhpcy53aWRnZXQudmlzaWJpbGl0eUFwcGVhcmFuY2UsIHRoaXMuYXJjZ2lzUHJvcGVydHlDaGFuZ2UgPSB0KCkoXCJzdGF0ZVwiKSwgdGhpcy5hcmNnaXNSZWFkeSA9IGEoKSwgdGhpcy5hcmNnaXNUcmlnZ2VyQWN0aW9uID0gaSgoKSA9PiB0aGlzLndpZGdldCwgXCJ0cmlnZ2VyLWFjdGlvblwiKTtcbiAgfVxuICBzdGF0aWMge1xuICAgIHRoaXMucHJvcGVydGllcyA9IHsgYXV0b0Rlc3Ryb3lEaXNhYmxlZDogNSwgYmFzZUZpbHRlclByZWRpY2F0ZTogMCwgYmFzZUZpbHRlclRleHQ6IDEsIGJhc2VJdGVtczogMzIsIGJhc2VMaXN0SXRlbUNyZWF0ZWRGdW5jdGlvbjogMCwgYmFzZW1hcFRpdGxlOiAxLCBjYXRhbG9nTGF5ZXJMaXN0OiAzMiwgY2F0YWxvZ09wdGlvbnM6IDAsIGNvbGxhcHNlZDogNywgZHJhZ0VuYWJsZWQ6IDUsIGVkaXRpbmdUaXRsZTogNSwgZmlsdGVyUGxhY2Vob2xkZXI6IDEsIGhlYWRpbmdMZXZlbDogOSwgaGlkZUJhc2VMYXllcnM6IDUsIGhpZGVGbG93OiA1LCBoaWRlSGVhZGluZzogNSwgaGlkZVJlZmVyZW5jZUxheWVyczogNSwgaGlkZVN0YXR1c0luZGljYXRvcnM6IDUsIGljb246IDEsIGxhYmVsOiAxLCBtaW5GaWx0ZXJJdGVtczogOSwgcG9zaXRpb246IDEsIHJlZmVyZW5jZUVsZW1lbnQ6IDEsIHJlZmVyZW5jZUZpbHRlclByZWRpY2F0ZTogMCwgcmVmZXJlbmNlRmlsdGVyVGV4dDogMSwgcmVmZXJlbmNlSXRlbXM6IDMyLCByZWZlcmVuY2VMaXN0SXRlbUNyZWF0ZWRGdW5jdGlvbjogMCwgc2VsZWN0ZWRJdGVtczogMCwgc2VsZWN0aW9uTW9kZTogMSwgc2hvd0Nsb3NlQnV0dG9uOiA1LCBzaG93Q29sbGFwc2VCdXR0b246IDUsIHNob3dFZGl0VGl0bGVCdXR0b246IDUsIHNob3dFcnJvcnM6IDUsIHNob3dGaWx0ZXI6IDUsIHNob3dUZW1wb3JhcnlMYXllckluZGljYXRvcnM6IDUsIHN0YXRlOiAzLCB2aXNpYmlsaXR5QXBwZWFyYW5jZTogMSB9O1xuICB9XG4gIHN0YXRpYyB7XG4gICAgdGhpcy5zaGFkb3dSb290T3B0aW9ucyA9IGw7XG4gIH1cbiAgc3RhdGljIHtcbiAgICB0aGlzLnN0eWxlcyA9IGQ7XG4gIH1cbiAgLyoqIEEgY29sbGVjdGlvbiBvZiBMaXN0SXRlbXMgcmVwcmVzZW50aW5nIHRoZSBiYXNlTGF5ZXJzLiAqL1xuICBnZXQgYmFzZUl0ZW1zKCkge1xuICAgIHJldHVybiB0aGlzLndpZGdldC5iYXNlSXRlbXM7XG4gIH1cbiAgLyoqIFRoZSBDYXRhbG9nTGF5ZXJMaXN0IHRoYXQgZGlzcGxheXMgYSBjYXRhbG9nIGxheWVyJ3MgZHluYW1pYyBncm91cCBsYXllci4gKi9cbiAgZ2V0IGNhdGFsb2dMYXllckxpc3QoKSB7XG4gICAgcmV0dXJuIHRoaXMud2lkZ2V0LmNhdGFsb2dMYXllckxpc3Q7XG4gIH1cbiAgLyoqIEEgY29sbGVjdGlvbiBvZiBMaXN0SXRlbXMgcmVwcmVzZW50aW5nIHRoZSByZWZlcmVuY2VMYXllcnMuICovXG4gIGdldCByZWZlcmVuY2VJdGVtcygpIHtcbiAgICByZXR1cm4gdGhpcy53aWRnZXQucmVmZXJlbmNlSXRlbXM7XG4gIH1cbiAgLy8gI2VuZHJlZ2lvblxuICAvLyAjcmVnaW9uIFB1YmxpYyBNZXRob2RzXG4gIC8qKiBQZXJtYW5lbnRseSBkZXN0cm95IHRoZSBjb21wb25lbnQgKi9cbiAgYXN5bmMgZGVzdHJveSgpIHtcbiAgICBhd2FpdCB0aGlzLm1hbmFnZXIuZGVzdHJveSgpO1xuICB9XG59XG5lKFwiYXJjZ2lzLWJhc2VtYXAtbGF5ZXItbGlzdFwiLCBjKTtcbmV4cG9ydCB7XG4gIGMgYXMgQXJjZ2lzQmFzZW1hcExheWVyTGlzdFxufTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==