"use strict";
(self["webpackChunkexb_client"] = self["webpackChunkexb_client"] || []).push([["vendors-node_modules_arcgis_map-components_dist_components_arcgis-utility-network-trace_custo-c07699"],{

/***/ "./node_modules/@arcgis/map-components/dist/chunks/component-utils.js":
/*!****************************************************************************!*\
  !*** ./node_modules/@arcgis/map-components/dist/chunks/component-utils.js ***!
  \****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   a: () => (/* binding */ p),
/* harmony export */   b: () => (/* binding */ P),
/* harmony export */   c: () => (/* binding */ H),
/* harmony export */   d: () => (/* binding */ L),
/* harmony export */   e: () => (/* binding */ O),
/* harmony export */   f: () => (/* binding */ x),
/* harmony export */   i: () => (/* binding */ N),
/* harmony export */   p: () => (/* binding */ u),
/* harmony export */   r: () => (/* binding */ S)
/* harmony export */ });
/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.32/esri/copyright.txt for details.
v4.32.1 */
function P(e, i) {
  Array.isArray(i) ? e._watchHandles = [...e._watchHandles, ...i] : e._watchHandles.push(i);
}
function p(e) {
  e.el.childElem && (e.el.childElem.ownedBy = e.el);
  const i = h(e);
  if (!i) {
    const t = y(e.referenceElement);
    if (!t) {
      g(e);
      return;
    }
    return f(t, e, !0), t;
  }
  return w(i, e.el.parent) || (e.el.parent = i, i.tagName.toLowerCase() === "arcgis-expand" ? v(i, e) : i.tagName.toLowerCase() === "arcgis-placement" ? C(i, e) : f(i, e, !1)), i;
}
function h({ el: e }) {
  for (let i = e.parentElement; i; i = i?.parentElement ?? null) {
    if (c.has(i.tagName.toLowerCase()))
      return i;
    if ("ownedBy" in i && i.ownedBy instanceof HTMLElement && c.has(i.ownedBy.tagName.toLowerCase()))
      return i.ownedBy;
  }
}
const c = /* @__PURE__ */ new Set([
  "arcgis-map",
  "arcgis-scene",
  "arcgis-link-chart",
  "arcgis-expand",
  "arcgis-placement"
]);
function w(e, i) {
  if (e !== i)
    return !1;
  const t = e.tagName.toLowerCase();
  return t === "arcgis-expand" || t === "arcgis-placement";
}
function l(e, i, t = "arcgisReady") {
  const r = e;
  if (typeof r.view?.ready == "boolean")
    i(r.view);
  else {
    let s = function(d) {
      d.target === e && (l(e, i, t), e.removeEventListener(t, s));
    };
    e.addEventListener(t, s);
  }
}
const v = (e, i) => l(e, (t) => {
  i.el.childElem && e.content != null && e.content.append(i.el.childElem), e.expandIcon = i.icon || i.widget?.icon || e.expandIcon, i.position = e.position, i.el.view = t;
}), C = (e, i) => l(e, (t) => {
  i.el.childElem && i.el.append(i.el.childElem), i.position = e.position, i.el.view = t;
}), f = (e, i, t) => l(
  e,
  (r) => {
    t ? g(i) : i.el.childElem && E(e, i), i.el.view = r;
  },
  "arcgisViewReadyChange"
);
function E(e, i) {
  const t = i.el.childElem ?? i.el, r = [...e.children], s = {};
  for (const a of r) {
    const n = a.getAttribute("position") ?? "manual";
    s[n] ??= [], s[n].push({ child: a, position: n, index: r.indexOf(a) });
  }
  const d = s[i.position ?? "manual"]?.findIndex(({ child: a }) => a === i.el), o = e.view.ui;
  o.remove(t), o.add(t, { position: i.position, index: d });
}
function L(e) {
  let i = !1, t = e.el.view;
  const r = Object.getOwnPropertyDescriptor(Object.getPrototypeOf(e.el), "view") ?? {
    get: () => t,
    set: (s) => t = s
  };
  Object.defineProperty(e.el, "view", {
    get: r.get.bind(e.el),
    set: (s) => {
      r.set.call(e.el, s), s && !i && (i = !0, e.arcgisReady.emit());
    },
    configurable: !0,
    enumerable: !0
  }), t && (e.el.view = t);
}
function x(e) {
  return e == null || e === "";
}
function H(e, i) {
  return i != null && e?.position === i.position && e?.heading === i.heading && e?.tilt === i.tilt && e?.fov === i.fov;
}
function N(e, i) {
  return i === void 0 || e?.targetGeometry !== i?.targetGeometry || e?.rotation !== i?.rotation || e?.scale !== i?.scale;
}
function O(e, i) {
  return u(i?.center, e);
}
function u(e, i) {
  if (typeof i == "string")
    return u(e, i.split(",").map(Number));
  if (!e)
    return i;
  if (Array.isArray(i)) {
    const t = i[0], r = i[1], s = i.length > 2 ? i[2] : void 0;
    if (t !== e.longitude || r !== e.latitude || s !== e.z)
      return i;
  } else if (i && !e?.equals(i))
    return i;
}
async function S(e, i) {
  i != null && (typeof i == "string" ? e.el.view = await b(i) : e.widget && (e.el.view = i.view));
}
async function b(e) {
  const i = y(e);
  return await new Promise((t) => {
    typeof i?.view?.ready == "boolean" ? t(i.view) : i && i.addEventListener("arcgisViewReadyChange", () => t(i.view), { once: !0 });
  });
}
function g(e) {
  e.el.childElem && (e.el.shadowRoot ?? e.el).append(e.el.childElem);
}
function y(e) {
  return typeof e != "string" ? e ?? void 0 : (e.includes("#") || e.includes(".") || e.includes("[") ? void 0 : document.querySelector(`#${e}`)) ?? document.querySelector(e) ?? void 0;
}



/***/ }),

/***/ "./node_modules/@arcgis/map-components/dist/chunks/disconnected.js":
/*!*************************************************************************!*\
  !*** ./node_modules/@arcgis/map-components/dist/chunks/disconnected.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   o: () => (/* binding */ a)
/* harmony export */ });
/* harmony import */ var _arcgis_components_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @arcgis/components-utils */ "./node_modules/@arcgis/components-utils/dist/index.js");

/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.32/esri/copyright.txt for details.
v4.32.1 */
function a(i) {
  i.el.childElem ? i.el.isConnected || (i.view?.ui ? i.view.ui.remove(i.el.childElem) : i.widget?.view && i.widget.view.ui.remove(i.el.childElem), i._watchHandles && i._watchHandles.forEach((o) => {
    o.remove();
  }), i._watchHandles = [], i.widget?.destroy()) : (0,_arcgis_components_utils__WEBPACK_IMPORTED_MODULE_0__.devToolsAwareTimeout)(() => {
    i.el.isConnected || (i.view?.ui ? i.view.ui.remove(i.el) : i.widget?.view && i.widget.view.ui.remove(i.el), i._watchHandles && i._watchHandles.forEach((o) => {
      o.remove();
    }), i._watchHandles = [], i.widget?.destroy());
  }, 1e3);
}



/***/ }),

/***/ "./node_modules/@arcgis/map-components/dist/components/arcgis-utility-network-trace/customElement.js":
/*!***********************************************************************************************************!*\
  !*** ./node_modules/@arcgis/map-components/dist/components/arcgis-utility-network-trace/customElement.js ***!
  \***********************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ArcgisUtilityNetworkTrace: () => (/* binding */ g)
/* harmony export */ });
/* harmony import */ var _chunks_runtime_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../chunks/runtime.js */ "./node_modules/@arcgis/map-components/dist/chunks/runtime.js");
/* harmony import */ var lit_html_directives_ref_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit-html/directives/ref.js */ "./node_modules/lit-html/development/directives/ref.js");
/* harmony import */ var _arcgis_core_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @arcgis/core/core/reactiveUtils.js */ "@arcgis/core/core/reactiveUtils.js");
/* harmony import */ var _arcgis_core_widgets_UtilityNetworkTrace_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @arcgis/core/widgets/UtilityNetworkTrace.js */ "@arcgis/core/widgets/UtilityNetworkTrace.js");
/* harmony import */ var _chunks_component_utils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../chunks/component-utils.js */ "./node_modules/@arcgis/map-components/dist/chunks/component-utils.js");
/* harmony import */ var _chunks_disconnected_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../chunks/disconnected.js */ "./node_modules/@arcgis/map-components/dist/chunks/disconnected.js");
/* harmony import */ var lit__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! lit */ "./node_modules/lit/index.js");
/* harmony import */ var _arcgis_lumina__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @arcgis/lumina */ "./node_modules/@arcgis/lumina/dist/index.js");








/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.32/esri/copyright.txt for details.
v4.32.1 */
class g extends _arcgis_lumina__WEBPACK_IMPORTED_MODULE_7__.LitElement {
  constructor() {
    super(...arguments), this._watchHandles = [], this.defaultGraphicColor = {
      color: [255, 255, 0, 0.6],
      haloOpacity: 0.9,
      fillOpacity: 0.2,
      hex: "#FFFF00"
    }, this.disabled = !1, this.enableResultArea = !1, this.flags = [], this.gdbVersion = "sde.DEFAULT", this.inputSettings = [], this.position = "bottom-left", this.selectOnCompleteDisabled = !1, this.selectedTraces = [], this.showGraphicsOnCompleteDisabled = !1, this.showSelectionAttributesDisabled = !1, this.arcgisAddFlag = (0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_7__.createEvent)(), this.arcgisAddFlagComplete = (0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_7__.createEvent)(), this.arcgisAddFlagError = (0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_7__.createEvent)(), this.arcgisAddResultArea = (0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_7__.createEvent)(), this.arcgisReady = (0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_7__.createEvent)(), this.arcgisRemoveResultArea = (0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_7__.createEvent)();
  }
  static {
    this.properties = { defaultGraphicColor: 0, disabled: 7, enableResultArea: 5, flags: 0, gdbVersion: 1, inputSettings: 0, position: 1, referenceElement: 1, resultAreaProperties: 0, selectOnCompleteDisabled: 5, selectedTraces: 0, showGraphicsOnCompleteDisabled: 5, showSelectionAttributesDisabled: 5, view: 0, widget: 0 };
  }
  static {
    this.shadowRootOptions = _arcgis_lumina__WEBPACK_IMPORTED_MODULE_7__.noShadowRoot;
  }
  // #endregion
  // #region Public Methods
  async checkCanTrace() {
    await this.widget?.checkCanTrace();
  }
  async confirmReset() {
    this.widget?.confirmReset();
  }
  // #endregion
  // #region Lifecycle
  willUpdate(e) {
    e.has("referenceElement") && this.referenceElementWatcher(this.referenceElement), e.has("enableResultArea") && this.enableResultAreaWatcher(this.enableResultArea), e.has("defaultGraphicColor") && this.defaultGraphicColorWatcher(this.defaultGraphicColor), e.has("disabled") && this.disabledWatcher(this.disabled, e.get("disabled")), e.has("flags") && this.flagsWatcher(this.flags), e.has("gdbVersion") && this.gdbVersionWatcher(this.gdbVersion), e.has("inputSettings") && this.inputSettingsWatcher(this.inputSettings), e.has("resultAreaProperties") && this.resultAreaProperties && this.resultAreaPropertiesWatcher(this.resultAreaProperties), e.has("selectedTraces") && this.selectedTracesWatcher(this.selectedTraces), e.has("selectOnCompleteDisabled") && this.selectOnCompleteDisabledWatcher(this.selectOnCompleteDisabled), e.has("showGraphicsOnCompleteDisabled") && this.showGraphicsOnCompleteDisabledWatcher(this.showGraphicsOnCompleteDisabled), e.has("showSelectionAttributesDisabled") && this.showSelectionAttributesDisabledWatcher(this.showSelectionAttributesDisabled), e.has("position") && this.positionWatcher(this.position), e.has("view") && this.viewWatcher(this.view);
  }
  async loaded() {
    const e = this._createParams(), i = new _arcgis_core_widgets_UtilityNetworkTrace_js__WEBPACK_IMPORTED_MODULE_3__["default"](e);
    this.widget = i, await this._addWatchers(), this._proxyEvents(), this._addContainer(), (0,_chunks_component_utils_js__WEBPACK_IMPORTED_MODULE_4__.d)(this), (0,_chunks_component_utils_js__WEBPACK_IMPORTED_MODULE_4__.a)(this);
  }
  disconnectedCallback() {
    super.disconnectedCallback(), (0,_chunks_disconnected_js__WEBPACK_IMPORTED_MODULE_5__.o)(this);
  }
  // #endregion
  // #region Private Methods
  referenceElementWatcher(e) {
    (0,_chunks_component_utils_js__WEBPACK_IMPORTED_MODULE_4__.r)(this, e);
  }
  enableResultAreaWatcher(e) {
    this.widget && (this.widget.enableResultArea = e);
  }
  defaultGraphicColorWatcher(e) {
    this.widget && (this.widget.defaultGraphicColor = e);
  }
  disabledWatcher(e, i) {
    this.widget && e !== i && (this.widget.disabled = e);
  }
  flagsWatcher(e) {
    this.widget && (this.widget.flags = e);
  }
  gdbVersionWatcher(e) {
    this.widget && (this.widget.gdbVersion = e);
  }
  inputSettingsWatcher(e) {
    this.widget && (this.widget.inputSettings = e);
  }
  resultAreaPropertiesWatcher(e) {
    this.widget && (this.widget.resultAreaProperties = e);
  }
  selectedTracesWatcher(e) {
    this.widget && (this.widget.selectedTraces = e);
  }
  selectOnCompleteDisabledWatcher(e) {
    e !== void 0 && this.widget && (this.widget.selectOnComplete = !e);
  }
  showGraphicsOnCompleteDisabledWatcher(e) {
    e !== void 0 && this.widget && (this.widget.showGraphicsOnComplete = !e);
  }
  showSelectionAttributesDisabledWatcher(e) {
    e !== void 0 && this.widget && (this.widget.showSelectionAttributes = !e);
  }
  positionWatcher(e) {
    e !== void 0 && this.widget && this.el.childElem && this.view.ui?.move(this.el.childElem, e);
  }
  viewWatcher(e) {
    e !== void 0 && this.widget && (this.widget.view = e);
  }
  _addContainer() {
    this.widget.container = this.el.childElem;
  }
  async _addWatchers() {
    (0,_chunks_component_utils_js__WEBPACK_IMPORTED_MODULE_4__.b)(this, (0,_arcgis_core_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_2__.watch)(() => this.widget.disabled, (e) => this.disabled = e));
  }
  _createParams() {
    const e = {};
    return this.defaultGraphicColor && (e.defaultGraphicColor = this.defaultGraphicColor), this.enableResultArea !== void 0 && (e.enableResultArea = this.enableResultArea), this.flags && (e.flags = this.flags), this.gdbVersion && (e.gdbVersion = this.gdbVersion), this.inputSettings && (e.inputSettings = this.inputSettings), this.resultAreaProperties && (e.resultAreaProperties = this.resultAreaProperties), this.selectedTraces && (e.selectedTraces = this.selectedTraces), this.selectOnCompleteDisabled !== void 0 && (e.selectOnComplete = !this.selectOnCompleteDisabled), this.showGraphicsOnCompleteDisabled !== void 0 && (e.showGraphicsOnComplete = !this.showGraphicsOnCompleteDisabled), this.showSelectionAttributesDisabled !== void 0 && (e.showSelectionAttributes = !this.showSelectionAttributesDisabled), this.view && (e.view = this.view), e;
  }
  _proxyEvents() {
    this.widget.on("add-flag", (e) => this.arcgisAddFlag.emit(e)), this.widget.on("add-flag-complete", (e) => this.arcgisAddFlagComplete.emit(e)), this.widget.on("add-flag-error", (e) => this.arcgisAddFlagError.emit(e)), this.widget.on("add-result-area", (e) => this.arcgisAddResultArea.emit(e)), this.widget.on("remove-result-area", (e) => this.arcgisRemoveResultArea.emit(e));
  }
  _setChildElement(e) {
    this.el.childElem = e;
  }
  // #endregion
  // #region Rendering
  render() {
    return (0,lit__WEBPACK_IMPORTED_MODULE_6__.html)`<div ${(0,lit_html_directives_ref_js__WEBPACK_IMPORTED_MODULE_1__.ref)(this._setChildElement)}></div>`;
  }
}
(0,_chunks_runtime_js__WEBPACK_IMPORTED_MODULE_0__.c)("arcgis-utility-network-trace", g);



/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2lkZ2V0cy9jaHVua3MvdmVuZG9ycy1ub2RlX21vZHVsZXNfYXJjZ2lzX21hcC1jb21wb25lbnRzX2Rpc3RfY29tcG9uZW50c19hcmNnaXMtdXRpbGl0eS1uZXR3b3JrLXRyYWNlX2N1c3RvLWMwNzY5OS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsT0FBTztBQUNwQixnQ0FBZ0MsR0FBRztBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsNENBQTRDO0FBQ3pFO0FBQ0Esb0RBQW9ELFVBQVU7QUFDOUQsMEJBQTBCLGdDQUFnQztBQUMxRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlIQUF5SCxVQUFVO0FBQ25JLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMklBQTJJLEVBQUU7QUFDN0k7QUFXRTs7Ozs7Ozs7Ozs7Ozs7OztBQ3ZJbUU7QUFDckU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRyxnREFBZ0QsOEVBQUM7QUFDcEQ7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFHRTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNmK0M7QUFDSztBQUNVO0FBQ0o7QUFDcUI7QUFDM0I7QUFDdEI7QUFDc0Q7QUFDdEY7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLHNEQUFDO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUssb1VBQW9VLDJEQUFDLGlDQUFpQywyREFBQyw4QkFBOEIsMkRBQUMsK0JBQStCLDJEQUFDLHVCQUF1QiwyREFBQyxrQ0FBa0MsMkRBQUM7QUFDdGU7QUFDQTtBQUNBLHdCQUF3QjtBQUN4QjtBQUNBO0FBQ0EsNkJBQTZCLHdEQUFDO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRDQUE0QyxtRkFBQztBQUM3QywyRkFBMkYsNkRBQUMsUUFBUSw2REFBQztBQUNyRztBQUNBO0FBQ0Esa0NBQWtDLDBEQUFDO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSw2REFBQztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLDZEQUFDLE9BQU8seUVBQUM7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyx5Q0FBQyxRQUFRLCtEQUFDLHdCQUF3QjtBQUM3QztBQUNBO0FBQ0EscURBQUM7QUFHQyIsInNvdXJjZXMiOlsid2VicGFjazovL2V4Yi1jbGllbnQvLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9tYXAtY29tcG9uZW50cy9kaXN0L2NodW5rcy9jb21wb25lbnQtdXRpbHMuanMiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL21hcC1jb21wb25lbnRzL2Rpc3QvY2h1bmtzL2Rpc2Nvbm5lY3RlZC5qcyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vbm9kZV9tb2R1bGVzL0BhcmNnaXMvbWFwLWNvbXBvbmVudHMvZGlzdC9jb21wb25lbnRzL2FyY2dpcy11dGlsaXR5LW5ldHdvcmstdHJhY2UvY3VzdG9tRWxlbWVudC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiEgQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFc3JpLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4zMi9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG52NC4zMi4xICovXG5mdW5jdGlvbiBQKGUsIGkpIHtcbiAgQXJyYXkuaXNBcnJheShpKSA/IGUuX3dhdGNoSGFuZGxlcyA9IFsuLi5lLl93YXRjaEhhbmRsZXMsIC4uLmldIDogZS5fd2F0Y2hIYW5kbGVzLnB1c2goaSk7XG59XG5mdW5jdGlvbiBwKGUpIHtcbiAgZS5lbC5jaGlsZEVsZW0gJiYgKGUuZWwuY2hpbGRFbGVtLm93bmVkQnkgPSBlLmVsKTtcbiAgY29uc3QgaSA9IGgoZSk7XG4gIGlmICghaSkge1xuICAgIGNvbnN0IHQgPSB5KGUucmVmZXJlbmNlRWxlbWVudCk7XG4gICAgaWYgKCF0KSB7XG4gICAgICBnKGUpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICByZXR1cm4gZih0LCBlLCAhMCksIHQ7XG4gIH1cbiAgcmV0dXJuIHcoaSwgZS5lbC5wYXJlbnQpIHx8IChlLmVsLnBhcmVudCA9IGksIGkudGFnTmFtZS50b0xvd2VyQ2FzZSgpID09PSBcImFyY2dpcy1leHBhbmRcIiA/IHYoaSwgZSkgOiBpLnRhZ05hbWUudG9Mb3dlckNhc2UoKSA9PT0gXCJhcmNnaXMtcGxhY2VtZW50XCIgPyBDKGksIGUpIDogZihpLCBlLCAhMSkpLCBpO1xufVxuZnVuY3Rpb24gaCh7IGVsOiBlIH0pIHtcbiAgZm9yIChsZXQgaSA9IGUucGFyZW50RWxlbWVudDsgaTsgaSA9IGk/LnBhcmVudEVsZW1lbnQgPz8gbnVsbCkge1xuICAgIGlmIChjLmhhcyhpLnRhZ05hbWUudG9Mb3dlckNhc2UoKSkpXG4gICAgICByZXR1cm4gaTtcbiAgICBpZiAoXCJvd25lZEJ5XCIgaW4gaSAmJiBpLm93bmVkQnkgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCAmJiBjLmhhcyhpLm93bmVkQnkudGFnTmFtZS50b0xvd2VyQ2FzZSgpKSlcbiAgICAgIHJldHVybiBpLm93bmVkQnk7XG4gIH1cbn1cbmNvbnN0IGMgPSAvKiBAX19QVVJFX18gKi8gbmV3IFNldChbXG4gIFwiYXJjZ2lzLW1hcFwiLFxuICBcImFyY2dpcy1zY2VuZVwiLFxuICBcImFyY2dpcy1saW5rLWNoYXJ0XCIsXG4gIFwiYXJjZ2lzLWV4cGFuZFwiLFxuICBcImFyY2dpcy1wbGFjZW1lbnRcIlxuXSk7XG5mdW5jdGlvbiB3KGUsIGkpIHtcbiAgaWYgKGUgIT09IGkpXG4gICAgcmV0dXJuICExO1xuICBjb25zdCB0ID0gZS50YWdOYW1lLnRvTG93ZXJDYXNlKCk7XG4gIHJldHVybiB0ID09PSBcImFyY2dpcy1leHBhbmRcIiB8fCB0ID09PSBcImFyY2dpcy1wbGFjZW1lbnRcIjtcbn1cbmZ1bmN0aW9uIGwoZSwgaSwgdCA9IFwiYXJjZ2lzUmVhZHlcIikge1xuICBjb25zdCByID0gZTtcbiAgaWYgKHR5cGVvZiByLnZpZXc/LnJlYWR5ID09IFwiYm9vbGVhblwiKVxuICAgIGkoci52aWV3KTtcbiAgZWxzZSB7XG4gICAgbGV0IHMgPSBmdW5jdGlvbihkKSB7XG4gICAgICBkLnRhcmdldCA9PT0gZSAmJiAobChlLCBpLCB0KSwgZS5yZW1vdmVFdmVudExpc3RlbmVyKHQsIHMpKTtcbiAgICB9O1xuICAgIGUuYWRkRXZlbnRMaXN0ZW5lcih0LCBzKTtcbiAgfVxufVxuY29uc3QgdiA9IChlLCBpKSA9PiBsKGUsICh0KSA9PiB7XG4gIGkuZWwuY2hpbGRFbGVtICYmIGUuY29udGVudCAhPSBudWxsICYmIGUuY29udGVudC5hcHBlbmQoaS5lbC5jaGlsZEVsZW0pLCBlLmV4cGFuZEljb24gPSBpLmljb24gfHwgaS53aWRnZXQ/Lmljb24gfHwgZS5leHBhbmRJY29uLCBpLnBvc2l0aW9uID0gZS5wb3NpdGlvbiwgaS5lbC52aWV3ID0gdDtcbn0pLCBDID0gKGUsIGkpID0+IGwoZSwgKHQpID0+IHtcbiAgaS5lbC5jaGlsZEVsZW0gJiYgaS5lbC5hcHBlbmQoaS5lbC5jaGlsZEVsZW0pLCBpLnBvc2l0aW9uID0gZS5wb3NpdGlvbiwgaS5lbC52aWV3ID0gdDtcbn0pLCBmID0gKGUsIGksIHQpID0+IGwoXG4gIGUsXG4gIChyKSA9PiB7XG4gICAgdCA/IGcoaSkgOiBpLmVsLmNoaWxkRWxlbSAmJiBFKGUsIGkpLCBpLmVsLnZpZXcgPSByO1xuICB9LFxuICBcImFyY2dpc1ZpZXdSZWFkeUNoYW5nZVwiXG4pO1xuZnVuY3Rpb24gRShlLCBpKSB7XG4gIGNvbnN0IHQgPSBpLmVsLmNoaWxkRWxlbSA/PyBpLmVsLCByID0gWy4uLmUuY2hpbGRyZW5dLCBzID0ge307XG4gIGZvciAoY29uc3QgYSBvZiByKSB7XG4gICAgY29uc3QgbiA9IGEuZ2V0QXR0cmlidXRlKFwicG9zaXRpb25cIikgPz8gXCJtYW51YWxcIjtcbiAgICBzW25dID8/PSBbXSwgc1tuXS5wdXNoKHsgY2hpbGQ6IGEsIHBvc2l0aW9uOiBuLCBpbmRleDogci5pbmRleE9mKGEpIH0pO1xuICB9XG4gIGNvbnN0IGQgPSBzW2kucG9zaXRpb24gPz8gXCJtYW51YWxcIl0/LmZpbmRJbmRleCgoeyBjaGlsZDogYSB9KSA9PiBhID09PSBpLmVsKSwgbyA9IGUudmlldy51aTtcbiAgby5yZW1vdmUodCksIG8uYWRkKHQsIHsgcG9zaXRpb246IGkucG9zaXRpb24sIGluZGV4OiBkIH0pO1xufVxuZnVuY3Rpb24gTChlKSB7XG4gIGxldCBpID0gITEsIHQgPSBlLmVsLnZpZXc7XG4gIGNvbnN0IHIgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKE9iamVjdC5nZXRQcm90b3R5cGVPZihlLmVsKSwgXCJ2aWV3XCIpID8/IHtcbiAgICBnZXQ6ICgpID0+IHQsXG4gICAgc2V0OiAocykgPT4gdCA9IHNcbiAgfTtcbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGUuZWwsIFwidmlld1wiLCB7XG4gICAgZ2V0OiByLmdldC5iaW5kKGUuZWwpLFxuICAgIHNldDogKHMpID0+IHtcbiAgICAgIHIuc2V0LmNhbGwoZS5lbCwgcyksIHMgJiYgIWkgJiYgKGkgPSAhMCwgZS5hcmNnaXNSZWFkeS5lbWl0KCkpO1xuICAgIH0sXG4gICAgY29uZmlndXJhYmxlOiAhMCxcbiAgICBlbnVtZXJhYmxlOiAhMFxuICB9KSwgdCAmJiAoZS5lbC52aWV3ID0gdCk7XG59XG5mdW5jdGlvbiB4KGUpIHtcbiAgcmV0dXJuIGUgPT0gbnVsbCB8fCBlID09PSBcIlwiO1xufVxuZnVuY3Rpb24gSChlLCBpKSB7XG4gIHJldHVybiBpICE9IG51bGwgJiYgZT8ucG9zaXRpb24gPT09IGkucG9zaXRpb24gJiYgZT8uaGVhZGluZyA9PT0gaS5oZWFkaW5nICYmIGU/LnRpbHQgPT09IGkudGlsdCAmJiBlPy5mb3YgPT09IGkuZm92O1xufVxuZnVuY3Rpb24gTihlLCBpKSB7XG4gIHJldHVybiBpID09PSB2b2lkIDAgfHwgZT8udGFyZ2V0R2VvbWV0cnkgIT09IGk/LnRhcmdldEdlb21ldHJ5IHx8IGU/LnJvdGF0aW9uICE9PSBpPy5yb3RhdGlvbiB8fCBlPy5zY2FsZSAhPT0gaT8uc2NhbGU7XG59XG5mdW5jdGlvbiBPKGUsIGkpIHtcbiAgcmV0dXJuIHUoaT8uY2VudGVyLCBlKTtcbn1cbmZ1bmN0aW9uIHUoZSwgaSkge1xuICBpZiAodHlwZW9mIGkgPT0gXCJzdHJpbmdcIilcbiAgICByZXR1cm4gdShlLCBpLnNwbGl0KFwiLFwiKS5tYXAoTnVtYmVyKSk7XG4gIGlmICghZSlcbiAgICByZXR1cm4gaTtcbiAgaWYgKEFycmF5LmlzQXJyYXkoaSkpIHtcbiAgICBjb25zdCB0ID0gaVswXSwgciA9IGlbMV0sIHMgPSBpLmxlbmd0aCA+IDIgPyBpWzJdIDogdm9pZCAwO1xuICAgIGlmICh0ICE9PSBlLmxvbmdpdHVkZSB8fCByICE9PSBlLmxhdGl0dWRlIHx8IHMgIT09IGUueilcbiAgICAgIHJldHVybiBpO1xuICB9IGVsc2UgaWYgKGkgJiYgIWU/LmVxdWFscyhpKSlcbiAgICByZXR1cm4gaTtcbn1cbmFzeW5jIGZ1bmN0aW9uIFMoZSwgaSkge1xuICBpICE9IG51bGwgJiYgKHR5cGVvZiBpID09IFwic3RyaW5nXCIgPyBlLmVsLnZpZXcgPSBhd2FpdCBiKGkpIDogZS53aWRnZXQgJiYgKGUuZWwudmlldyA9IGkudmlldykpO1xufVxuYXN5bmMgZnVuY3Rpb24gYihlKSB7XG4gIGNvbnN0IGkgPSB5KGUpO1xuICByZXR1cm4gYXdhaXQgbmV3IFByb21pc2UoKHQpID0+IHtcbiAgICB0eXBlb2YgaT8udmlldz8ucmVhZHkgPT0gXCJib29sZWFuXCIgPyB0KGkudmlldykgOiBpICYmIGkuYWRkRXZlbnRMaXN0ZW5lcihcImFyY2dpc1ZpZXdSZWFkeUNoYW5nZVwiLCAoKSA9PiB0KGkudmlldyksIHsgb25jZTogITAgfSk7XG4gIH0pO1xufVxuZnVuY3Rpb24gZyhlKSB7XG4gIGUuZWwuY2hpbGRFbGVtICYmIChlLmVsLnNoYWRvd1Jvb3QgPz8gZS5lbCkuYXBwZW5kKGUuZWwuY2hpbGRFbGVtKTtcbn1cbmZ1bmN0aW9uIHkoZSkge1xuICByZXR1cm4gdHlwZW9mIGUgIT0gXCJzdHJpbmdcIiA/IGUgPz8gdm9pZCAwIDogKGUuaW5jbHVkZXMoXCIjXCIpIHx8IGUuaW5jbHVkZXMoXCIuXCIpIHx8IGUuaW5jbHVkZXMoXCJbXCIpID8gdm9pZCAwIDogZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgIyR7ZX1gKSkgPz8gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihlKSA/PyB2b2lkIDA7XG59XG5leHBvcnQge1xuICBwIGFzIGEsXG4gIFAgYXMgYixcbiAgSCBhcyBjLFxuICBMIGFzIGQsXG4gIE8gYXMgZSxcbiAgeCBhcyBmLFxuICBOIGFzIGksXG4gIHUgYXMgcCxcbiAgUyBhcyByXG59O1xuIiwiaW1wb3J0IHsgZGV2VG9vbHNBd2FyZVRpbWVvdXQgYXMgZCB9IGZyb20gXCJAYXJjZ2lzL2NvbXBvbmVudHMtdXRpbHNcIjtcbi8qISBBbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVzcmksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjMyL2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbnY0LjMyLjEgKi9cbmZ1bmN0aW9uIGEoaSkge1xuICBpLmVsLmNoaWxkRWxlbSA/IGkuZWwuaXNDb25uZWN0ZWQgfHwgKGkudmlldz8udWkgPyBpLnZpZXcudWkucmVtb3ZlKGkuZWwuY2hpbGRFbGVtKSA6IGkud2lkZ2V0Py52aWV3ICYmIGkud2lkZ2V0LnZpZXcudWkucmVtb3ZlKGkuZWwuY2hpbGRFbGVtKSwgaS5fd2F0Y2hIYW5kbGVzICYmIGkuX3dhdGNoSGFuZGxlcy5mb3JFYWNoKChvKSA9PiB7XG4gICAgby5yZW1vdmUoKTtcbiAgfSksIGkuX3dhdGNoSGFuZGxlcyA9IFtdLCBpLndpZGdldD8uZGVzdHJveSgpKSA6IGQoKCkgPT4ge1xuICAgIGkuZWwuaXNDb25uZWN0ZWQgfHwgKGkudmlldz8udWkgPyBpLnZpZXcudWkucmVtb3ZlKGkuZWwpIDogaS53aWRnZXQ/LnZpZXcgJiYgaS53aWRnZXQudmlldy51aS5yZW1vdmUoaS5lbCksIGkuX3dhdGNoSGFuZGxlcyAmJiBpLl93YXRjaEhhbmRsZXMuZm9yRWFjaCgobykgPT4ge1xuICAgICAgby5yZW1vdmUoKTtcbiAgICB9KSwgaS5fd2F0Y2hIYW5kbGVzID0gW10sIGkud2lkZ2V0Py5kZXN0cm95KCkpO1xuICB9LCAxZTMpO1xufVxuZXhwb3J0IHtcbiAgYSBhcyBvXG59O1xuIiwiaW1wb3J0IHsgYyBhcyBzIH0gZnJvbSBcIi4uLy4uL2NodW5rcy9ydW50aW1lLmpzXCI7XG5pbXBvcnQgeyByZWYgYXMgciB9IGZyb20gXCJsaXQtaHRtbC9kaXJlY3RpdmVzL3JlZi5qc1wiO1xuaW1wb3J0IHsgd2F0Y2ggYXMgYSB9IGZyb20gXCJAYXJjZ2lzL2NvcmUvY29yZS9yZWFjdGl2ZVV0aWxzLmpzXCI7XG5pbXBvcnQgaCBmcm9tIFwiQGFyY2dpcy9jb3JlL3dpZGdldHMvVXRpbGl0eU5ldHdvcmtUcmFjZS5qc1wiO1xuaW1wb3J0IHsgZCBhcyBsLCBhIGFzIG8sIHIgYXMgZCwgYiBhcyBjIH0gZnJvbSBcIi4uLy4uL2NodW5rcy9jb21wb25lbnQtdXRpbHMuanNcIjtcbmltcG9ydCB7IG8gYXMgbiB9IGZyb20gXCIuLi8uLi9jaHVua3MvZGlzY29ubmVjdGVkLmpzXCI7XG5pbXBvcnQgeyBodG1sIGFzIHAgfSBmcm9tIFwibGl0XCI7XG5pbXBvcnQgeyBMaXRFbGVtZW50IGFzIGYsIGNyZWF0ZUV2ZW50IGFzIHQsIG5vU2hhZG93Um9vdCBhcyB3IH0gZnJvbSBcIkBhcmNnaXMvbHVtaW5hXCI7XG4vKiEgQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFc3JpLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4zMi9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG52NC4zMi4xICovXG5jbGFzcyBnIGV4dGVuZHMgZiB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKC4uLmFyZ3VtZW50cyksIHRoaXMuX3dhdGNoSGFuZGxlcyA9IFtdLCB0aGlzLmRlZmF1bHRHcmFwaGljQ29sb3IgPSB7XG4gICAgICBjb2xvcjogWzI1NSwgMjU1LCAwLCAwLjZdLFxuICAgICAgaGFsb09wYWNpdHk6IDAuOSxcbiAgICAgIGZpbGxPcGFjaXR5OiAwLjIsXG4gICAgICBoZXg6IFwiI0ZGRkYwMFwiXG4gICAgfSwgdGhpcy5kaXNhYmxlZCA9ICExLCB0aGlzLmVuYWJsZVJlc3VsdEFyZWEgPSAhMSwgdGhpcy5mbGFncyA9IFtdLCB0aGlzLmdkYlZlcnNpb24gPSBcInNkZS5ERUZBVUxUXCIsIHRoaXMuaW5wdXRTZXR0aW5ncyA9IFtdLCB0aGlzLnBvc2l0aW9uID0gXCJib3R0b20tbGVmdFwiLCB0aGlzLnNlbGVjdE9uQ29tcGxldGVEaXNhYmxlZCA9ICExLCB0aGlzLnNlbGVjdGVkVHJhY2VzID0gW10sIHRoaXMuc2hvd0dyYXBoaWNzT25Db21wbGV0ZURpc2FibGVkID0gITEsIHRoaXMuc2hvd1NlbGVjdGlvbkF0dHJpYnV0ZXNEaXNhYmxlZCA9ICExLCB0aGlzLmFyY2dpc0FkZEZsYWcgPSB0KCksIHRoaXMuYXJjZ2lzQWRkRmxhZ0NvbXBsZXRlID0gdCgpLCB0aGlzLmFyY2dpc0FkZEZsYWdFcnJvciA9IHQoKSwgdGhpcy5hcmNnaXNBZGRSZXN1bHRBcmVhID0gdCgpLCB0aGlzLmFyY2dpc1JlYWR5ID0gdCgpLCB0aGlzLmFyY2dpc1JlbW92ZVJlc3VsdEFyZWEgPSB0KCk7XG4gIH1cbiAgc3RhdGljIHtcbiAgICB0aGlzLnByb3BlcnRpZXMgPSB7IGRlZmF1bHRHcmFwaGljQ29sb3I6IDAsIGRpc2FibGVkOiA3LCBlbmFibGVSZXN1bHRBcmVhOiA1LCBmbGFnczogMCwgZ2RiVmVyc2lvbjogMSwgaW5wdXRTZXR0aW5nczogMCwgcG9zaXRpb246IDEsIHJlZmVyZW5jZUVsZW1lbnQ6IDEsIHJlc3VsdEFyZWFQcm9wZXJ0aWVzOiAwLCBzZWxlY3RPbkNvbXBsZXRlRGlzYWJsZWQ6IDUsIHNlbGVjdGVkVHJhY2VzOiAwLCBzaG93R3JhcGhpY3NPbkNvbXBsZXRlRGlzYWJsZWQ6IDUsIHNob3dTZWxlY3Rpb25BdHRyaWJ1dGVzRGlzYWJsZWQ6IDUsIHZpZXc6IDAsIHdpZGdldDogMCB9O1xuICB9XG4gIHN0YXRpYyB7XG4gICAgdGhpcy5zaGFkb3dSb290T3B0aW9ucyA9IHc7XG4gIH1cbiAgLy8gI2VuZHJlZ2lvblxuICAvLyAjcmVnaW9uIFB1YmxpYyBNZXRob2RzXG4gIGFzeW5jIGNoZWNrQ2FuVHJhY2UoKSB7XG4gICAgYXdhaXQgdGhpcy53aWRnZXQ/LmNoZWNrQ2FuVHJhY2UoKTtcbiAgfVxuICBhc3luYyBjb25maXJtUmVzZXQoKSB7XG4gICAgdGhpcy53aWRnZXQ/LmNvbmZpcm1SZXNldCgpO1xuICB9XG4gIC8vICNlbmRyZWdpb25cbiAgLy8gI3JlZ2lvbiBMaWZlY3ljbGVcbiAgd2lsbFVwZGF0ZShlKSB7XG4gICAgZS5oYXMoXCJyZWZlcmVuY2VFbGVtZW50XCIpICYmIHRoaXMucmVmZXJlbmNlRWxlbWVudFdhdGNoZXIodGhpcy5yZWZlcmVuY2VFbGVtZW50KSwgZS5oYXMoXCJlbmFibGVSZXN1bHRBcmVhXCIpICYmIHRoaXMuZW5hYmxlUmVzdWx0QXJlYVdhdGNoZXIodGhpcy5lbmFibGVSZXN1bHRBcmVhKSwgZS5oYXMoXCJkZWZhdWx0R3JhcGhpY0NvbG9yXCIpICYmIHRoaXMuZGVmYXVsdEdyYXBoaWNDb2xvcldhdGNoZXIodGhpcy5kZWZhdWx0R3JhcGhpY0NvbG9yKSwgZS5oYXMoXCJkaXNhYmxlZFwiKSAmJiB0aGlzLmRpc2FibGVkV2F0Y2hlcih0aGlzLmRpc2FibGVkLCBlLmdldChcImRpc2FibGVkXCIpKSwgZS5oYXMoXCJmbGFnc1wiKSAmJiB0aGlzLmZsYWdzV2F0Y2hlcih0aGlzLmZsYWdzKSwgZS5oYXMoXCJnZGJWZXJzaW9uXCIpICYmIHRoaXMuZ2RiVmVyc2lvbldhdGNoZXIodGhpcy5nZGJWZXJzaW9uKSwgZS5oYXMoXCJpbnB1dFNldHRpbmdzXCIpICYmIHRoaXMuaW5wdXRTZXR0aW5nc1dhdGNoZXIodGhpcy5pbnB1dFNldHRpbmdzKSwgZS5oYXMoXCJyZXN1bHRBcmVhUHJvcGVydGllc1wiKSAmJiB0aGlzLnJlc3VsdEFyZWFQcm9wZXJ0aWVzICYmIHRoaXMucmVzdWx0QXJlYVByb3BlcnRpZXNXYXRjaGVyKHRoaXMucmVzdWx0QXJlYVByb3BlcnRpZXMpLCBlLmhhcyhcInNlbGVjdGVkVHJhY2VzXCIpICYmIHRoaXMuc2VsZWN0ZWRUcmFjZXNXYXRjaGVyKHRoaXMuc2VsZWN0ZWRUcmFjZXMpLCBlLmhhcyhcInNlbGVjdE9uQ29tcGxldGVEaXNhYmxlZFwiKSAmJiB0aGlzLnNlbGVjdE9uQ29tcGxldGVEaXNhYmxlZFdhdGNoZXIodGhpcy5zZWxlY3RPbkNvbXBsZXRlRGlzYWJsZWQpLCBlLmhhcyhcInNob3dHcmFwaGljc09uQ29tcGxldGVEaXNhYmxlZFwiKSAmJiB0aGlzLnNob3dHcmFwaGljc09uQ29tcGxldGVEaXNhYmxlZFdhdGNoZXIodGhpcy5zaG93R3JhcGhpY3NPbkNvbXBsZXRlRGlzYWJsZWQpLCBlLmhhcyhcInNob3dTZWxlY3Rpb25BdHRyaWJ1dGVzRGlzYWJsZWRcIikgJiYgdGhpcy5zaG93U2VsZWN0aW9uQXR0cmlidXRlc0Rpc2FibGVkV2F0Y2hlcih0aGlzLnNob3dTZWxlY3Rpb25BdHRyaWJ1dGVzRGlzYWJsZWQpLCBlLmhhcyhcInBvc2l0aW9uXCIpICYmIHRoaXMucG9zaXRpb25XYXRjaGVyKHRoaXMucG9zaXRpb24pLCBlLmhhcyhcInZpZXdcIikgJiYgdGhpcy52aWV3V2F0Y2hlcih0aGlzLnZpZXcpO1xuICB9XG4gIGFzeW5jIGxvYWRlZCgpIHtcbiAgICBjb25zdCBlID0gdGhpcy5fY3JlYXRlUGFyYW1zKCksIGkgPSBuZXcgaChlKTtcbiAgICB0aGlzLndpZGdldCA9IGksIGF3YWl0IHRoaXMuX2FkZFdhdGNoZXJzKCksIHRoaXMuX3Byb3h5RXZlbnRzKCksIHRoaXMuX2FkZENvbnRhaW5lcigpLCBsKHRoaXMpLCBvKHRoaXMpO1xuICB9XG4gIGRpc2Nvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgIHN1cGVyLmRpc2Nvbm5lY3RlZENhbGxiYWNrKCksIG4odGhpcyk7XG4gIH1cbiAgLy8gI2VuZHJlZ2lvblxuICAvLyAjcmVnaW9uIFByaXZhdGUgTWV0aG9kc1xuICByZWZlcmVuY2VFbGVtZW50V2F0Y2hlcihlKSB7XG4gICAgZCh0aGlzLCBlKTtcbiAgfVxuICBlbmFibGVSZXN1bHRBcmVhV2F0Y2hlcihlKSB7XG4gICAgdGhpcy53aWRnZXQgJiYgKHRoaXMud2lkZ2V0LmVuYWJsZVJlc3VsdEFyZWEgPSBlKTtcbiAgfVxuICBkZWZhdWx0R3JhcGhpY0NvbG9yV2F0Y2hlcihlKSB7XG4gICAgdGhpcy53aWRnZXQgJiYgKHRoaXMud2lkZ2V0LmRlZmF1bHRHcmFwaGljQ29sb3IgPSBlKTtcbiAgfVxuICBkaXNhYmxlZFdhdGNoZXIoZSwgaSkge1xuICAgIHRoaXMud2lkZ2V0ICYmIGUgIT09IGkgJiYgKHRoaXMud2lkZ2V0LmRpc2FibGVkID0gZSk7XG4gIH1cbiAgZmxhZ3NXYXRjaGVyKGUpIHtcbiAgICB0aGlzLndpZGdldCAmJiAodGhpcy53aWRnZXQuZmxhZ3MgPSBlKTtcbiAgfVxuICBnZGJWZXJzaW9uV2F0Y2hlcihlKSB7XG4gICAgdGhpcy53aWRnZXQgJiYgKHRoaXMud2lkZ2V0LmdkYlZlcnNpb24gPSBlKTtcbiAgfVxuICBpbnB1dFNldHRpbmdzV2F0Y2hlcihlKSB7XG4gICAgdGhpcy53aWRnZXQgJiYgKHRoaXMud2lkZ2V0LmlucHV0U2V0dGluZ3MgPSBlKTtcbiAgfVxuICByZXN1bHRBcmVhUHJvcGVydGllc1dhdGNoZXIoZSkge1xuICAgIHRoaXMud2lkZ2V0ICYmICh0aGlzLndpZGdldC5yZXN1bHRBcmVhUHJvcGVydGllcyA9IGUpO1xuICB9XG4gIHNlbGVjdGVkVHJhY2VzV2F0Y2hlcihlKSB7XG4gICAgdGhpcy53aWRnZXQgJiYgKHRoaXMud2lkZ2V0LnNlbGVjdGVkVHJhY2VzID0gZSk7XG4gIH1cbiAgc2VsZWN0T25Db21wbGV0ZURpc2FibGVkV2F0Y2hlcihlKSB7XG4gICAgZSAhPT0gdm9pZCAwICYmIHRoaXMud2lkZ2V0ICYmICh0aGlzLndpZGdldC5zZWxlY3RPbkNvbXBsZXRlID0gIWUpO1xuICB9XG4gIHNob3dHcmFwaGljc09uQ29tcGxldGVEaXNhYmxlZFdhdGNoZXIoZSkge1xuICAgIGUgIT09IHZvaWQgMCAmJiB0aGlzLndpZGdldCAmJiAodGhpcy53aWRnZXQuc2hvd0dyYXBoaWNzT25Db21wbGV0ZSA9ICFlKTtcbiAgfVxuICBzaG93U2VsZWN0aW9uQXR0cmlidXRlc0Rpc2FibGVkV2F0Y2hlcihlKSB7XG4gICAgZSAhPT0gdm9pZCAwICYmIHRoaXMud2lkZ2V0ICYmICh0aGlzLndpZGdldC5zaG93U2VsZWN0aW9uQXR0cmlidXRlcyA9ICFlKTtcbiAgfVxuICBwb3NpdGlvbldhdGNoZXIoZSkge1xuICAgIGUgIT09IHZvaWQgMCAmJiB0aGlzLndpZGdldCAmJiB0aGlzLmVsLmNoaWxkRWxlbSAmJiB0aGlzLnZpZXcudWk/Lm1vdmUodGhpcy5lbC5jaGlsZEVsZW0sIGUpO1xuICB9XG4gIHZpZXdXYXRjaGVyKGUpIHtcbiAgICBlICE9PSB2b2lkIDAgJiYgdGhpcy53aWRnZXQgJiYgKHRoaXMud2lkZ2V0LnZpZXcgPSBlKTtcbiAgfVxuICBfYWRkQ29udGFpbmVyKCkge1xuICAgIHRoaXMud2lkZ2V0LmNvbnRhaW5lciA9IHRoaXMuZWwuY2hpbGRFbGVtO1xuICB9XG4gIGFzeW5jIF9hZGRXYXRjaGVycygpIHtcbiAgICBjKHRoaXMsIGEoKCkgPT4gdGhpcy53aWRnZXQuZGlzYWJsZWQsIChlKSA9PiB0aGlzLmRpc2FibGVkID0gZSkpO1xuICB9XG4gIF9jcmVhdGVQYXJhbXMoKSB7XG4gICAgY29uc3QgZSA9IHt9O1xuICAgIHJldHVybiB0aGlzLmRlZmF1bHRHcmFwaGljQ29sb3IgJiYgKGUuZGVmYXVsdEdyYXBoaWNDb2xvciA9IHRoaXMuZGVmYXVsdEdyYXBoaWNDb2xvciksIHRoaXMuZW5hYmxlUmVzdWx0QXJlYSAhPT0gdm9pZCAwICYmIChlLmVuYWJsZVJlc3VsdEFyZWEgPSB0aGlzLmVuYWJsZVJlc3VsdEFyZWEpLCB0aGlzLmZsYWdzICYmIChlLmZsYWdzID0gdGhpcy5mbGFncyksIHRoaXMuZ2RiVmVyc2lvbiAmJiAoZS5nZGJWZXJzaW9uID0gdGhpcy5nZGJWZXJzaW9uKSwgdGhpcy5pbnB1dFNldHRpbmdzICYmIChlLmlucHV0U2V0dGluZ3MgPSB0aGlzLmlucHV0U2V0dGluZ3MpLCB0aGlzLnJlc3VsdEFyZWFQcm9wZXJ0aWVzICYmIChlLnJlc3VsdEFyZWFQcm9wZXJ0aWVzID0gdGhpcy5yZXN1bHRBcmVhUHJvcGVydGllcyksIHRoaXMuc2VsZWN0ZWRUcmFjZXMgJiYgKGUuc2VsZWN0ZWRUcmFjZXMgPSB0aGlzLnNlbGVjdGVkVHJhY2VzKSwgdGhpcy5zZWxlY3RPbkNvbXBsZXRlRGlzYWJsZWQgIT09IHZvaWQgMCAmJiAoZS5zZWxlY3RPbkNvbXBsZXRlID0gIXRoaXMuc2VsZWN0T25Db21wbGV0ZURpc2FibGVkKSwgdGhpcy5zaG93R3JhcGhpY3NPbkNvbXBsZXRlRGlzYWJsZWQgIT09IHZvaWQgMCAmJiAoZS5zaG93R3JhcGhpY3NPbkNvbXBsZXRlID0gIXRoaXMuc2hvd0dyYXBoaWNzT25Db21wbGV0ZURpc2FibGVkKSwgdGhpcy5zaG93U2VsZWN0aW9uQXR0cmlidXRlc0Rpc2FibGVkICE9PSB2b2lkIDAgJiYgKGUuc2hvd1NlbGVjdGlvbkF0dHJpYnV0ZXMgPSAhdGhpcy5zaG93U2VsZWN0aW9uQXR0cmlidXRlc0Rpc2FibGVkKSwgdGhpcy52aWV3ICYmIChlLnZpZXcgPSB0aGlzLnZpZXcpLCBlO1xuICB9XG4gIF9wcm94eUV2ZW50cygpIHtcbiAgICB0aGlzLndpZGdldC5vbihcImFkZC1mbGFnXCIsIChlKSA9PiB0aGlzLmFyY2dpc0FkZEZsYWcuZW1pdChlKSksIHRoaXMud2lkZ2V0Lm9uKFwiYWRkLWZsYWctY29tcGxldGVcIiwgKGUpID0+IHRoaXMuYXJjZ2lzQWRkRmxhZ0NvbXBsZXRlLmVtaXQoZSkpLCB0aGlzLndpZGdldC5vbihcImFkZC1mbGFnLWVycm9yXCIsIChlKSA9PiB0aGlzLmFyY2dpc0FkZEZsYWdFcnJvci5lbWl0KGUpKSwgdGhpcy53aWRnZXQub24oXCJhZGQtcmVzdWx0LWFyZWFcIiwgKGUpID0+IHRoaXMuYXJjZ2lzQWRkUmVzdWx0QXJlYS5lbWl0KGUpKSwgdGhpcy53aWRnZXQub24oXCJyZW1vdmUtcmVzdWx0LWFyZWFcIiwgKGUpID0+IHRoaXMuYXJjZ2lzUmVtb3ZlUmVzdWx0QXJlYS5lbWl0KGUpKTtcbiAgfVxuICBfc2V0Q2hpbGRFbGVtZW50KGUpIHtcbiAgICB0aGlzLmVsLmNoaWxkRWxlbSA9IGU7XG4gIH1cbiAgLy8gI2VuZHJlZ2lvblxuICAvLyAjcmVnaW9uIFJlbmRlcmluZ1xuICByZW5kZXIoKSB7XG4gICAgcmV0dXJuIHBgPGRpdiAke3IodGhpcy5fc2V0Q2hpbGRFbGVtZW50KX0+PC9kaXY+YDtcbiAgfVxufVxucyhcImFyY2dpcy11dGlsaXR5LW5ldHdvcmstdHJhY2VcIiwgZyk7XG5leHBvcnQge1xuICBnIGFzIEFyY2dpc1V0aWxpdHlOZXR3b3JrVHJhY2Vcbn07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=