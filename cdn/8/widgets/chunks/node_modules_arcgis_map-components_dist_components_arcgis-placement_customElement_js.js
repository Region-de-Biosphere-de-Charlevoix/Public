"use strict";
(self["webpackChunkexb_client"] = self["webpackChunkexb_client"] || []).push([["node_modules_arcgis_map-components_dist_components_arcgis-placement_customElement_js"],{

/***/ "./node_modules/@arcgis/map-components/dist/chunks/component-utils.js":
/*!****************************************************************************!*\
  !*** ./node_modules/@arcgis/map-components/dist/chunks/component-utils.js ***!
  \****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   a: () => (/* binding */ p),
/* harmony export */   b: () => (/* binding */ P),
/* harmony export */   c: () => (/* binding */ H),
/* harmony export */   d: () => (/* binding */ L),
/* harmony export */   e: () => (/* binding */ O),
/* harmony export */   f: () => (/* binding */ x),
/* harmony export */   i: () => (/* binding */ N),
/* harmony export */   p: () => (/* binding */ u),
/* harmony export */   r: () => (/* binding */ S)
/* harmony export */ });
/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.32/esri/copyright.txt for details.
v4.32.1 */
function P(e, i) {
  Array.isArray(i) ? e._watchHandles = [...e._watchHandles, ...i] : e._watchHandles.push(i);
}
function p(e) {
  e.el.childElem && (e.el.childElem.ownedBy = e.el);
  const i = h(e);
  if (!i) {
    const t = y(e.referenceElement);
    if (!t) {
      g(e);
      return;
    }
    return f(t, e, !0), t;
  }
  return w(i, e.el.parent) || (e.el.parent = i, i.tagName.toLowerCase() === "arcgis-expand" ? v(i, e) : i.tagName.toLowerCase() === "arcgis-placement" ? C(i, e) : f(i, e, !1)), i;
}
function h({ el: e }) {
  for (let i = e.parentElement; i; i = i?.parentElement ?? null) {
    if (c.has(i.tagName.toLowerCase()))
      return i;
    if ("ownedBy" in i && i.ownedBy instanceof HTMLElement && c.has(i.ownedBy.tagName.toLowerCase()))
      return i.ownedBy;
  }
}
const c = /* @__PURE__ */ new Set([
  "arcgis-map",
  "arcgis-scene",
  "arcgis-link-chart",
  "arcgis-expand",
  "arcgis-placement"
]);
function w(e, i) {
  if (e !== i)
    return !1;
  const t = e.tagName.toLowerCase();
  return t === "arcgis-expand" || t === "arcgis-placement";
}
function l(e, i, t = "arcgisReady") {
  const r = e;
  if (typeof r.view?.ready == "boolean")
    i(r.view);
  else {
    let s = function(d) {
      d.target === e && (l(e, i, t), e.removeEventListener(t, s));
    };
    e.addEventListener(t, s);
  }
}
const v = (e, i) => l(e, (t) => {
  i.el.childElem && e.content != null && e.content.append(i.el.childElem), e.expandIcon = i.icon || i.widget?.icon || e.expandIcon, i.position = e.position, i.el.view = t;
}), C = (e, i) => l(e, (t) => {
  i.el.childElem && i.el.append(i.el.childElem), i.position = e.position, i.el.view = t;
}), f = (e, i, t) => l(
  e,
  (r) => {
    t ? g(i) : i.el.childElem && E(e, i), i.el.view = r;
  },
  "arcgisViewReadyChange"
);
function E(e, i) {
  const t = i.el.childElem ?? i.el, r = [...e.children], s = {};
  for (const a of r) {
    const n = a.getAttribute("position") ?? "manual";
    s[n] ??= [], s[n].push({ child: a, position: n, index: r.indexOf(a) });
  }
  const d = s[i.position ?? "manual"]?.findIndex(({ child: a }) => a === i.el), o = e.view.ui;
  o.remove(t), o.add(t, { position: i.position, index: d });
}
function L(e) {
  let i = !1, t = e.el.view;
  const r = Object.getOwnPropertyDescriptor(Object.getPrototypeOf(e.el), "view") ?? {
    get: () => t,
    set: (s) => t = s
  };
  Object.defineProperty(e.el, "view", {
    get: r.get.bind(e.el),
    set: (s) => {
      r.set.call(e.el, s), s && !i && (i = !0, e.arcgisReady.emit());
    },
    configurable: !0,
    enumerable: !0
  }), t && (e.el.view = t);
}
function x(e) {
  return e == null || e === "";
}
function H(e, i) {
  return i != null && e?.position === i.position && e?.heading === i.heading && e?.tilt === i.tilt && e?.fov === i.fov;
}
function N(e, i) {
  return i === void 0 || e?.targetGeometry !== i?.targetGeometry || e?.rotation !== i?.rotation || e?.scale !== i?.scale;
}
function O(e, i) {
  return u(i?.center, e);
}
function u(e, i) {
  if (typeof i == "string")
    return u(e, i.split(",").map(Number));
  if (!e)
    return i;
  if (Array.isArray(i)) {
    const t = i[0], r = i[1], s = i.length > 2 ? i[2] : void 0;
    if (t !== e.longitude || r !== e.latitude || s !== e.z)
      return i;
  } else if (i && !e?.equals(i))
    return i;
}
async function S(e, i) {
  i != null && (typeof i == "string" ? e.el.view = await b(i) : e.widget && (e.el.view = i.view));
}
async function b(e) {
  const i = y(e);
  return await new Promise((t) => {
    typeof i?.view?.ready == "boolean" ? t(i.view) : i && i.addEventListener("arcgisViewReadyChange", () => t(i.view), { once: !0 });
  });
}
function g(e) {
  e.el.childElem && (e.el.shadowRoot ?? e.el).append(e.el.childElem);
}
function y(e) {
  return typeof e != "string" ? e ?? void 0 : (e.includes("#") || e.includes(".") || e.includes("[") ? void 0 : document.querySelector(`#${e}`)) ?? document.querySelector(e) ?? void 0;
}



/***/ }),

/***/ "./node_modules/@arcgis/map-components/dist/components/arcgis-placement/customElement.js":
/*!***********************************************************************************************!*\
  !*** ./node_modules/@arcgis/map-components/dist/components/arcgis-placement/customElement.js ***!
  \***********************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ArcgisPlacement: () => (/* binding */ a)
/* harmony export */ });
/* harmony import */ var _chunks_runtime_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../chunks/runtime.js */ "./node_modules/@arcgis/map-components/dist/chunks/runtime.js");
/* harmony import */ var _chunks_component_utils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../chunks/component-utils.js */ "./node_modules/@arcgis/map-components/dist/chunks/component-utils.js");
/* harmony import */ var _arcgis_lumina__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @arcgis/lumina */ "./node_modules/@arcgis/lumina/dist/index.js");
/* harmony import */ var _lit_reactive_element_css_tag_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @lit/reactive-element/css-tag.js */ "./node_modules/@lit/reactive-element/development/css-tag.js");




/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.32/esri/copyright.txt for details.
v4.32.1 */
const h = (0,_lit_reactive_element_css_tag_js__WEBPACK_IMPORTED_MODULE_3__.css)`@layer{arcgis-placement{display:flex;pointer-events:auto;box-shadow:none}.arcgis-placement__container{display:block}}`;
class a extends _arcgis_lumina__WEBPACK_IMPORTED_MODULE_2__.LitElement {
  //#endregion
  //#region Lifecycle
  constructor() {
    super(), this._observer = void 0, this._moveChildren = () => {
      if (this.el.childElem.parentElement !== this.el)
        for (let e = this.el.firstElementChild; e !== null; e = this.el.firstElementChild)
          this.el.childElem.append(e);
    }, this.position = "bottom-left", this.arcgisReady = (0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_2__.createEvent)(), this.el.childElem = document.createElement("div"), this.el.childElem.classList.add("arcgis-placement__container"), this.listen("arcgisReady", this._startObserving, { once: !0 });
  }
  static {
    this.properties = { position: 1, referenceElement: 1 };
  }
  static {
    this.shadowRootOptions = _arcgis_lumina__WEBPACK_IMPORTED_MODULE_2__.noShadowRoot;
  }
  static {
    this.styles = h;
  }
  connectedCallback() {
    super.connectedCallback(), this.el.view && this._startObserving();
  }
  willUpdate(e) {
    e.has("referenceElement") && (0,_chunks_component_utils_js__WEBPACK_IMPORTED_MODULE_1__.r)(this, this.referenceElement), e.has("position") && this.el.childElem && this.position !== void 0 && this.el.view?.ui?.move(this.el.childElem, this.position);
  }
  loaded() {
    (0,_chunks_component_utils_js__WEBPACK_IMPORTED_MODULE_1__.d)(this), (0,_chunks_component_utils_js__WEBPACK_IMPORTED_MODULE_1__.a)(this);
  }
  disconnectedCallback() {
    super.disconnectedCallback(), this.el.childElem && this.el.view?.ui?.remove(this.el.childElem), this._observer?.disconnect();
  }
  //#endregion
  //#region Private Methods
  /**
   * We only call this method once the view property is set. Because when that
   * happens, the childElem contains is already attached to it's final
   * destination. This is important as we don't want to call _moveChildren()
   * prematurely (triggering needless disconnect & connect for them, and maybe
   * even destroy()).
   */
  _startObserving() {
    this._moveChildren(), this._observer = new MutationObserver(this._moveChildren), this._observer.observe(this.el, { childList: !0 });
  }
}
(0,_chunks_runtime_js__WEBPACK_IMPORTED_MODULE_0__.c)("arcgis-placement", a);



/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2lkZ2V0cy9jaHVua3Mvbm9kZV9tb2R1bGVzX2FyY2dpc19tYXAtY29tcG9uZW50c19kaXN0X2NvbXBvbmVudHNfYXJjZ2lzLXBsYWNlbWVudF9jdXN0b21FbGVtZW50X2pzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSxPQUFPO0FBQ3BCLGdDQUFnQyxHQUFHO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2Qiw0Q0FBNEM7QUFDekU7QUFDQSxvREFBb0QsVUFBVTtBQUM5RCwwQkFBMEIsZ0NBQWdDO0FBQzFEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUhBQXlILFVBQVU7QUFDbkksR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwySUFBMkksRUFBRTtBQUM3STtBQVdFOzs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDdkkrQztBQUN3QjtBQUNhO0FBQzFCO0FBQzVEO0FBQ0E7QUFDQTtBQUNBLFVBQVUscUVBQUMsUUFBUSxpQkFBaUIsYUFBYSxvQkFBb0IsZ0JBQWdCLDZCQUE2QixlQUFlO0FBQ2pJLGdCQUFnQixzREFBQztBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0RBQWdELFlBQVk7QUFDNUQ7QUFDQSxLQUFLLG9EQUFvRCwyREFBQywwS0FBMEssVUFBVTtBQUM5TztBQUNBO0FBQ0Esd0JBQXdCO0FBQ3hCO0FBQ0E7QUFDQSw2QkFBNkIsd0RBQUM7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQyw2REFBQztBQUNsQztBQUNBO0FBQ0EsSUFBSSw2REFBQyxRQUFRLDZEQUFDO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVIQUF1SCxlQUFlO0FBQ3RJO0FBQ0E7QUFDQSxxREFBQztBQUdDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL21hcC1jb21wb25lbnRzL2Rpc3QvY2h1bmtzL2NvbXBvbmVudC11dGlscy5qcyIsIndlYnBhY2s6Ly9leGItY2xpZW50Ly4vbm9kZV9tb2R1bGVzL0BhcmNnaXMvbWFwLWNvbXBvbmVudHMvZGlzdC9jb21wb25lbnRzL2FyY2dpcy1wbGFjZW1lbnQvY3VzdG9tRWxlbWVudC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiEgQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFc3JpLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4zMi9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG52NC4zMi4xICovXG5mdW5jdGlvbiBQKGUsIGkpIHtcbiAgQXJyYXkuaXNBcnJheShpKSA/IGUuX3dhdGNoSGFuZGxlcyA9IFsuLi5lLl93YXRjaEhhbmRsZXMsIC4uLmldIDogZS5fd2F0Y2hIYW5kbGVzLnB1c2goaSk7XG59XG5mdW5jdGlvbiBwKGUpIHtcbiAgZS5lbC5jaGlsZEVsZW0gJiYgKGUuZWwuY2hpbGRFbGVtLm93bmVkQnkgPSBlLmVsKTtcbiAgY29uc3QgaSA9IGgoZSk7XG4gIGlmICghaSkge1xuICAgIGNvbnN0IHQgPSB5KGUucmVmZXJlbmNlRWxlbWVudCk7XG4gICAgaWYgKCF0KSB7XG4gICAgICBnKGUpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICByZXR1cm4gZih0LCBlLCAhMCksIHQ7XG4gIH1cbiAgcmV0dXJuIHcoaSwgZS5lbC5wYXJlbnQpIHx8IChlLmVsLnBhcmVudCA9IGksIGkudGFnTmFtZS50b0xvd2VyQ2FzZSgpID09PSBcImFyY2dpcy1leHBhbmRcIiA/IHYoaSwgZSkgOiBpLnRhZ05hbWUudG9Mb3dlckNhc2UoKSA9PT0gXCJhcmNnaXMtcGxhY2VtZW50XCIgPyBDKGksIGUpIDogZihpLCBlLCAhMSkpLCBpO1xufVxuZnVuY3Rpb24gaCh7IGVsOiBlIH0pIHtcbiAgZm9yIChsZXQgaSA9IGUucGFyZW50RWxlbWVudDsgaTsgaSA9IGk/LnBhcmVudEVsZW1lbnQgPz8gbnVsbCkge1xuICAgIGlmIChjLmhhcyhpLnRhZ05hbWUudG9Mb3dlckNhc2UoKSkpXG4gICAgICByZXR1cm4gaTtcbiAgICBpZiAoXCJvd25lZEJ5XCIgaW4gaSAmJiBpLm93bmVkQnkgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCAmJiBjLmhhcyhpLm93bmVkQnkudGFnTmFtZS50b0xvd2VyQ2FzZSgpKSlcbiAgICAgIHJldHVybiBpLm93bmVkQnk7XG4gIH1cbn1cbmNvbnN0IGMgPSAvKiBAX19QVVJFX18gKi8gbmV3IFNldChbXG4gIFwiYXJjZ2lzLW1hcFwiLFxuICBcImFyY2dpcy1zY2VuZVwiLFxuICBcImFyY2dpcy1saW5rLWNoYXJ0XCIsXG4gIFwiYXJjZ2lzLWV4cGFuZFwiLFxuICBcImFyY2dpcy1wbGFjZW1lbnRcIlxuXSk7XG5mdW5jdGlvbiB3KGUsIGkpIHtcbiAgaWYgKGUgIT09IGkpXG4gICAgcmV0dXJuICExO1xuICBjb25zdCB0ID0gZS50YWdOYW1lLnRvTG93ZXJDYXNlKCk7XG4gIHJldHVybiB0ID09PSBcImFyY2dpcy1leHBhbmRcIiB8fCB0ID09PSBcImFyY2dpcy1wbGFjZW1lbnRcIjtcbn1cbmZ1bmN0aW9uIGwoZSwgaSwgdCA9IFwiYXJjZ2lzUmVhZHlcIikge1xuICBjb25zdCByID0gZTtcbiAgaWYgKHR5cGVvZiByLnZpZXc/LnJlYWR5ID09IFwiYm9vbGVhblwiKVxuICAgIGkoci52aWV3KTtcbiAgZWxzZSB7XG4gICAgbGV0IHMgPSBmdW5jdGlvbihkKSB7XG4gICAgICBkLnRhcmdldCA9PT0gZSAmJiAobChlLCBpLCB0KSwgZS5yZW1vdmVFdmVudExpc3RlbmVyKHQsIHMpKTtcbiAgICB9O1xuICAgIGUuYWRkRXZlbnRMaXN0ZW5lcih0LCBzKTtcbiAgfVxufVxuY29uc3QgdiA9IChlLCBpKSA9PiBsKGUsICh0KSA9PiB7XG4gIGkuZWwuY2hpbGRFbGVtICYmIGUuY29udGVudCAhPSBudWxsICYmIGUuY29udGVudC5hcHBlbmQoaS5lbC5jaGlsZEVsZW0pLCBlLmV4cGFuZEljb24gPSBpLmljb24gfHwgaS53aWRnZXQ/Lmljb24gfHwgZS5leHBhbmRJY29uLCBpLnBvc2l0aW9uID0gZS5wb3NpdGlvbiwgaS5lbC52aWV3ID0gdDtcbn0pLCBDID0gKGUsIGkpID0+IGwoZSwgKHQpID0+IHtcbiAgaS5lbC5jaGlsZEVsZW0gJiYgaS5lbC5hcHBlbmQoaS5lbC5jaGlsZEVsZW0pLCBpLnBvc2l0aW9uID0gZS5wb3NpdGlvbiwgaS5lbC52aWV3ID0gdDtcbn0pLCBmID0gKGUsIGksIHQpID0+IGwoXG4gIGUsXG4gIChyKSA9PiB7XG4gICAgdCA/IGcoaSkgOiBpLmVsLmNoaWxkRWxlbSAmJiBFKGUsIGkpLCBpLmVsLnZpZXcgPSByO1xuICB9LFxuICBcImFyY2dpc1ZpZXdSZWFkeUNoYW5nZVwiXG4pO1xuZnVuY3Rpb24gRShlLCBpKSB7XG4gIGNvbnN0IHQgPSBpLmVsLmNoaWxkRWxlbSA/PyBpLmVsLCByID0gWy4uLmUuY2hpbGRyZW5dLCBzID0ge307XG4gIGZvciAoY29uc3QgYSBvZiByKSB7XG4gICAgY29uc3QgbiA9IGEuZ2V0QXR0cmlidXRlKFwicG9zaXRpb25cIikgPz8gXCJtYW51YWxcIjtcbiAgICBzW25dID8/PSBbXSwgc1tuXS5wdXNoKHsgY2hpbGQ6IGEsIHBvc2l0aW9uOiBuLCBpbmRleDogci5pbmRleE9mKGEpIH0pO1xuICB9XG4gIGNvbnN0IGQgPSBzW2kucG9zaXRpb24gPz8gXCJtYW51YWxcIl0/LmZpbmRJbmRleCgoeyBjaGlsZDogYSB9KSA9PiBhID09PSBpLmVsKSwgbyA9IGUudmlldy51aTtcbiAgby5yZW1vdmUodCksIG8uYWRkKHQsIHsgcG9zaXRpb246IGkucG9zaXRpb24sIGluZGV4OiBkIH0pO1xufVxuZnVuY3Rpb24gTChlKSB7XG4gIGxldCBpID0gITEsIHQgPSBlLmVsLnZpZXc7XG4gIGNvbnN0IHIgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKE9iamVjdC5nZXRQcm90b3R5cGVPZihlLmVsKSwgXCJ2aWV3XCIpID8/IHtcbiAgICBnZXQ6ICgpID0+IHQsXG4gICAgc2V0OiAocykgPT4gdCA9IHNcbiAgfTtcbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGUuZWwsIFwidmlld1wiLCB7XG4gICAgZ2V0OiByLmdldC5iaW5kKGUuZWwpLFxuICAgIHNldDogKHMpID0+IHtcbiAgICAgIHIuc2V0LmNhbGwoZS5lbCwgcyksIHMgJiYgIWkgJiYgKGkgPSAhMCwgZS5hcmNnaXNSZWFkeS5lbWl0KCkpO1xuICAgIH0sXG4gICAgY29uZmlndXJhYmxlOiAhMCxcbiAgICBlbnVtZXJhYmxlOiAhMFxuICB9KSwgdCAmJiAoZS5lbC52aWV3ID0gdCk7XG59XG5mdW5jdGlvbiB4KGUpIHtcbiAgcmV0dXJuIGUgPT0gbnVsbCB8fCBlID09PSBcIlwiO1xufVxuZnVuY3Rpb24gSChlLCBpKSB7XG4gIHJldHVybiBpICE9IG51bGwgJiYgZT8ucG9zaXRpb24gPT09IGkucG9zaXRpb24gJiYgZT8uaGVhZGluZyA9PT0gaS5oZWFkaW5nICYmIGU/LnRpbHQgPT09IGkudGlsdCAmJiBlPy5mb3YgPT09IGkuZm92O1xufVxuZnVuY3Rpb24gTihlLCBpKSB7XG4gIHJldHVybiBpID09PSB2b2lkIDAgfHwgZT8udGFyZ2V0R2VvbWV0cnkgIT09IGk/LnRhcmdldEdlb21ldHJ5IHx8IGU/LnJvdGF0aW9uICE9PSBpPy5yb3RhdGlvbiB8fCBlPy5zY2FsZSAhPT0gaT8uc2NhbGU7XG59XG5mdW5jdGlvbiBPKGUsIGkpIHtcbiAgcmV0dXJuIHUoaT8uY2VudGVyLCBlKTtcbn1cbmZ1bmN0aW9uIHUoZSwgaSkge1xuICBpZiAodHlwZW9mIGkgPT0gXCJzdHJpbmdcIilcbiAgICByZXR1cm4gdShlLCBpLnNwbGl0KFwiLFwiKS5tYXAoTnVtYmVyKSk7XG4gIGlmICghZSlcbiAgICByZXR1cm4gaTtcbiAgaWYgKEFycmF5LmlzQXJyYXkoaSkpIHtcbiAgICBjb25zdCB0ID0gaVswXSwgciA9IGlbMV0sIHMgPSBpLmxlbmd0aCA+IDIgPyBpWzJdIDogdm9pZCAwO1xuICAgIGlmICh0ICE9PSBlLmxvbmdpdHVkZSB8fCByICE9PSBlLmxhdGl0dWRlIHx8IHMgIT09IGUueilcbiAgICAgIHJldHVybiBpO1xuICB9IGVsc2UgaWYgKGkgJiYgIWU/LmVxdWFscyhpKSlcbiAgICByZXR1cm4gaTtcbn1cbmFzeW5jIGZ1bmN0aW9uIFMoZSwgaSkge1xuICBpICE9IG51bGwgJiYgKHR5cGVvZiBpID09IFwic3RyaW5nXCIgPyBlLmVsLnZpZXcgPSBhd2FpdCBiKGkpIDogZS53aWRnZXQgJiYgKGUuZWwudmlldyA9IGkudmlldykpO1xufVxuYXN5bmMgZnVuY3Rpb24gYihlKSB7XG4gIGNvbnN0IGkgPSB5KGUpO1xuICByZXR1cm4gYXdhaXQgbmV3IFByb21pc2UoKHQpID0+IHtcbiAgICB0eXBlb2YgaT8udmlldz8ucmVhZHkgPT0gXCJib29sZWFuXCIgPyB0KGkudmlldykgOiBpICYmIGkuYWRkRXZlbnRMaXN0ZW5lcihcImFyY2dpc1ZpZXdSZWFkeUNoYW5nZVwiLCAoKSA9PiB0KGkudmlldyksIHsgb25jZTogITAgfSk7XG4gIH0pO1xufVxuZnVuY3Rpb24gZyhlKSB7XG4gIGUuZWwuY2hpbGRFbGVtICYmIChlLmVsLnNoYWRvd1Jvb3QgPz8gZS5lbCkuYXBwZW5kKGUuZWwuY2hpbGRFbGVtKTtcbn1cbmZ1bmN0aW9uIHkoZSkge1xuICByZXR1cm4gdHlwZW9mIGUgIT0gXCJzdHJpbmdcIiA/IGUgPz8gdm9pZCAwIDogKGUuaW5jbHVkZXMoXCIjXCIpIHx8IGUuaW5jbHVkZXMoXCIuXCIpIHx8IGUuaW5jbHVkZXMoXCJbXCIpID8gdm9pZCAwIDogZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgIyR7ZX1gKSkgPz8gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihlKSA/PyB2b2lkIDA7XG59XG5leHBvcnQge1xuICBwIGFzIGEsXG4gIFAgYXMgYixcbiAgSCBhcyBjLFxuICBMIGFzIGQsXG4gIE8gYXMgZSxcbiAgeCBhcyBmLFxuICBOIGFzIGksXG4gIHUgYXMgcCxcbiAgUyBhcyByXG59O1xuIiwiaW1wb3J0IHsgYyBhcyB0IH0gZnJvbSBcIi4uLy4uL2NodW5rcy9ydW50aW1lLmpzXCI7XG5pbXBvcnQgeyByIGFzIGksIGQgYXMgcywgYSBhcyBsIH0gZnJvbSBcIi4uLy4uL2NodW5rcy9jb21wb25lbnQtdXRpbHMuanNcIjtcbmltcG9ydCB7IExpdEVsZW1lbnQgYXMgciwgY3JlYXRlRXZlbnQgYXMgbywgbm9TaGFkb3dSb290IGFzIG4gfSBmcm9tIFwiQGFyY2dpcy9sdW1pbmFcIjtcbmltcG9ydCB7IGNzcyBhcyBjIH0gZnJvbSBcIkBsaXQvcmVhY3RpdmUtZWxlbWVudC9jc3MtdGFnLmpzXCI7XG4vKiEgQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFc3JpLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4zMi9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG52NC4zMi4xICovXG5jb25zdCBoID0gY2BAbGF5ZXJ7YXJjZ2lzLXBsYWNlbWVudHtkaXNwbGF5OmZsZXg7cG9pbnRlci1ldmVudHM6YXV0bztib3gtc2hhZG93Om5vbmV9LmFyY2dpcy1wbGFjZW1lbnRfX2NvbnRhaW5lcntkaXNwbGF5OmJsb2NrfX1gO1xuY2xhc3MgYSBleHRlbmRzIHIge1xuICAvLyNlbmRyZWdpb25cbiAgLy8jcmVnaW9uIExpZmVjeWNsZVxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcigpLCB0aGlzLl9vYnNlcnZlciA9IHZvaWQgMCwgdGhpcy5fbW92ZUNoaWxkcmVuID0gKCkgPT4ge1xuICAgICAgaWYgKHRoaXMuZWwuY2hpbGRFbGVtLnBhcmVudEVsZW1lbnQgIT09IHRoaXMuZWwpXG4gICAgICAgIGZvciAobGV0IGUgPSB0aGlzLmVsLmZpcnN0RWxlbWVudENoaWxkOyBlICE9PSBudWxsOyBlID0gdGhpcy5lbC5maXJzdEVsZW1lbnRDaGlsZClcbiAgICAgICAgICB0aGlzLmVsLmNoaWxkRWxlbS5hcHBlbmQoZSk7XG4gICAgfSwgdGhpcy5wb3NpdGlvbiA9IFwiYm90dG9tLWxlZnRcIiwgdGhpcy5hcmNnaXNSZWFkeSA9IG8oKSwgdGhpcy5lbC5jaGlsZEVsZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLCB0aGlzLmVsLmNoaWxkRWxlbS5jbGFzc0xpc3QuYWRkKFwiYXJjZ2lzLXBsYWNlbWVudF9fY29udGFpbmVyXCIpLCB0aGlzLmxpc3RlbihcImFyY2dpc1JlYWR5XCIsIHRoaXMuX3N0YXJ0T2JzZXJ2aW5nLCB7IG9uY2U6ICEwIH0pO1xuICB9XG4gIHN0YXRpYyB7XG4gICAgdGhpcy5wcm9wZXJ0aWVzID0geyBwb3NpdGlvbjogMSwgcmVmZXJlbmNlRWxlbWVudDogMSB9O1xuICB9XG4gIHN0YXRpYyB7XG4gICAgdGhpcy5zaGFkb3dSb290T3B0aW9ucyA9IG47XG4gIH1cbiAgc3RhdGljIHtcbiAgICB0aGlzLnN0eWxlcyA9IGg7XG4gIH1cbiAgY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgc3VwZXIuY29ubmVjdGVkQ2FsbGJhY2soKSwgdGhpcy5lbC52aWV3ICYmIHRoaXMuX3N0YXJ0T2JzZXJ2aW5nKCk7XG4gIH1cbiAgd2lsbFVwZGF0ZShlKSB7XG4gICAgZS5oYXMoXCJyZWZlcmVuY2VFbGVtZW50XCIpICYmIGkodGhpcywgdGhpcy5yZWZlcmVuY2VFbGVtZW50KSwgZS5oYXMoXCJwb3NpdGlvblwiKSAmJiB0aGlzLmVsLmNoaWxkRWxlbSAmJiB0aGlzLnBvc2l0aW9uICE9PSB2b2lkIDAgJiYgdGhpcy5lbC52aWV3Py51aT8ubW92ZSh0aGlzLmVsLmNoaWxkRWxlbSwgdGhpcy5wb3NpdGlvbik7XG4gIH1cbiAgbG9hZGVkKCkge1xuICAgIHModGhpcyksIGwodGhpcyk7XG4gIH1cbiAgZGlzY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgc3VwZXIuZGlzY29ubmVjdGVkQ2FsbGJhY2soKSwgdGhpcy5lbC5jaGlsZEVsZW0gJiYgdGhpcy5lbC52aWV3Py51aT8ucmVtb3ZlKHRoaXMuZWwuY2hpbGRFbGVtKSwgdGhpcy5fb2JzZXJ2ZXI/LmRpc2Nvbm5lY3QoKTtcbiAgfVxuICAvLyNlbmRyZWdpb25cbiAgLy8jcmVnaW9uIFByaXZhdGUgTWV0aG9kc1xuICAvKipcbiAgICogV2Ugb25seSBjYWxsIHRoaXMgbWV0aG9kIG9uY2UgdGhlIHZpZXcgcHJvcGVydHkgaXMgc2V0LiBCZWNhdXNlIHdoZW4gdGhhdFxuICAgKiBoYXBwZW5zLCB0aGUgY2hpbGRFbGVtIGNvbnRhaW5zIGlzIGFscmVhZHkgYXR0YWNoZWQgdG8gaXQncyBmaW5hbFxuICAgKiBkZXN0aW5hdGlvbi4gVGhpcyBpcyBpbXBvcnRhbnQgYXMgd2UgZG9uJ3Qgd2FudCB0byBjYWxsIF9tb3ZlQ2hpbGRyZW4oKVxuICAgKiBwcmVtYXR1cmVseSAodHJpZ2dlcmluZyBuZWVkbGVzcyBkaXNjb25uZWN0ICYgY29ubmVjdCBmb3IgdGhlbSwgYW5kIG1heWJlXG4gICAqIGV2ZW4gZGVzdHJveSgpKS5cbiAgICovXG4gIF9zdGFydE9ic2VydmluZygpIHtcbiAgICB0aGlzLl9tb3ZlQ2hpbGRyZW4oKSwgdGhpcy5fb2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcih0aGlzLl9tb3ZlQ2hpbGRyZW4pLCB0aGlzLl9vYnNlcnZlci5vYnNlcnZlKHRoaXMuZWwsIHsgY2hpbGRMaXN0OiAhMCB9KTtcbiAgfVxufVxudChcImFyY2dpcy1wbGFjZW1lbnRcIiwgYSk7XG5leHBvcnQge1xuICBhIGFzIEFyY2dpc1BsYWNlbWVudFxufTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==