"use strict";
(self["webpackChunkexb_client"] = self["webpackChunkexb_client"] || []).push([["node_modules_arcgis_map-components_dist_components_arcgis-version-management-version-properti-cffced"],{

/***/ "./node_modules/@arcgis/map-components/dist/components/arcgis-version-management-version-properties/customElement.js":
/*!***************************************************************************************************************************!*\
  !*** ./node_modules/@arcgis/map-components/dist/components/arcgis-version-management-version-properties/customElement.js ***!
  \***************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ArcgisVersionManagementVersionProperties: () => (/* binding */ k)
/* harmony export */ });
/* harmony import */ var _chunks_runtime_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../chunks/runtime.js */ "./node_modules/@arcgis/map-components/dist/chunks/runtime.js");
/* harmony import */ var lit_html__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lit-html */ "./node_modules/lit-html/development/lit-html.js");
/* harmony import */ var lit_html_directives_ref_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! lit-html/directives/ref.js */ "./node_modules/lit-html/development/directives/ref.js");
/* harmony import */ var _arcgis_lumina__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @arcgis/lumina */ "./node_modules/@arcgis/lumina/dist/index.js");
/* harmony import */ var _lit_reactive_element_css_tag_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @lit/reactive-element/css-tag.js */ "./node_modules/@lit/reactive-element/development/css-tag.js");





/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.32/esri/copyright.txt for details.
v4.32.1 */
const C = (0,_lit_reactive_element_css_tag_js__WEBPACK_IMPORTED_MODULE_4__.css)`@layer{:host{display:none;background:#bdf2c4}:host([selected]){display:flex}.properties-buttons{display:flex}}`;
class k extends _arcgis_lumina__WEBPACK_IMPORTED_MODULE_3__.LitElement {
  constructor() {
    super(...arguments), this._flowItemElement = (0,lit_html_directives_ref_js__WEBPACK_IMPORTED_MODULE_2__.createRef)(), this._switchToVersion = !0, this._switchToVersionCheckboxElement = (0,lit_html_directives_ref_js__WEBPACK_IMPORTED_MODULE_2__.createRef)(), this._versionNameInputElement = (0,lit_html_directives_ref_js__WEBPACK_IMPORTED_MODULE_2__.createRef)(), this.selected = !1, this.showBackButton = !1, this.arcgisAlterVersion = (0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_3__.createEvent)(), this.arcgisCreateVersion = (0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_3__.createEvent)(), this.arcgisFlowItemBack = (0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_3__.createEvent)(), this.arcgisFlowItemClose = (0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_3__.createEvent)();
  }
  static {
    this.properties = { selected: 7, showBackButton: 7, versionPropertiesElementProps: 0 };
  }
  static {
    this.shadowRootOptions = _arcgis_lumina__WEBPACK_IMPORTED_MODULE_3__.noShadowRoot;
  }
  static {
    this.styles = C;
  }
  //#endregion
  //#region Lifecycle
  load() {
    const { versionPropertiesElementProps: { versionInfo: t } } = this;
    t ? (this._mode = "edit", this._fullVersionName = t.versionIdentifier.name, this._ownerName = this._fullVersionName.substring(0, this._fullVersionName.lastIndexOf(".")), this._versionName = this._fullVersionName.substring(this._fullVersionName.lastIndexOf(".") + 1)) : this._mode = "create";
  }
  updated() {
    this._mode === "create" && this._versionNameInputElement.value?.setFocus();
  }
  //#endregion
  //#region Private Methods
  async setFocus() {
    this._flowItemElement.value?.setFocus();
  }
  // eslint-disable-next-line @typescript-eslint/no-empty-function
  goBack() {
  }
  _handleCancel() {
    this.arcgisFlowItemBack.emit();
  }
  _handleChange(t) {
    const { _mode: s, _ownerName: l, _versionName: h, versionPropertiesElementProps: { currentUser: m, isVersionAdministrator: d, serviceUrl: i, versionInfo: c } } = this;
    let { _alterVersionParameters: e, _createVersionParameters: a } = this;
    switch (s === "create" && (a || (a = {
      access: "public",
      description: "",
      featureServerUrl: i,
      ownerName: m,
      versionName: ""
    })), s === "edit" && (e || (e = {
      featureServerUrl: i,
      versionIdentifier: c.versionIdentifier,
      ownerName: l,
      versionName: h,
      access: c.access,
      description: c.description
    })), t.type) {
      case "calciteChipGroupSelect": {
        const r = t.target.label, o = t.target.selectedItems[0].value;
        s === "create" && (a = { ...a, [r]: o }), s === "edit" && (e = { ...e, [r]: o });
        break;
      }
      case "calciteInputTextInput": {
        const r = t.target.name, o = t.target.value;
        s === "create" && (a = { ...a, [r]: o }), s === "edit" && (e = { ...e, [r]: o });
        break;
      }
      case "calciteTextAreaInput": {
        const r = t.target.name, o = t.target.value;
        s === "create" && (a = { ...a, [r]: o }), s === "edit" && (e = { ...e, [r]: o });
        break;
      }
    }
    s === "create" && (a.access !== "public" && m.toUpperCase() !== a.ownerName?.toUpperCase() && !d ? (this._switchToVersionCheckboxElement.value.checked = !1, this._switchToVersionCheckboxElement.value.disabled = !0, this._switchToVersion = !1) : this._switchToVersionCheckboxElement.value.disabled = !1, this._createVersionParameters = a), s === "edit" && (this._alterVersionParameters = e);
  }
  _handleClose() {
    this.arcgisFlowItemClose.emit();
  }
  _handleSave() {
    const { _alterVersionParameters: t, _createVersionParameters: s, _mode: l, _switchToVersion: h } = this;
    l === "create" && this.arcgisCreateVersion.emit({
      createVersionParameters: s,
      switchToVersion: h
    }), l === "edit" && this.arcgisAlterVersion.emit({
      alterVersionParameters: t
    });
  }
  _handleSwitchToVersionChange(t) {
    this._switchToVersion = t.target.checked;
  }
  //#endregion
  //#region Rendering
  render() {
    const { selected: t, showBackButton: s, versionPropertiesElementProps: { closable: l, currentUser: h, hasAdvEditingUte: m, state: d, strings: i, versionInfo: c }, _mode: e, _ownerName: a, _versionName: r } = this, o = (0,lit_html__WEBPACK_IMPORTED_MODULE_1__.html)`<div class="properties-buttons"><calcite-button appearance=outline width=half @click=${this._handleCancel}>${i.actions.cancelSave}</calcite-button><calcite-button width=half @click=${this._handleSave}>${i.actions.saveVersion}</calcite-button></div>`, f = (0,lit_html__WEBPACK_IMPORTED_MODULE_1__.html)`<calcite-label>${i.input.versionAccess}<calcite-chip-group label=access @calciteChipGroupSelect=${this._handleChange} selection-mode=single-persist><calcite-chip .selected=${e === "edit" && c.access === "public" || e === "create"} label=public>${i.accessLevels.public}</calcite-chip><calcite-chip .selected=${e === "edit" && c.access === "protected"} label=protected>${i.accessLevels.protected}</calcite-chip><calcite-chip .selected=${e === "edit" && c.access === "private"} label=private>${i.accessLevels.private}</calcite-chip></calcite-chip-group></calcite-label>`, b = (0,lit_html__WEBPACK_IMPORTED_MODULE_1__.html)`<calcite-label>${i.input.versionDescription}<calcite-text-area name=description @calciteTextAreaInput=${this._handleChange} resize=vertical .value=${e === "edit" ? c.description : ""}></calcite-text-area></calcite-label>`, _ = (0,lit_html__WEBPACK_IMPORTED_MODULE_1__.html)`<calcite-label>${i.input.versionName}<calcite-input-text name=versionName @calciteInputTextInput=${this._handleChange} max-length=62 .value=${e === "edit" ? r : ""} ${(0,lit_html_directives_ref_js__WEBPACK_IMPORTED_MODULE_2__.ref)(this._versionNameInputElement)}></calcite-input-text></calcite-label>`, w = (0,lit_html__WEBPACK_IMPORTED_MODULE_1__.html)`<calcite-label>${i.input.versionOwner}<calcite-input-text name=ownerName @calciteInputTextInput=${this._handleChange} .disabled=${!m} .value=${e === "edit" ? a : h}></calcite-input-text></calcite-label>`, g = e === "create" ? (0,lit_html__WEBPACK_IMPORTED_MODULE_1__.html)`<calcite-label layout=inline><calcite-checkbox checked name=switchToVersion @calciteCheckboxChange=${this._handleSwitchToVersionChange} ${(0,lit_html_directives_ref_js__WEBPACK_IMPORTED_MODULE_2__.ref)(this._switchToVersionCheckboxElement)}></calcite-checkbox>${i.actions.switchToVersion}</calcite-label>` : void 0;
    return (0,lit_html__WEBPACK_IMPORTED_MODULE_1__.html)`<calcite-flow-item .closable=${l} .description=${c ? c.versionIdentifier.name : ""} .heading=${c ? i.actions.editVersion : i.actions.newVersion} .selected=${t} .showBackButton=${s} @calciteFlowItemClose=${this._handleClose} ${(0,lit_html_directives_ref_js__WEBPACK_IMPORTED_MODULE_2__.ref)(this._flowItemElement)}><calcite-panel .loading=${d === "executing"}><calcite-block .label=${i.headers.versionProperties} open>${_}${b}${f}${w}${g}${o}</calcite-block></calcite-panel></calcite-flow-item>`;
  }
}
(0,_chunks_runtime_js__WEBPACK_IMPORTED_MODULE_0__.c)("arcgis-version-management-version-properties", k);



/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2lkZ2V0cy9jaHVua3Mvbm9kZV9tb2R1bGVzX2FyY2dpc19tYXAtY29tcG9uZW50c19kaXN0X2NvbXBvbmVudHNfYXJjZ2lzLXZlcnNpb24tbWFuYWdlbWVudC12ZXJzaW9uLXByb3BlcnRpLWNmZmNlZC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBaUQ7QUFDWjtBQUNpQztBQUNnQjtBQUMxQjtBQUM1RDtBQUNBO0FBQ0E7QUFDQSxVQUFVLHFFQUFDLFFBQVEsTUFBTSxhQUFhLG1CQUFtQixrQkFBa0IsYUFBYSxvQkFBb0IsY0FBYztBQUMxSCxnQkFBZ0Isc0RBQUM7QUFDakI7QUFDQSxpREFBaUQscUVBQUMsdUVBQXVFLHFFQUFDLG9DQUFvQyxxRUFBQyw0RUFBNEUsMkRBQUMsK0JBQStCLDJEQUFDLDhCQUE4QiwyREFBQywrQkFBK0IsMkRBQUM7QUFDM1U7QUFDQTtBQUNBLHdCQUF3QjtBQUN4QjtBQUNBO0FBQ0EsNkJBQTZCLHdEQUFDO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxpQ0FBaUMsbUJBQW1CO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLDJFQUEyRSw2RUFBNkU7QUFDcEssVUFBVSwwREFBMEQ7QUFDcEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsaUNBQWlDLGNBQWMsMEJBQTBCLGNBQWM7QUFDdkY7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUMsY0FBYywwQkFBMEIsY0FBYztBQUN2RjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQyxjQUFjLDBCQUEwQixjQUFjO0FBQ3ZGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVkseUZBQXlGO0FBQ3JHO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksaUVBQWlFLHdGQUF3Riw2Q0FBNkMsWUFBWSw4Q0FBQyx3RkFBd0YsbUJBQW1CLEdBQUcscUJBQXFCLHFEQUFxRCxpQkFBaUIsR0FBRyxzQkFBc0IsOEJBQThCLDhDQUFDLGtCQUFrQixzQkFBc0IsMkRBQTJELG9CQUFvQix3REFBd0QseURBQXlELGVBQWUsc0JBQXNCLHlDQUF5QywwQ0FBMEMsa0JBQWtCLHlCQUF5Qix5Q0FBeUMsd0NBQXdDLGdCQUFnQix1QkFBdUIsMkRBQTJELDhDQUFDLGtCQUFrQiwyQkFBMkIsNERBQTRELG9CQUFvQix5QkFBeUIsa0NBQWtDLDRDQUE0Qyw4Q0FBQyxrQkFBa0Isb0JBQW9CLDhEQUE4RCxvQkFBb0IsdUJBQXVCLHVCQUF1QixFQUFFLCtEQUFDLGdDQUFnQyw2Q0FBNkMsOENBQUMsa0JBQWtCLHFCQUFxQiw0REFBNEQsb0JBQW9CLFlBQVksSUFBSSxTQUFTLHFCQUFxQiw4REFBOEQsOENBQUMsc0dBQXNHLG1DQUFtQyxFQUFFLCtEQUFDLHVDQUF1QyxzQkFBc0IsMEJBQTBCO0FBQ2w4RCxXQUFXLDhDQUFDLGdDQUFnQyxHQUFHLGVBQWUsbUNBQW1DLFdBQVcsa0RBQWtELFlBQVksR0FBRyxrQkFBa0IsR0FBRyx3QkFBd0IsbUJBQW1CLEVBQUUsK0RBQUMsd0JBQXdCLDJCQUEyQixrQkFBa0IseUJBQXlCLDZCQUE2QixPQUFPLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRTtBQUN4WTtBQUNBO0FBQ0EscURBQUM7QUFHQyIsInNvdXJjZXMiOlsid2VicGFjazovL2V4Yi1jbGllbnQvLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9tYXAtY29tcG9uZW50cy9kaXN0L2NvbXBvbmVudHMvYXJjZ2lzLXZlcnNpb24tbWFuYWdlbWVudC12ZXJzaW9uLXByb3BlcnRpZXMvY3VzdG9tRWxlbWVudC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjIGFzICQgfSBmcm9tIFwiLi4vLi4vY2h1bmtzL3J1bnRpbWUuanNcIjtcbmltcG9ydCB7IGh0bWwgYXMgbiB9IGZyb20gXCJsaXQtaHRtbFwiO1xuaW1wb3J0IHsgY3JlYXRlUmVmIGFzIHUsIHJlZiBhcyB2IH0gZnJvbSBcImxpdC1odG1sL2RpcmVjdGl2ZXMvcmVmLmpzXCI7XG5pbXBvcnQgeyBMaXRFbGVtZW50IGFzIFYsIGNyZWF0ZUV2ZW50IGFzIHAsIG5vU2hhZG93Um9vdCBhcyBJIH0gZnJvbSBcIkBhcmNnaXMvbHVtaW5hXCI7XG5pbXBvcnQgeyBjc3MgYXMgeCB9IGZyb20gXCJAbGl0L3JlYWN0aXZlLWVsZW1lbnQvY3NzLXRhZy5qc1wiO1xuLyohIEFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRXNyaSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMzIvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxudjQuMzIuMSAqL1xuY29uc3QgQyA9IHhgQGxheWVyezpob3N0e2Rpc3BsYXk6bm9uZTtiYWNrZ3JvdW5kOiNiZGYyYzR9Omhvc3QoW3NlbGVjdGVkXSl7ZGlzcGxheTpmbGV4fS5wcm9wZXJ0aWVzLWJ1dHRvbnN7ZGlzcGxheTpmbGV4fX1gO1xuY2xhc3MgayBleHRlbmRzIFYge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlciguLi5hcmd1bWVudHMpLCB0aGlzLl9mbG93SXRlbUVsZW1lbnQgPSB1KCksIHRoaXMuX3N3aXRjaFRvVmVyc2lvbiA9ICEwLCB0aGlzLl9zd2l0Y2hUb1ZlcnNpb25DaGVja2JveEVsZW1lbnQgPSB1KCksIHRoaXMuX3ZlcnNpb25OYW1lSW5wdXRFbGVtZW50ID0gdSgpLCB0aGlzLnNlbGVjdGVkID0gITEsIHRoaXMuc2hvd0JhY2tCdXR0b24gPSAhMSwgdGhpcy5hcmNnaXNBbHRlclZlcnNpb24gPSBwKCksIHRoaXMuYXJjZ2lzQ3JlYXRlVmVyc2lvbiA9IHAoKSwgdGhpcy5hcmNnaXNGbG93SXRlbUJhY2sgPSBwKCksIHRoaXMuYXJjZ2lzRmxvd0l0ZW1DbG9zZSA9IHAoKTtcbiAgfVxuICBzdGF0aWMge1xuICAgIHRoaXMucHJvcGVydGllcyA9IHsgc2VsZWN0ZWQ6IDcsIHNob3dCYWNrQnV0dG9uOiA3LCB2ZXJzaW9uUHJvcGVydGllc0VsZW1lbnRQcm9wczogMCB9O1xuICB9XG4gIHN0YXRpYyB7XG4gICAgdGhpcy5zaGFkb3dSb290T3B0aW9ucyA9IEk7XG4gIH1cbiAgc3RhdGljIHtcbiAgICB0aGlzLnN0eWxlcyA9IEM7XG4gIH1cbiAgLy8jZW5kcmVnaW9uXG4gIC8vI3JlZ2lvbiBMaWZlY3ljbGVcbiAgbG9hZCgpIHtcbiAgICBjb25zdCB7IHZlcnNpb25Qcm9wZXJ0aWVzRWxlbWVudFByb3BzOiB7IHZlcnNpb25JbmZvOiB0IH0gfSA9IHRoaXM7XG4gICAgdCA/ICh0aGlzLl9tb2RlID0gXCJlZGl0XCIsIHRoaXMuX2Z1bGxWZXJzaW9uTmFtZSA9IHQudmVyc2lvbklkZW50aWZpZXIubmFtZSwgdGhpcy5fb3duZXJOYW1lID0gdGhpcy5fZnVsbFZlcnNpb25OYW1lLnN1YnN0cmluZygwLCB0aGlzLl9mdWxsVmVyc2lvbk5hbWUubGFzdEluZGV4T2YoXCIuXCIpKSwgdGhpcy5fdmVyc2lvbk5hbWUgPSB0aGlzLl9mdWxsVmVyc2lvbk5hbWUuc3Vic3RyaW5nKHRoaXMuX2Z1bGxWZXJzaW9uTmFtZS5sYXN0SW5kZXhPZihcIi5cIikgKyAxKSkgOiB0aGlzLl9tb2RlID0gXCJjcmVhdGVcIjtcbiAgfVxuICB1cGRhdGVkKCkge1xuICAgIHRoaXMuX21vZGUgPT09IFwiY3JlYXRlXCIgJiYgdGhpcy5fdmVyc2lvbk5hbWVJbnB1dEVsZW1lbnQudmFsdWU/LnNldEZvY3VzKCk7XG4gIH1cbiAgLy8jZW5kcmVnaW9uXG4gIC8vI3JlZ2lvbiBQcml2YXRlIE1ldGhvZHNcbiAgYXN5bmMgc2V0Rm9jdXMoKSB7XG4gICAgdGhpcy5fZmxvd0l0ZW1FbGVtZW50LnZhbHVlPy5zZXRGb2N1cygpO1xuICB9XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZW1wdHktZnVuY3Rpb25cbiAgZ29CYWNrKCkge1xuICB9XG4gIF9oYW5kbGVDYW5jZWwoKSB7XG4gICAgdGhpcy5hcmNnaXNGbG93SXRlbUJhY2suZW1pdCgpO1xuICB9XG4gIF9oYW5kbGVDaGFuZ2UodCkge1xuICAgIGNvbnN0IHsgX21vZGU6IHMsIF9vd25lck5hbWU6IGwsIF92ZXJzaW9uTmFtZTogaCwgdmVyc2lvblByb3BlcnRpZXNFbGVtZW50UHJvcHM6IHsgY3VycmVudFVzZXI6IG0sIGlzVmVyc2lvbkFkbWluaXN0cmF0b3I6IGQsIHNlcnZpY2VVcmw6IGksIHZlcnNpb25JbmZvOiBjIH0gfSA9IHRoaXM7XG4gICAgbGV0IHsgX2FsdGVyVmVyc2lvblBhcmFtZXRlcnM6IGUsIF9jcmVhdGVWZXJzaW9uUGFyYW1ldGVyczogYSB9ID0gdGhpcztcbiAgICBzd2l0Y2ggKHMgPT09IFwiY3JlYXRlXCIgJiYgKGEgfHwgKGEgPSB7XG4gICAgICBhY2Nlc3M6IFwicHVibGljXCIsXG4gICAgICBkZXNjcmlwdGlvbjogXCJcIixcbiAgICAgIGZlYXR1cmVTZXJ2ZXJVcmw6IGksXG4gICAgICBvd25lck5hbWU6IG0sXG4gICAgICB2ZXJzaW9uTmFtZTogXCJcIlxuICAgIH0pKSwgcyA9PT0gXCJlZGl0XCIgJiYgKGUgfHwgKGUgPSB7XG4gICAgICBmZWF0dXJlU2VydmVyVXJsOiBpLFxuICAgICAgdmVyc2lvbklkZW50aWZpZXI6IGMudmVyc2lvbklkZW50aWZpZXIsXG4gICAgICBvd25lck5hbWU6IGwsXG4gICAgICB2ZXJzaW9uTmFtZTogaCxcbiAgICAgIGFjY2VzczogYy5hY2Nlc3MsXG4gICAgICBkZXNjcmlwdGlvbjogYy5kZXNjcmlwdGlvblxuICAgIH0pKSwgdC50eXBlKSB7XG4gICAgICBjYXNlIFwiY2FsY2l0ZUNoaXBHcm91cFNlbGVjdFwiOiB7XG4gICAgICAgIGNvbnN0IHIgPSB0LnRhcmdldC5sYWJlbCwgbyA9IHQudGFyZ2V0LnNlbGVjdGVkSXRlbXNbMF0udmFsdWU7XG4gICAgICAgIHMgPT09IFwiY3JlYXRlXCIgJiYgKGEgPSB7IC4uLmEsIFtyXTogbyB9KSwgcyA9PT0gXCJlZGl0XCIgJiYgKGUgPSB7IC4uLmUsIFtyXTogbyB9KTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBjYXNlIFwiY2FsY2l0ZUlucHV0VGV4dElucHV0XCI6IHtcbiAgICAgICAgY29uc3QgciA9IHQudGFyZ2V0Lm5hbWUsIG8gPSB0LnRhcmdldC52YWx1ZTtcbiAgICAgICAgcyA9PT0gXCJjcmVhdGVcIiAmJiAoYSA9IHsgLi4uYSwgW3JdOiBvIH0pLCBzID09PSBcImVkaXRcIiAmJiAoZSA9IHsgLi4uZSwgW3JdOiBvIH0pO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIGNhc2UgXCJjYWxjaXRlVGV4dEFyZWFJbnB1dFwiOiB7XG4gICAgICAgIGNvbnN0IHIgPSB0LnRhcmdldC5uYW1lLCBvID0gdC50YXJnZXQudmFsdWU7XG4gICAgICAgIHMgPT09IFwiY3JlYXRlXCIgJiYgKGEgPSB7IC4uLmEsIFtyXTogbyB9KSwgcyA9PT0gXCJlZGl0XCIgJiYgKGUgPSB7IC4uLmUsIFtyXTogbyB9KTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICAgIHMgPT09IFwiY3JlYXRlXCIgJiYgKGEuYWNjZXNzICE9PSBcInB1YmxpY1wiICYmIG0udG9VcHBlckNhc2UoKSAhPT0gYS5vd25lck5hbWU/LnRvVXBwZXJDYXNlKCkgJiYgIWQgPyAodGhpcy5fc3dpdGNoVG9WZXJzaW9uQ2hlY2tib3hFbGVtZW50LnZhbHVlLmNoZWNrZWQgPSAhMSwgdGhpcy5fc3dpdGNoVG9WZXJzaW9uQ2hlY2tib3hFbGVtZW50LnZhbHVlLmRpc2FibGVkID0gITAsIHRoaXMuX3N3aXRjaFRvVmVyc2lvbiA9ICExKSA6IHRoaXMuX3N3aXRjaFRvVmVyc2lvbkNoZWNrYm94RWxlbWVudC52YWx1ZS5kaXNhYmxlZCA9ICExLCB0aGlzLl9jcmVhdGVWZXJzaW9uUGFyYW1ldGVycyA9IGEpLCBzID09PSBcImVkaXRcIiAmJiAodGhpcy5fYWx0ZXJWZXJzaW9uUGFyYW1ldGVycyA9IGUpO1xuICB9XG4gIF9oYW5kbGVDbG9zZSgpIHtcbiAgICB0aGlzLmFyY2dpc0Zsb3dJdGVtQ2xvc2UuZW1pdCgpO1xuICB9XG4gIF9oYW5kbGVTYXZlKCkge1xuICAgIGNvbnN0IHsgX2FsdGVyVmVyc2lvblBhcmFtZXRlcnM6IHQsIF9jcmVhdGVWZXJzaW9uUGFyYW1ldGVyczogcywgX21vZGU6IGwsIF9zd2l0Y2hUb1ZlcnNpb246IGggfSA9IHRoaXM7XG4gICAgbCA9PT0gXCJjcmVhdGVcIiAmJiB0aGlzLmFyY2dpc0NyZWF0ZVZlcnNpb24uZW1pdCh7XG4gICAgICBjcmVhdGVWZXJzaW9uUGFyYW1ldGVyczogcyxcbiAgICAgIHN3aXRjaFRvVmVyc2lvbjogaFxuICAgIH0pLCBsID09PSBcImVkaXRcIiAmJiB0aGlzLmFyY2dpc0FsdGVyVmVyc2lvbi5lbWl0KHtcbiAgICAgIGFsdGVyVmVyc2lvblBhcmFtZXRlcnM6IHRcbiAgICB9KTtcbiAgfVxuICBfaGFuZGxlU3dpdGNoVG9WZXJzaW9uQ2hhbmdlKHQpIHtcbiAgICB0aGlzLl9zd2l0Y2hUb1ZlcnNpb24gPSB0LnRhcmdldC5jaGVja2VkO1xuICB9XG4gIC8vI2VuZHJlZ2lvblxuICAvLyNyZWdpb24gUmVuZGVyaW5nXG4gIHJlbmRlcigpIHtcbiAgICBjb25zdCB7IHNlbGVjdGVkOiB0LCBzaG93QmFja0J1dHRvbjogcywgdmVyc2lvblByb3BlcnRpZXNFbGVtZW50UHJvcHM6IHsgY2xvc2FibGU6IGwsIGN1cnJlbnRVc2VyOiBoLCBoYXNBZHZFZGl0aW5nVXRlOiBtLCBzdGF0ZTogZCwgc3RyaW5nczogaSwgdmVyc2lvbkluZm86IGMgfSwgX21vZGU6IGUsIF9vd25lck5hbWU6IGEsIF92ZXJzaW9uTmFtZTogciB9ID0gdGhpcywgbyA9IG5gPGRpdiBjbGFzcz1cInByb3BlcnRpZXMtYnV0dG9uc1wiPjxjYWxjaXRlLWJ1dHRvbiBhcHBlYXJhbmNlPW91dGxpbmUgd2lkdGg9aGFsZiBAY2xpY2s9JHt0aGlzLl9oYW5kbGVDYW5jZWx9PiR7aS5hY3Rpb25zLmNhbmNlbFNhdmV9PC9jYWxjaXRlLWJ1dHRvbj48Y2FsY2l0ZS1idXR0b24gd2lkdGg9aGFsZiBAY2xpY2s9JHt0aGlzLl9oYW5kbGVTYXZlfT4ke2kuYWN0aW9ucy5zYXZlVmVyc2lvbn08L2NhbGNpdGUtYnV0dG9uPjwvZGl2PmAsIGYgPSBuYDxjYWxjaXRlLWxhYmVsPiR7aS5pbnB1dC52ZXJzaW9uQWNjZXNzfTxjYWxjaXRlLWNoaXAtZ3JvdXAgbGFiZWw9YWNjZXNzIEBjYWxjaXRlQ2hpcEdyb3VwU2VsZWN0PSR7dGhpcy5faGFuZGxlQ2hhbmdlfSBzZWxlY3Rpb24tbW9kZT1zaW5nbGUtcGVyc2lzdD48Y2FsY2l0ZS1jaGlwIC5zZWxlY3RlZD0ke2UgPT09IFwiZWRpdFwiICYmIGMuYWNjZXNzID09PSBcInB1YmxpY1wiIHx8IGUgPT09IFwiY3JlYXRlXCJ9IGxhYmVsPXB1YmxpYz4ke2kuYWNjZXNzTGV2ZWxzLnB1YmxpY308L2NhbGNpdGUtY2hpcD48Y2FsY2l0ZS1jaGlwIC5zZWxlY3RlZD0ke2UgPT09IFwiZWRpdFwiICYmIGMuYWNjZXNzID09PSBcInByb3RlY3RlZFwifSBsYWJlbD1wcm90ZWN0ZWQ+JHtpLmFjY2Vzc0xldmVscy5wcm90ZWN0ZWR9PC9jYWxjaXRlLWNoaXA+PGNhbGNpdGUtY2hpcCAuc2VsZWN0ZWQ9JHtlID09PSBcImVkaXRcIiAmJiBjLmFjY2VzcyA9PT0gXCJwcml2YXRlXCJ9IGxhYmVsPXByaXZhdGU+JHtpLmFjY2Vzc0xldmVscy5wcml2YXRlfTwvY2FsY2l0ZS1jaGlwPjwvY2FsY2l0ZS1jaGlwLWdyb3VwPjwvY2FsY2l0ZS1sYWJlbD5gLCBiID0gbmA8Y2FsY2l0ZS1sYWJlbD4ke2kuaW5wdXQudmVyc2lvbkRlc2NyaXB0aW9ufTxjYWxjaXRlLXRleHQtYXJlYSBuYW1lPWRlc2NyaXB0aW9uIEBjYWxjaXRlVGV4dEFyZWFJbnB1dD0ke3RoaXMuX2hhbmRsZUNoYW5nZX0gcmVzaXplPXZlcnRpY2FsIC52YWx1ZT0ke2UgPT09IFwiZWRpdFwiID8gYy5kZXNjcmlwdGlvbiA6IFwiXCJ9PjwvY2FsY2l0ZS10ZXh0LWFyZWE+PC9jYWxjaXRlLWxhYmVsPmAsIF8gPSBuYDxjYWxjaXRlLWxhYmVsPiR7aS5pbnB1dC52ZXJzaW9uTmFtZX08Y2FsY2l0ZS1pbnB1dC10ZXh0IG5hbWU9dmVyc2lvbk5hbWUgQGNhbGNpdGVJbnB1dFRleHRJbnB1dD0ke3RoaXMuX2hhbmRsZUNoYW5nZX0gbWF4LWxlbmd0aD02MiAudmFsdWU9JHtlID09PSBcImVkaXRcIiA/IHIgOiBcIlwifSAke3YodGhpcy5fdmVyc2lvbk5hbWVJbnB1dEVsZW1lbnQpfT48L2NhbGNpdGUtaW5wdXQtdGV4dD48L2NhbGNpdGUtbGFiZWw+YCwgdyA9IG5gPGNhbGNpdGUtbGFiZWw+JHtpLmlucHV0LnZlcnNpb25Pd25lcn08Y2FsY2l0ZS1pbnB1dC10ZXh0IG5hbWU9b3duZXJOYW1lIEBjYWxjaXRlSW5wdXRUZXh0SW5wdXQ9JHt0aGlzLl9oYW5kbGVDaGFuZ2V9IC5kaXNhYmxlZD0keyFtfSAudmFsdWU9JHtlID09PSBcImVkaXRcIiA/IGEgOiBofT48L2NhbGNpdGUtaW5wdXQtdGV4dD48L2NhbGNpdGUtbGFiZWw+YCwgZyA9IGUgPT09IFwiY3JlYXRlXCIgPyBuYDxjYWxjaXRlLWxhYmVsIGxheW91dD1pbmxpbmU+PGNhbGNpdGUtY2hlY2tib3ggY2hlY2tlZCBuYW1lPXN3aXRjaFRvVmVyc2lvbiBAY2FsY2l0ZUNoZWNrYm94Q2hhbmdlPSR7dGhpcy5faGFuZGxlU3dpdGNoVG9WZXJzaW9uQ2hhbmdlfSAke3YodGhpcy5fc3dpdGNoVG9WZXJzaW9uQ2hlY2tib3hFbGVtZW50KX0+PC9jYWxjaXRlLWNoZWNrYm94PiR7aS5hY3Rpb25zLnN3aXRjaFRvVmVyc2lvbn08L2NhbGNpdGUtbGFiZWw+YCA6IHZvaWQgMDtcbiAgICByZXR1cm4gbmA8Y2FsY2l0ZS1mbG93LWl0ZW0gLmNsb3NhYmxlPSR7bH0gLmRlc2NyaXB0aW9uPSR7YyA/IGMudmVyc2lvbklkZW50aWZpZXIubmFtZSA6IFwiXCJ9IC5oZWFkaW5nPSR7YyA/IGkuYWN0aW9ucy5lZGl0VmVyc2lvbiA6IGkuYWN0aW9ucy5uZXdWZXJzaW9ufSAuc2VsZWN0ZWQ9JHt0fSAuc2hvd0JhY2tCdXR0b249JHtzfSBAY2FsY2l0ZUZsb3dJdGVtQ2xvc2U9JHt0aGlzLl9oYW5kbGVDbG9zZX0gJHt2KHRoaXMuX2Zsb3dJdGVtRWxlbWVudCl9PjxjYWxjaXRlLXBhbmVsIC5sb2FkaW5nPSR7ZCA9PT0gXCJleGVjdXRpbmdcIn0+PGNhbGNpdGUtYmxvY2sgLmxhYmVsPSR7aS5oZWFkZXJzLnZlcnNpb25Qcm9wZXJ0aWVzfSBvcGVuPiR7X30ke2J9JHtmfSR7d30ke2d9JHtvfTwvY2FsY2l0ZS1ibG9jaz48L2NhbGNpdGUtcGFuZWw+PC9jYWxjaXRlLWZsb3ctaXRlbT5gO1xuICB9XG59XG4kKFwiYXJjZ2lzLXZlcnNpb24tbWFuYWdlbWVudC12ZXJzaW9uLXByb3BlcnRpZXNcIiwgayk7XG5leHBvcnQge1xuICBrIGFzIEFyY2dpc1ZlcnNpb25NYW5hZ2VtZW50VmVyc2lvblByb3BlcnRpZXNcbn07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=