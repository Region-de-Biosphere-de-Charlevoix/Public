"use strict";
(self["webpackChunkexb_client"] = self["webpackChunkexb_client"] || []).push([["vendors-node_modules_arcgis_map-components_dist_components_arcgis-map_customElement_js"],{

/***/ "./node_modules/@arcgis/map-components/dist/components/arcgis-map/customElement.js":
/*!*****************************************************************************************!*\
  !*** ./node_modules/@arcgis/map-components/dist/components/arcgis-map/customElement.js ***!
  \*****************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ArcgisMap: () => (/* binding */ b)
/* harmony export */ });
/* harmony import */ var _chunks_runtime_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../chunks/runtime.js */ "./node_modules/@arcgis/map-components/dist/chunks/runtime.js");
/* harmony import */ var _arcgis_components_controllers_accessor__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @arcgis/components-controllers/accessor */ "./node_modules/@arcgis/components-controllers/dist/accessor/index.js");
/* harmony import */ var _arcgis_core_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @arcgis/core/core/reactiveUtils.js */ "@arcgis/core/core/reactiveUtils.js");
/* harmony import */ var _arcgis_core_views_MapView_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @arcgis/core/views/MapView.js */ "@arcgis/core/views/MapView.js");
/* harmony import */ var _arcgis_core_WebMap_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @arcgis/core/WebMap.js */ "@arcgis/core/WebMap.js");
/* harmony import */ var _arcgis_lumina__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @arcgis/lumina */ "./node_modules/@arcgis/lumina/dist/index.js");
/* harmony import */ var _chunks_component_utils_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../chunks/component-utils.js */ "./node_modules/@arcgis/map-components/dist/chunks/component-utils.js");
/* harmony import */ var _lit_reactive_element_css_tag_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @lit/reactive-element/css-tag.js */ "./node_modules/@lit/reactive-element/development/css-tag.js");








/*! All material copyright Esri, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.32/esri/copyright.txt for details.
v4.32.1 */
const u = (0,_lit_reactive_element_css_tag_js__WEBPACK_IMPORTED_MODULE_7__.css)`@layer{arcgis-map{display:block;height:100%;.esri-view{height:100%;width:100%}}}`, f = (0,_arcgis_components_controllers_accessor__WEBPACK_IMPORTED_MODULE_1__.makeAccessorController)(
  _arcgis_core_WebMap_js__WEBPACK_IMPORTED_MODULE_4__["default"],
  /**
   * Since omitProps is only needed for typing, not runtime, `{} as { ... }` is
   * a hack to remove them from the runtime code. This argument is not used at
   * all at runtime. For makeViewModelController and makeWidgetController, the
   * minifier is able to remove them automatically. However, minifier does not
   * remove them for makeAccessorController as makeAccessorController is defined
   * in an externalized package.
   */
  {}
), _ = (0,_arcgis_components_controllers_accessor__WEBPACK_IMPORTED_MODULE_1__.makeAccessorController)(_arcgis_core_views_MapView_js__WEBPACK_IMPORTED_MODULE_3__["default"], {});
class b extends _arcgis_lumina__WEBPACK_IMPORTED_MODULE_5__.LitElement {
  constructor() {
    super(...arguments), this._center = void 0, this._extent = void 0, this._itemId = void 0, this._scale = void 0, this._viewpoint = void 0, this._zoom = void 0, this._map = f(this, { editConstructorProperties: this._editMapProperties }), this.view = _(this, { editConstructorProperties: this._editViewProperties }), this.allLayerViews = this.view.allLayerViews, this.autoDestroyDisabled = !1, this.background = this.view.background, this.basemap = this._map.basemap, this.basemapView = this.view.basemapView, this.constraints = this.view.constraints, this.displayFilterDisabled = this.view.displayFilterEnabled, this.fatalError = this.view.fatalError, this.floors = this.view.floors, this.graphics = this.view.graphics, this.ground = this._map.ground, this.highlights = this.view.highlights, this.highlightOptions = this.view.highlightOptions, this.ipsInfo = this._map.ipsInfo, this.layerViews = this.view.layerViews, this.magnifier = this.view.magnifier, this.map = this.view.map, this.navigation = this.view.navigation, this.padding = this.view.padding, this.popup = this.view.popup, this.popupDisabled = this.view.popupEnabled, this.ready = this.view.ready, this.resizeAlign = this.view.resizeAlign, this.resolution = this.view.resolution, this.rotation = this.view.rotation, this.spatialReference = this.view.spatialReference, this.suspended = this.view.suspended, this.theme = this.view.theme, this.timeExtent = this.view.timeExtent, this.timeZone = this.view.timeZone, this.updating = this.view.updating, this.arcgisViewChange = (0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_5__.createEvent)(), this.arcgisViewClick = (0,_arcgis_components_controllers_accessor__WEBPACK_IMPORTED_MODULE_1__.reEmitEvent)(() => this.view, "click"), this.arcgisViewDoubleClick = (0,_arcgis_components_controllers_accessor__WEBPACK_IMPORTED_MODULE_1__.reEmitEvent)(() => this.view, "double-click"), this.arcgisViewDrag = (0,_arcgis_components_controllers_accessor__WEBPACK_IMPORTED_MODULE_1__.reEmitEvent)(() => this.view, "drag"), this.arcgisViewHold = (0,_arcgis_components_controllers_accessor__WEBPACK_IMPORTED_MODULE_1__.reEmitEvent)(() => this.view, "hold"), this.arcgisViewImmediateClick = (0,_arcgis_components_controllers_accessor__WEBPACK_IMPORTED_MODULE_1__.reEmitEvent)(() => this.view, "immediate-click"), this.arcgisViewImmediateDoubleClick = (0,_arcgis_components_controllers_accessor__WEBPACK_IMPORTED_MODULE_1__.reEmitEvent)(() => this.view, "immediate-double-click"), this.arcgisViewKeyDown = (0,_arcgis_components_controllers_accessor__WEBPACK_IMPORTED_MODULE_1__.reEmitEvent)(() => this.view, "key-down"), this.arcgisViewKeyUp = (0,_arcgis_components_controllers_accessor__WEBPACK_IMPORTED_MODULE_1__.reEmitEvent)(() => this.view, "key-up"), this.arcgisViewLayerviewCreate = (0,_arcgis_components_controllers_accessor__WEBPACK_IMPORTED_MODULE_1__.reEmitEvent)(() => this.view, "layerview-create"), this.arcgisViewLayerviewCreateError = (0,_arcgis_components_controllers_accessor__WEBPACK_IMPORTED_MODULE_1__.reEmitEvent)(() => this.view, "layerview-create-error"), this.arcgisViewLayerviewDestroy = (0,_arcgis_components_controllers_accessor__WEBPACK_IMPORTED_MODULE_1__.reEmitEvent)(() => this.view, "layerview-destroy"), this.arcgisViewMouseWheel = (0,_arcgis_components_controllers_accessor__WEBPACK_IMPORTED_MODULE_1__.reEmitEvent)(() => this.view, "mouse-wheel"), this.arcgisViewPointerDown = (0,_arcgis_components_controllers_accessor__WEBPACK_IMPORTED_MODULE_1__.reEmitEvent)(() => this.view, "pointer-down"), this.arcgisViewPointerEnter = (0,_arcgis_components_controllers_accessor__WEBPACK_IMPORTED_MODULE_1__.reEmitEvent)(() => this.view, "pointer-enter"), this.arcgisViewPointerLeave = (0,_arcgis_components_controllers_accessor__WEBPACK_IMPORTED_MODULE_1__.reEmitEvent)(() => this.view, "pointer-leave"), this.arcgisViewPointerMove = (0,_arcgis_components_controllers_accessor__WEBPACK_IMPORTED_MODULE_1__.reEmitEvent)(() => this.view, "pointer-move"), this.arcgisViewPointerUp = (0,_arcgis_components_controllers_accessor__WEBPACK_IMPORTED_MODULE_1__.reEmitEvent)(() => this.view, "pointer-up"), this.arcgisViewReadyChange = (0,_arcgis_lumina__WEBPACK_IMPORTED_MODULE_5__.createEvent)();
  }
  static {
    this.properties = { _map: 16, view: 32, allLayerViews: 0, autoDestroyDisabled: 5, background: 0, basemap: 1, basemapView: 0, center: 1, constraints: 0, displayFilterDisabled: 5, extent: 0, fatalError: 0, floors: 0, gamepad: 32, graphics: 0, ground: 1, highlights: 0, highlightOptions: 0, interacting: 32, ipsInfo: 0, itemId: 3, layerViews: 0, magnifier: 0, map: 0, navigating: 32, navigation: 0, padding: 0, popup: 0, popupDisabled: 5, ready: 4, resizeAlign: 1, resolution: 8, rotation: 9, scale: 9, spatialReference: 0, stationary: 32, suspended: 7, theme: 0, timeExtent: 0, timeZone: 1, updating: 7, viewpoint: 0, zoom: 9 };
  }
  static {
    this.shadowRootOptions = _arcgis_lumina__WEBPACK_IMPORTED_MODULE_5__.noShadowRoot;
  }
  static {
    this.styles = u;
  }
  /**
   * Represents the view's center point; when setting the center, you may pass a
   * esri/geometry/Point instance or a string representing
   * a longitude/latitude pair (`"-100.4593, 36.9014"`).
   * Setting the center immediately changes the current view.
   * For animating the view, see this component's goTo() method.
   */
  get center() {
    return this.view.center ?? this._center;
  }
  set center(i) {
    const t = (0,_chunks_component_utils_js__WEBPACK_IMPORTED_MODULE_6__.e)(i, this.ready ? this.view : void 0);
    t && (this.ready && (this.view.center = t), this._center = t);
  }
  /**
   * The extent represents the visible portion of a map within the view as an instance of esri/geometry/Extent.
   * Setting the extent immediately changes the view without animation. To animate
   * the view, see this component's goTo() method.
   * When the view is rotated, the extent does not update to include the newly visible portions of the map.
   */
  get extent() {
    return this.view.extent ?? this._extent;
  }
  set extent(i) {
    this.view.ready || (this._extent = i), i && !this.extent?.equals(i) && (this.view.extent = i);
  }
  /** Gamepad input specific configuration settings. */
  get gamepad() {
    return this.ready ? this.view.input.gamepad : void 0;
  }
  /** Indication whether the view is being interacted with (for example when panning or by an interactive tool). */
  get interacting() {
    return this.view.interacting;
  }
  /** The ID of a WebMap from ArcGIS Online or ArcGIS Enterprise portal.
   *
   * To configure the portal url you must set the [`portalUrl` property on `config`](https://developers.arcgis.com/javascript/latest/api-reference/esri-config.html#portalUrl) before the `arcgis-map` component loads.
   */
  get itemId() {
    return this._map.portalItem?.id ?? this._itemId;
  }
  set itemId(i) {
    this._itemId = i, this.ready && _arcgis_components_controllers_accessor__WEBPACK_IMPORTED_MODULE_1__.accessorSupport.reCreate(this._map, this).then(() => {
      this.view.map = this._map;
    }).catch(console.error);
  }
  /** Indication whether the view is being navigated (for example when panning). */
  get navigating() {
    return this.view.navigating;
  }
  /**
   * Represents the map scale at the center of the view. Setting the scale immediately changes the view. For animating
   * the view, see this component's goTo() method.
   */
  get scale() {
    return this.view.scale ?? this._scale;
  }
  set scale(i) {
    this.ready && (this.view.scale = i), this._scale = i;
  }
  /** Indication whether the view is animating, being navigated with or resizing. */
  get stationary() {
    return this.view.stationary;
  }
  /**
   * Represents the current view as a Viewpoint or point of observation on the view.
   * Setting the viewpoint immediately changes the current view. For animating
   * the view, see this component's goTo() method.
   */
  get viewpoint() {
    return this.view.viewpoint ?? this._viewpoint;
  }
  set viewpoint(i) {
    this.ready && (0,_chunks_component_utils_js__WEBPACK_IMPORTED_MODULE_6__.i)(this.viewpoint, i) && (this.view.viewpoint = i), this._viewpoint = i;
  }
  /**
   * Represents the level of detail (LOD) at the center of the view.
   * A zoom level (or scale) is a number that defines how large or small the contents of a map appear in a map view.
   * Zoom level is a number usually between 0 (global view) and 23 (very detailed view) and is used as a shorthand for predetermined scale values.
   * A value of -1 means the view has no LODs.
   * When setting the zoom value, the MapView converts it to the corresponding scale, or interpolates it if the zoom is a fractional number.
   * MapView can display maps with different projections at a full range of scales, and so use the scale property on this component rather than zoom level.
   *
   * Setting the zoom immediately changes the current view. For animating the view, see this component's goTo() method.
   * Setting this property in conjunction with `center` is a convenient way to set the initial extent of the view.
   */
  get zoom() {
    return this.view.zoom ?? this._zoom;
  }
  set zoom(i) {
    this.ready && (this.view.zoom = i), this._zoom = i;
  }
  //#endregion
  //#region Public Methods
  /** Adds a layer to the map layers collection. */
  async addLayer(i, t) {
    this.map?.add(i, t);
  }
  /** Adds a layer or array of layers to the map layers collection. */
  async addLayers(i, t) {
    this.map?.addMany(i, t);
  }
  /** Adds a table to the map tables collection. */
  async addTable(i) {
    this.map?.tables.add(i);
  }
  /** Adds a table or array of tables to the map tables collection. */
  async addTables(i, t) {
    this.map?.tables.addMany(i, t);
  }
  /** Closes the popup. */
  async closePopup() {
    this.view?.closePopup();
  }
  /** Destroys the view, and any associated resources, including its map, popup, and UI elements. */
  async destroy() {
    await this.manager.destroy();
  }
  /** Sets the view to a given target. */
  async goTo(i, t) {
    return await this.view?.goTo(i, t);
  }
  /** Returns hit test results from each layer that intersects the specified screen coordinates. */
  async hitTest(i, t) {
    return await this.view?.hitTest(i, t);
  }
  /**
   * Opens the popup at the given location with content defined either explicitly with content or driven
   * from the PopupTemplate of input features.
   */
  async openPopup(i) {
    await this.view?.openPopup(i);
  }
  /** Create a screenshot of the current view. */
  async takeScreenshot(i) {
    return await this.view?.takeScreenshot(i);
  }
  toMap(i) {
    return this.view.toMap(i);
  }
  toScreen(i, t) {
    return this.view.toScreen(i, t);
  }
  /** Call this method to clear any fatal errors resulting from a lost WebGL context. */
  async tryFatalErrorRecovery() {
    this.view?.tryFatalErrorRecovery();
  }
  /** Gets the LayerView created on the view for the given layer. */
  async whenLayerView(i) {
    return await this.view?.whenLayerView(i);
  }
  //#endregion
  //#region Lifecycle
  load() {
    this.el.childElem = document.createElement("div"), this.el.append(this.el.childElem), this.view.container ??= this.el.childElem;
  }
  loaded() {
    this.manager.onLifecycle(() => [
      (0,_arcgis_core_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_2__.watch)(() => this.view.stationary, () => {
        this.arcgisViewChange.emit();
      }, { initial: !0 }),
      (0,_arcgis_core_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_2__.watch)(() => this.view.ready, () => this.arcgisViewReadyChange.emit(), { initial: this.view.ready })
    ]);
  }
  //#endregion
  //#region Private Methods
  _editMapProperties(i) {
    this.map && (this._map = this.map), this.itemId && (i.portalItem = { id: this.itemId });
    const { basemap: t, ...o } = i;
    t || (i = o);
    const { ground: n, ...w } = i;
    return n || (i = w), i;
  }
  async _editViewProperties(i) {
    await this.manager.use(this._map), this.view.ui || (i.ui = {
      components: ["attribution"]
    }), i.map ??= this._map;
    const t = (0,_chunks_component_utils_js__WEBPACK_IMPORTED_MODULE_6__.e)(this.center, void 0);
    return t && (i.center = t), this.viewpoint && (i.viewpoint = this.viewpoint), this.scale !== void 0 && (i.scale = this.scale), this.extent && (i.extent = this.extent), this.zoom !== void 0 && (i.zoom = this.zoom), i;
  }
}
(0,_chunks_runtime_js__WEBPACK_IMPORTED_MODULE_0__.c)("arcgis-map", b);



/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2lkZ2V0cy9jaHVua3MvdmVuZG9ycy1ub2RlX21vZHVsZXNfYXJjZ2lzX21hcC1jb21wb25lbnRzX2Rpc3RfY29tcG9uZW50c19hcmNnaXMtbWFwX2N1c3RvbUVsZW1lbnRfanMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQTRDO0FBQ2tGO0FBQzlEO0FBQ2xCO0FBQ1A7QUFDK0M7QUFDckI7QUFDTDtBQUM1RDtBQUNBO0FBQ0E7QUFDQSxVQUFVLHFFQUFDLFFBQVEsV0FBVyxjQUFjLFlBQVksV0FBVyxZQUFZLGFBQWEsT0FBTywrRkFBQztBQUNwRyxFQUFFLDhEQUFDO0FBQ0g7QUFDQSxpRUFBaUUsS0FBSyxLQUFLO0FBQzNFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTywrRkFBQyxDQUFDLHFFQUFDLElBQUk7QUFDZCxnQkFBZ0Isc0RBQUM7QUFDakI7QUFDQSx5TEFBeUwsb0RBQW9ELHlCQUF5QixxREFBcUQsc3NDQUFzc0MsMkRBQUMsMkJBQTJCLG9GQUFDLHlEQUF5RCxvRkFBQyx5REFBeUQsb0ZBQUMsaURBQWlELG9GQUFDLDJEQUEyRCxvRkFBQyw0RUFBNEUsb0ZBQUMsc0VBQXNFLG9GQUFDLHNEQUFzRCxvRkFBQyw4REFBOEQsb0ZBQUMsNkVBQTZFLG9GQUFDLCtFQUErRSxvRkFBQyxvRUFBb0Usb0ZBQUMsK0RBQStELG9GQUFDLGlFQUFpRSxvRkFBQyxrRUFBa0Usb0ZBQUMsaUVBQWlFLG9GQUFDLDhEQUE4RCxvRkFBQyw4REFBOEQsMkRBQUM7QUFDbG5GO0FBQ0E7QUFDQSx3QkFBd0I7QUFDeEI7QUFDQTtBQUNBLDZCQUE2Qix3REFBQztBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUNBQXlDO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsNkRBQUM7QUFDZjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQ0FBb0Msb0ZBQUM7QUFDckM7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsNkRBQUM7QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTSx5RUFBQztBQUNQO0FBQ0EsT0FBTyxJQUFJLGFBQWE7QUFDeEIsTUFBTSx5RUFBQyxtRUFBbUUsMEJBQTBCO0FBQ3BHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5RUFBeUUsaUJBQWlCO0FBQzFGLFlBQVksbUJBQW1CO0FBQy9CO0FBQ0EsWUFBWSxrQkFBa0I7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxjQUFjLDZEQUFDO0FBQ2Y7QUFDQTtBQUNBO0FBQ0EscURBQUM7QUFHQyIsInNvdXJjZXMiOlsid2VicGFjazovL2V4Yi1jbGllbnQvLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9tYXAtY29tcG9uZW50cy9kaXN0L2NvbXBvbmVudHMvYXJjZ2lzLW1hcC9jdXN0b21FbGVtZW50LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGMgfSBmcm9tIFwiLi4vLi4vY2h1bmtzL3J1bnRpbWUuanNcIjtcbmltcG9ydCB7IG1ha2VBY2Nlc3NvckNvbnRyb2xsZXIgYXMgciwgcmVFbWl0RXZlbnQgYXMgZSwgYWNjZXNzb3JTdXBwb3J0IGFzIGQgfSBmcm9tIFwiQGFyY2dpcy9jb21wb25lbnRzLWNvbnRyb2xsZXJzL2FjY2Vzc29yXCI7XG5pbXBvcnQgeyB3YXRjaCBhcyBzIH0gZnJvbSBcIkBhcmNnaXMvY29yZS9jb3JlL3JlYWN0aXZlVXRpbHMuanNcIjtcbmltcG9ydCBwIGZyb20gXCJAYXJjZ2lzL2NvcmUvdmlld3MvTWFwVmlldy5qc1wiO1xuaW1wb3J0IHYgZnJvbSBcIkBhcmNnaXMvY29yZS9XZWJNYXAuanNcIjtcbmltcG9ydCB7IExpdEVsZW1lbnQgYXMgbCwgY3JlYXRlRXZlbnQgYXMgYSwgbm9TaGFkb3dSb290IGFzIG0gfSBmcm9tIFwiQGFyY2dpcy9sdW1pbmFcIjtcbmltcG9ydCB7IGUgYXMgaCwgaSBhcyBnIH0gZnJvbSBcIi4uLy4uL2NodW5rcy9jb21wb25lbnQtdXRpbHMuanNcIjtcbmltcG9ydCB7IGNzcyBhcyB5IH0gZnJvbSBcIkBsaXQvcmVhY3RpdmUtZWxlbWVudC9jc3MtdGFnLmpzXCI7XG4vKiEgQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFc3JpLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4zMi9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG52NC4zMi4xICovXG5jb25zdCB1ID0geWBAbGF5ZXJ7YXJjZ2lzLW1hcHtkaXNwbGF5OmJsb2NrO2hlaWdodDoxMDAlOy5lc3JpLXZpZXd7aGVpZ2h0OjEwMCU7d2lkdGg6MTAwJX19fWAsIGYgPSByKFxuICB2LFxuICAvKipcbiAgICogU2luY2Ugb21pdFByb3BzIGlzIG9ubHkgbmVlZGVkIGZvciB0eXBpbmcsIG5vdCBydW50aW1lLCBge30gYXMgeyAuLi4gfWAgaXNcbiAgICogYSBoYWNrIHRvIHJlbW92ZSB0aGVtIGZyb20gdGhlIHJ1bnRpbWUgY29kZS4gVGhpcyBhcmd1bWVudCBpcyBub3QgdXNlZCBhdFxuICAgKiBhbGwgYXQgcnVudGltZS4gRm9yIG1ha2VWaWV3TW9kZWxDb250cm9sbGVyIGFuZCBtYWtlV2lkZ2V0Q29udHJvbGxlciwgdGhlXG4gICAqIG1pbmlmaWVyIGlzIGFibGUgdG8gcmVtb3ZlIHRoZW0gYXV0b21hdGljYWxseS4gSG93ZXZlciwgbWluaWZpZXIgZG9lcyBub3RcbiAgICogcmVtb3ZlIHRoZW0gZm9yIG1ha2VBY2Nlc3NvckNvbnRyb2xsZXIgYXMgbWFrZUFjY2Vzc29yQ29udHJvbGxlciBpcyBkZWZpbmVkXG4gICAqIGluIGFuIGV4dGVybmFsaXplZCBwYWNrYWdlLlxuICAgKi9cbiAge31cbiksIF8gPSByKHAsIHt9KTtcbmNsYXNzIGIgZXh0ZW5kcyBsIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoLi4uYXJndW1lbnRzKSwgdGhpcy5fY2VudGVyID0gdm9pZCAwLCB0aGlzLl9leHRlbnQgPSB2b2lkIDAsIHRoaXMuX2l0ZW1JZCA9IHZvaWQgMCwgdGhpcy5fc2NhbGUgPSB2b2lkIDAsIHRoaXMuX3ZpZXdwb2ludCA9IHZvaWQgMCwgdGhpcy5fem9vbSA9IHZvaWQgMCwgdGhpcy5fbWFwID0gZih0aGlzLCB7IGVkaXRDb25zdHJ1Y3RvclByb3BlcnRpZXM6IHRoaXMuX2VkaXRNYXBQcm9wZXJ0aWVzIH0pLCB0aGlzLnZpZXcgPSBfKHRoaXMsIHsgZWRpdENvbnN0cnVjdG9yUHJvcGVydGllczogdGhpcy5fZWRpdFZpZXdQcm9wZXJ0aWVzIH0pLCB0aGlzLmFsbExheWVyVmlld3MgPSB0aGlzLnZpZXcuYWxsTGF5ZXJWaWV3cywgdGhpcy5hdXRvRGVzdHJveURpc2FibGVkID0gITEsIHRoaXMuYmFja2dyb3VuZCA9IHRoaXMudmlldy5iYWNrZ3JvdW5kLCB0aGlzLmJhc2VtYXAgPSB0aGlzLl9tYXAuYmFzZW1hcCwgdGhpcy5iYXNlbWFwVmlldyA9IHRoaXMudmlldy5iYXNlbWFwVmlldywgdGhpcy5jb25zdHJhaW50cyA9IHRoaXMudmlldy5jb25zdHJhaW50cywgdGhpcy5kaXNwbGF5RmlsdGVyRGlzYWJsZWQgPSB0aGlzLnZpZXcuZGlzcGxheUZpbHRlckVuYWJsZWQsIHRoaXMuZmF0YWxFcnJvciA9IHRoaXMudmlldy5mYXRhbEVycm9yLCB0aGlzLmZsb29ycyA9IHRoaXMudmlldy5mbG9vcnMsIHRoaXMuZ3JhcGhpY3MgPSB0aGlzLnZpZXcuZ3JhcGhpY3MsIHRoaXMuZ3JvdW5kID0gdGhpcy5fbWFwLmdyb3VuZCwgdGhpcy5oaWdobGlnaHRzID0gdGhpcy52aWV3LmhpZ2hsaWdodHMsIHRoaXMuaGlnaGxpZ2h0T3B0aW9ucyA9IHRoaXMudmlldy5oaWdobGlnaHRPcHRpb25zLCB0aGlzLmlwc0luZm8gPSB0aGlzLl9tYXAuaXBzSW5mbywgdGhpcy5sYXllclZpZXdzID0gdGhpcy52aWV3LmxheWVyVmlld3MsIHRoaXMubWFnbmlmaWVyID0gdGhpcy52aWV3Lm1hZ25pZmllciwgdGhpcy5tYXAgPSB0aGlzLnZpZXcubWFwLCB0aGlzLm5hdmlnYXRpb24gPSB0aGlzLnZpZXcubmF2aWdhdGlvbiwgdGhpcy5wYWRkaW5nID0gdGhpcy52aWV3LnBhZGRpbmcsIHRoaXMucG9wdXAgPSB0aGlzLnZpZXcucG9wdXAsIHRoaXMucG9wdXBEaXNhYmxlZCA9IHRoaXMudmlldy5wb3B1cEVuYWJsZWQsIHRoaXMucmVhZHkgPSB0aGlzLnZpZXcucmVhZHksIHRoaXMucmVzaXplQWxpZ24gPSB0aGlzLnZpZXcucmVzaXplQWxpZ24sIHRoaXMucmVzb2x1dGlvbiA9IHRoaXMudmlldy5yZXNvbHV0aW9uLCB0aGlzLnJvdGF0aW9uID0gdGhpcy52aWV3LnJvdGF0aW9uLCB0aGlzLnNwYXRpYWxSZWZlcmVuY2UgPSB0aGlzLnZpZXcuc3BhdGlhbFJlZmVyZW5jZSwgdGhpcy5zdXNwZW5kZWQgPSB0aGlzLnZpZXcuc3VzcGVuZGVkLCB0aGlzLnRoZW1lID0gdGhpcy52aWV3LnRoZW1lLCB0aGlzLnRpbWVFeHRlbnQgPSB0aGlzLnZpZXcudGltZUV4dGVudCwgdGhpcy50aW1lWm9uZSA9IHRoaXMudmlldy50aW1lWm9uZSwgdGhpcy51cGRhdGluZyA9IHRoaXMudmlldy51cGRhdGluZywgdGhpcy5hcmNnaXNWaWV3Q2hhbmdlID0gYSgpLCB0aGlzLmFyY2dpc1ZpZXdDbGljayA9IGUoKCkgPT4gdGhpcy52aWV3LCBcImNsaWNrXCIpLCB0aGlzLmFyY2dpc1ZpZXdEb3VibGVDbGljayA9IGUoKCkgPT4gdGhpcy52aWV3LCBcImRvdWJsZS1jbGlja1wiKSwgdGhpcy5hcmNnaXNWaWV3RHJhZyA9IGUoKCkgPT4gdGhpcy52aWV3LCBcImRyYWdcIiksIHRoaXMuYXJjZ2lzVmlld0hvbGQgPSBlKCgpID0+IHRoaXMudmlldywgXCJob2xkXCIpLCB0aGlzLmFyY2dpc1ZpZXdJbW1lZGlhdGVDbGljayA9IGUoKCkgPT4gdGhpcy52aWV3LCBcImltbWVkaWF0ZS1jbGlja1wiKSwgdGhpcy5hcmNnaXNWaWV3SW1tZWRpYXRlRG91YmxlQ2xpY2sgPSBlKCgpID0+IHRoaXMudmlldywgXCJpbW1lZGlhdGUtZG91YmxlLWNsaWNrXCIpLCB0aGlzLmFyY2dpc1ZpZXdLZXlEb3duID0gZSgoKSA9PiB0aGlzLnZpZXcsIFwia2V5LWRvd25cIiksIHRoaXMuYXJjZ2lzVmlld0tleVVwID0gZSgoKSA9PiB0aGlzLnZpZXcsIFwia2V5LXVwXCIpLCB0aGlzLmFyY2dpc1ZpZXdMYXllcnZpZXdDcmVhdGUgPSBlKCgpID0+IHRoaXMudmlldywgXCJsYXllcnZpZXctY3JlYXRlXCIpLCB0aGlzLmFyY2dpc1ZpZXdMYXllcnZpZXdDcmVhdGVFcnJvciA9IGUoKCkgPT4gdGhpcy52aWV3LCBcImxheWVydmlldy1jcmVhdGUtZXJyb3JcIiksIHRoaXMuYXJjZ2lzVmlld0xheWVydmlld0Rlc3Ryb3kgPSBlKCgpID0+IHRoaXMudmlldywgXCJsYXllcnZpZXctZGVzdHJveVwiKSwgdGhpcy5hcmNnaXNWaWV3TW91c2VXaGVlbCA9IGUoKCkgPT4gdGhpcy52aWV3LCBcIm1vdXNlLXdoZWVsXCIpLCB0aGlzLmFyY2dpc1ZpZXdQb2ludGVyRG93biA9IGUoKCkgPT4gdGhpcy52aWV3LCBcInBvaW50ZXItZG93blwiKSwgdGhpcy5hcmNnaXNWaWV3UG9pbnRlckVudGVyID0gZSgoKSA9PiB0aGlzLnZpZXcsIFwicG9pbnRlci1lbnRlclwiKSwgdGhpcy5hcmNnaXNWaWV3UG9pbnRlckxlYXZlID0gZSgoKSA9PiB0aGlzLnZpZXcsIFwicG9pbnRlci1sZWF2ZVwiKSwgdGhpcy5hcmNnaXNWaWV3UG9pbnRlck1vdmUgPSBlKCgpID0+IHRoaXMudmlldywgXCJwb2ludGVyLW1vdmVcIiksIHRoaXMuYXJjZ2lzVmlld1BvaW50ZXJVcCA9IGUoKCkgPT4gdGhpcy52aWV3LCBcInBvaW50ZXItdXBcIiksIHRoaXMuYXJjZ2lzVmlld1JlYWR5Q2hhbmdlID0gYSgpO1xuICB9XG4gIHN0YXRpYyB7XG4gICAgdGhpcy5wcm9wZXJ0aWVzID0geyBfbWFwOiAxNiwgdmlldzogMzIsIGFsbExheWVyVmlld3M6IDAsIGF1dG9EZXN0cm95RGlzYWJsZWQ6IDUsIGJhY2tncm91bmQ6IDAsIGJhc2VtYXA6IDEsIGJhc2VtYXBWaWV3OiAwLCBjZW50ZXI6IDEsIGNvbnN0cmFpbnRzOiAwLCBkaXNwbGF5RmlsdGVyRGlzYWJsZWQ6IDUsIGV4dGVudDogMCwgZmF0YWxFcnJvcjogMCwgZmxvb3JzOiAwLCBnYW1lcGFkOiAzMiwgZ3JhcGhpY3M6IDAsIGdyb3VuZDogMSwgaGlnaGxpZ2h0czogMCwgaGlnaGxpZ2h0T3B0aW9uczogMCwgaW50ZXJhY3Rpbmc6IDMyLCBpcHNJbmZvOiAwLCBpdGVtSWQ6IDMsIGxheWVyVmlld3M6IDAsIG1hZ25pZmllcjogMCwgbWFwOiAwLCBuYXZpZ2F0aW5nOiAzMiwgbmF2aWdhdGlvbjogMCwgcGFkZGluZzogMCwgcG9wdXA6IDAsIHBvcHVwRGlzYWJsZWQ6IDUsIHJlYWR5OiA0LCByZXNpemVBbGlnbjogMSwgcmVzb2x1dGlvbjogOCwgcm90YXRpb246IDksIHNjYWxlOiA5LCBzcGF0aWFsUmVmZXJlbmNlOiAwLCBzdGF0aW9uYXJ5OiAzMiwgc3VzcGVuZGVkOiA3LCB0aGVtZTogMCwgdGltZUV4dGVudDogMCwgdGltZVpvbmU6IDEsIHVwZGF0aW5nOiA3LCB2aWV3cG9pbnQ6IDAsIHpvb206IDkgfTtcbiAgfVxuICBzdGF0aWMge1xuICAgIHRoaXMuc2hhZG93Um9vdE9wdGlvbnMgPSBtO1xuICB9XG4gIHN0YXRpYyB7XG4gICAgdGhpcy5zdHlsZXMgPSB1O1xuICB9XG4gIC8qKlxuICAgKiBSZXByZXNlbnRzIHRoZSB2aWV3J3MgY2VudGVyIHBvaW50OyB3aGVuIHNldHRpbmcgdGhlIGNlbnRlciwgeW91IG1heSBwYXNzIGFcbiAgICogZXNyaS9nZW9tZXRyeS9Qb2ludCBpbnN0YW5jZSBvciBhIHN0cmluZyByZXByZXNlbnRpbmdcbiAgICogYSBsb25naXR1ZGUvbGF0aXR1ZGUgcGFpciAoYFwiLTEwMC40NTkzLCAzNi45MDE0XCJgKS5cbiAgICogU2V0dGluZyB0aGUgY2VudGVyIGltbWVkaWF0ZWx5IGNoYW5nZXMgdGhlIGN1cnJlbnQgdmlldy5cbiAgICogRm9yIGFuaW1hdGluZyB0aGUgdmlldywgc2VlIHRoaXMgY29tcG9uZW50J3MgZ29UbygpIG1ldGhvZC5cbiAgICovXG4gIGdldCBjZW50ZXIoKSB7XG4gICAgcmV0dXJuIHRoaXMudmlldy5jZW50ZXIgPz8gdGhpcy5fY2VudGVyO1xuICB9XG4gIHNldCBjZW50ZXIoaSkge1xuICAgIGNvbnN0IHQgPSBoKGksIHRoaXMucmVhZHkgPyB0aGlzLnZpZXcgOiB2b2lkIDApO1xuICAgIHQgJiYgKHRoaXMucmVhZHkgJiYgKHRoaXMudmlldy5jZW50ZXIgPSB0KSwgdGhpcy5fY2VudGVyID0gdCk7XG4gIH1cbiAgLyoqXG4gICAqIFRoZSBleHRlbnQgcmVwcmVzZW50cyB0aGUgdmlzaWJsZSBwb3J0aW9uIG9mIGEgbWFwIHdpdGhpbiB0aGUgdmlldyBhcyBhbiBpbnN0YW5jZSBvZiBlc3JpL2dlb21ldHJ5L0V4dGVudC5cbiAgICogU2V0dGluZyB0aGUgZXh0ZW50IGltbWVkaWF0ZWx5IGNoYW5nZXMgdGhlIHZpZXcgd2l0aG91dCBhbmltYXRpb24uIFRvIGFuaW1hdGVcbiAgICogdGhlIHZpZXcsIHNlZSB0aGlzIGNvbXBvbmVudCdzIGdvVG8oKSBtZXRob2QuXG4gICAqIFdoZW4gdGhlIHZpZXcgaXMgcm90YXRlZCwgdGhlIGV4dGVudCBkb2VzIG5vdCB1cGRhdGUgdG8gaW5jbHVkZSB0aGUgbmV3bHkgdmlzaWJsZSBwb3J0aW9ucyBvZiB0aGUgbWFwLlxuICAgKi9cbiAgZ2V0IGV4dGVudCgpIHtcbiAgICByZXR1cm4gdGhpcy52aWV3LmV4dGVudCA/PyB0aGlzLl9leHRlbnQ7XG4gIH1cbiAgc2V0IGV4dGVudChpKSB7XG4gICAgdGhpcy52aWV3LnJlYWR5IHx8ICh0aGlzLl9leHRlbnQgPSBpKSwgaSAmJiAhdGhpcy5leHRlbnQ/LmVxdWFscyhpKSAmJiAodGhpcy52aWV3LmV4dGVudCA9IGkpO1xuICB9XG4gIC8qKiBHYW1lcGFkIGlucHV0IHNwZWNpZmljIGNvbmZpZ3VyYXRpb24gc2V0dGluZ3MuICovXG4gIGdldCBnYW1lcGFkKCkge1xuICAgIHJldHVybiB0aGlzLnJlYWR5ID8gdGhpcy52aWV3LmlucHV0LmdhbWVwYWQgOiB2b2lkIDA7XG4gIH1cbiAgLyoqIEluZGljYXRpb24gd2hldGhlciB0aGUgdmlldyBpcyBiZWluZyBpbnRlcmFjdGVkIHdpdGggKGZvciBleGFtcGxlIHdoZW4gcGFubmluZyBvciBieSBhbiBpbnRlcmFjdGl2ZSB0b29sKS4gKi9cbiAgZ2V0IGludGVyYWN0aW5nKCkge1xuICAgIHJldHVybiB0aGlzLnZpZXcuaW50ZXJhY3Rpbmc7XG4gIH1cbiAgLyoqIFRoZSBJRCBvZiBhIFdlYk1hcCBmcm9tIEFyY0dJUyBPbmxpbmUgb3IgQXJjR0lTIEVudGVycHJpc2UgcG9ydGFsLlxuICAgKlxuICAgKiBUbyBjb25maWd1cmUgdGhlIHBvcnRhbCB1cmwgeW91IG11c3Qgc2V0IHRoZSBbYHBvcnRhbFVybGAgcHJvcGVydHkgb24gYGNvbmZpZ2BdKGh0dHBzOi8vZGV2ZWxvcGVycy5hcmNnaXMuY29tL2phdmFzY3JpcHQvbGF0ZXN0L2FwaS1yZWZlcmVuY2UvZXNyaS1jb25maWcuaHRtbCNwb3J0YWxVcmwpIGJlZm9yZSB0aGUgYGFyY2dpcy1tYXBgIGNvbXBvbmVudCBsb2Fkcy5cbiAgICovXG4gIGdldCBpdGVtSWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX21hcC5wb3J0YWxJdGVtPy5pZCA/PyB0aGlzLl9pdGVtSWQ7XG4gIH1cbiAgc2V0IGl0ZW1JZChpKSB7XG4gICAgdGhpcy5faXRlbUlkID0gaSwgdGhpcy5yZWFkeSAmJiBkLnJlQ3JlYXRlKHRoaXMuX21hcCwgdGhpcykudGhlbigoKSA9PiB7XG4gICAgICB0aGlzLnZpZXcubWFwID0gdGhpcy5fbWFwO1xuICAgIH0pLmNhdGNoKGNvbnNvbGUuZXJyb3IpO1xuICB9XG4gIC8qKiBJbmRpY2F0aW9uIHdoZXRoZXIgdGhlIHZpZXcgaXMgYmVpbmcgbmF2aWdhdGVkIChmb3IgZXhhbXBsZSB3aGVuIHBhbm5pbmcpLiAqL1xuICBnZXQgbmF2aWdhdGluZygpIHtcbiAgICByZXR1cm4gdGhpcy52aWV3Lm5hdmlnYXRpbmc7XG4gIH1cbiAgLyoqXG4gICAqIFJlcHJlc2VudHMgdGhlIG1hcCBzY2FsZSBhdCB0aGUgY2VudGVyIG9mIHRoZSB2aWV3LiBTZXR0aW5nIHRoZSBzY2FsZSBpbW1lZGlhdGVseSBjaGFuZ2VzIHRoZSB2aWV3LiBGb3IgYW5pbWF0aW5nXG4gICAqIHRoZSB2aWV3LCBzZWUgdGhpcyBjb21wb25lbnQncyBnb1RvKCkgbWV0aG9kLlxuICAgKi9cbiAgZ2V0IHNjYWxlKCkge1xuICAgIHJldHVybiB0aGlzLnZpZXcuc2NhbGUgPz8gdGhpcy5fc2NhbGU7XG4gIH1cbiAgc2V0IHNjYWxlKGkpIHtcbiAgICB0aGlzLnJlYWR5ICYmICh0aGlzLnZpZXcuc2NhbGUgPSBpKSwgdGhpcy5fc2NhbGUgPSBpO1xuICB9XG4gIC8qKiBJbmRpY2F0aW9uIHdoZXRoZXIgdGhlIHZpZXcgaXMgYW5pbWF0aW5nLCBiZWluZyBuYXZpZ2F0ZWQgd2l0aCBvciByZXNpemluZy4gKi9cbiAgZ2V0IHN0YXRpb25hcnkoKSB7XG4gICAgcmV0dXJuIHRoaXMudmlldy5zdGF0aW9uYXJ5O1xuICB9XG4gIC8qKlxuICAgKiBSZXByZXNlbnRzIHRoZSBjdXJyZW50IHZpZXcgYXMgYSBWaWV3cG9pbnQgb3IgcG9pbnQgb2Ygb2JzZXJ2YXRpb24gb24gdGhlIHZpZXcuXG4gICAqIFNldHRpbmcgdGhlIHZpZXdwb2ludCBpbW1lZGlhdGVseSBjaGFuZ2VzIHRoZSBjdXJyZW50IHZpZXcuIEZvciBhbmltYXRpbmdcbiAgICogdGhlIHZpZXcsIHNlZSB0aGlzIGNvbXBvbmVudCdzIGdvVG8oKSBtZXRob2QuXG4gICAqL1xuICBnZXQgdmlld3BvaW50KCkge1xuICAgIHJldHVybiB0aGlzLnZpZXcudmlld3BvaW50ID8/IHRoaXMuX3ZpZXdwb2ludDtcbiAgfVxuICBzZXQgdmlld3BvaW50KGkpIHtcbiAgICB0aGlzLnJlYWR5ICYmIGcodGhpcy52aWV3cG9pbnQsIGkpICYmICh0aGlzLnZpZXcudmlld3BvaW50ID0gaSksIHRoaXMuX3ZpZXdwb2ludCA9IGk7XG4gIH1cbiAgLyoqXG4gICAqIFJlcHJlc2VudHMgdGhlIGxldmVsIG9mIGRldGFpbCAoTE9EKSBhdCB0aGUgY2VudGVyIG9mIHRoZSB2aWV3LlxuICAgKiBBIHpvb20gbGV2ZWwgKG9yIHNjYWxlKSBpcyBhIG51bWJlciB0aGF0IGRlZmluZXMgaG93IGxhcmdlIG9yIHNtYWxsIHRoZSBjb250ZW50cyBvZiBhIG1hcCBhcHBlYXIgaW4gYSBtYXAgdmlldy5cbiAgICogWm9vbSBsZXZlbCBpcyBhIG51bWJlciB1c3VhbGx5IGJldHdlZW4gMCAoZ2xvYmFsIHZpZXcpIGFuZCAyMyAodmVyeSBkZXRhaWxlZCB2aWV3KSBhbmQgaXMgdXNlZCBhcyBhIHNob3J0aGFuZCBmb3IgcHJlZGV0ZXJtaW5lZCBzY2FsZSB2YWx1ZXMuXG4gICAqIEEgdmFsdWUgb2YgLTEgbWVhbnMgdGhlIHZpZXcgaGFzIG5vIExPRHMuXG4gICAqIFdoZW4gc2V0dGluZyB0aGUgem9vbSB2YWx1ZSwgdGhlIE1hcFZpZXcgY29udmVydHMgaXQgdG8gdGhlIGNvcnJlc3BvbmRpbmcgc2NhbGUsIG9yIGludGVycG9sYXRlcyBpdCBpZiB0aGUgem9vbSBpcyBhIGZyYWN0aW9uYWwgbnVtYmVyLlxuICAgKiBNYXBWaWV3IGNhbiBkaXNwbGF5IG1hcHMgd2l0aCBkaWZmZXJlbnQgcHJvamVjdGlvbnMgYXQgYSBmdWxsIHJhbmdlIG9mIHNjYWxlcywgYW5kIHNvIHVzZSB0aGUgc2NhbGUgcHJvcGVydHkgb24gdGhpcyBjb21wb25lbnQgcmF0aGVyIHRoYW4gem9vbSBsZXZlbC5cbiAgICpcbiAgICogU2V0dGluZyB0aGUgem9vbSBpbW1lZGlhdGVseSBjaGFuZ2VzIHRoZSBjdXJyZW50IHZpZXcuIEZvciBhbmltYXRpbmcgdGhlIHZpZXcsIHNlZSB0aGlzIGNvbXBvbmVudCdzIGdvVG8oKSBtZXRob2QuXG4gICAqIFNldHRpbmcgdGhpcyBwcm9wZXJ0eSBpbiBjb25qdW5jdGlvbiB3aXRoIGBjZW50ZXJgIGlzIGEgY29udmVuaWVudCB3YXkgdG8gc2V0IHRoZSBpbml0aWFsIGV4dGVudCBvZiB0aGUgdmlldy5cbiAgICovXG4gIGdldCB6b29tKCkge1xuICAgIHJldHVybiB0aGlzLnZpZXcuem9vbSA/PyB0aGlzLl96b29tO1xuICB9XG4gIHNldCB6b29tKGkpIHtcbiAgICB0aGlzLnJlYWR5ICYmICh0aGlzLnZpZXcuem9vbSA9IGkpLCB0aGlzLl96b29tID0gaTtcbiAgfVxuICAvLyNlbmRyZWdpb25cbiAgLy8jcmVnaW9uIFB1YmxpYyBNZXRob2RzXG4gIC8qKiBBZGRzIGEgbGF5ZXIgdG8gdGhlIG1hcCBsYXllcnMgY29sbGVjdGlvbi4gKi9cbiAgYXN5bmMgYWRkTGF5ZXIoaSwgdCkge1xuICAgIHRoaXMubWFwPy5hZGQoaSwgdCk7XG4gIH1cbiAgLyoqIEFkZHMgYSBsYXllciBvciBhcnJheSBvZiBsYXllcnMgdG8gdGhlIG1hcCBsYXllcnMgY29sbGVjdGlvbi4gKi9cbiAgYXN5bmMgYWRkTGF5ZXJzKGksIHQpIHtcbiAgICB0aGlzLm1hcD8uYWRkTWFueShpLCB0KTtcbiAgfVxuICAvKiogQWRkcyBhIHRhYmxlIHRvIHRoZSBtYXAgdGFibGVzIGNvbGxlY3Rpb24uICovXG4gIGFzeW5jIGFkZFRhYmxlKGkpIHtcbiAgICB0aGlzLm1hcD8udGFibGVzLmFkZChpKTtcbiAgfVxuICAvKiogQWRkcyBhIHRhYmxlIG9yIGFycmF5IG9mIHRhYmxlcyB0byB0aGUgbWFwIHRhYmxlcyBjb2xsZWN0aW9uLiAqL1xuICBhc3luYyBhZGRUYWJsZXMoaSwgdCkge1xuICAgIHRoaXMubWFwPy50YWJsZXMuYWRkTWFueShpLCB0KTtcbiAgfVxuICAvKiogQ2xvc2VzIHRoZSBwb3B1cC4gKi9cbiAgYXN5bmMgY2xvc2VQb3B1cCgpIHtcbiAgICB0aGlzLnZpZXc/LmNsb3NlUG9wdXAoKTtcbiAgfVxuICAvKiogRGVzdHJveXMgdGhlIHZpZXcsIGFuZCBhbnkgYXNzb2NpYXRlZCByZXNvdXJjZXMsIGluY2x1ZGluZyBpdHMgbWFwLCBwb3B1cCwgYW5kIFVJIGVsZW1lbnRzLiAqL1xuICBhc3luYyBkZXN0cm95KCkge1xuICAgIGF3YWl0IHRoaXMubWFuYWdlci5kZXN0cm95KCk7XG4gIH1cbiAgLyoqIFNldHMgdGhlIHZpZXcgdG8gYSBnaXZlbiB0YXJnZXQuICovXG4gIGFzeW5jIGdvVG8oaSwgdCkge1xuICAgIHJldHVybiBhd2FpdCB0aGlzLnZpZXc/LmdvVG8oaSwgdCk7XG4gIH1cbiAgLyoqIFJldHVybnMgaGl0IHRlc3QgcmVzdWx0cyBmcm9tIGVhY2ggbGF5ZXIgdGhhdCBpbnRlcnNlY3RzIHRoZSBzcGVjaWZpZWQgc2NyZWVuIGNvb3JkaW5hdGVzLiAqL1xuICBhc3luYyBoaXRUZXN0KGksIHQpIHtcbiAgICByZXR1cm4gYXdhaXQgdGhpcy52aWV3Py5oaXRUZXN0KGksIHQpO1xuICB9XG4gIC8qKlxuICAgKiBPcGVucyB0aGUgcG9wdXAgYXQgdGhlIGdpdmVuIGxvY2F0aW9uIHdpdGggY29udGVudCBkZWZpbmVkIGVpdGhlciBleHBsaWNpdGx5IHdpdGggY29udGVudCBvciBkcml2ZW5cbiAgICogZnJvbSB0aGUgUG9wdXBUZW1wbGF0ZSBvZiBpbnB1dCBmZWF0dXJlcy5cbiAgICovXG4gIGFzeW5jIG9wZW5Qb3B1cChpKSB7XG4gICAgYXdhaXQgdGhpcy52aWV3Py5vcGVuUG9wdXAoaSk7XG4gIH1cbiAgLyoqIENyZWF0ZSBhIHNjcmVlbnNob3Qgb2YgdGhlIGN1cnJlbnQgdmlldy4gKi9cbiAgYXN5bmMgdGFrZVNjcmVlbnNob3QoaSkge1xuICAgIHJldHVybiBhd2FpdCB0aGlzLnZpZXc/LnRha2VTY3JlZW5zaG90KGkpO1xuICB9XG4gIHRvTWFwKGkpIHtcbiAgICByZXR1cm4gdGhpcy52aWV3LnRvTWFwKGkpO1xuICB9XG4gIHRvU2NyZWVuKGksIHQpIHtcbiAgICByZXR1cm4gdGhpcy52aWV3LnRvU2NyZWVuKGksIHQpO1xuICB9XG4gIC8qKiBDYWxsIHRoaXMgbWV0aG9kIHRvIGNsZWFyIGFueSBmYXRhbCBlcnJvcnMgcmVzdWx0aW5nIGZyb20gYSBsb3N0IFdlYkdMIGNvbnRleHQuICovXG4gIGFzeW5jIHRyeUZhdGFsRXJyb3JSZWNvdmVyeSgpIHtcbiAgICB0aGlzLnZpZXc/LnRyeUZhdGFsRXJyb3JSZWNvdmVyeSgpO1xuICB9XG4gIC8qKiBHZXRzIHRoZSBMYXllclZpZXcgY3JlYXRlZCBvbiB0aGUgdmlldyBmb3IgdGhlIGdpdmVuIGxheWVyLiAqL1xuICBhc3luYyB3aGVuTGF5ZXJWaWV3KGkpIHtcbiAgICByZXR1cm4gYXdhaXQgdGhpcy52aWV3Py53aGVuTGF5ZXJWaWV3KGkpO1xuICB9XG4gIC8vI2VuZHJlZ2lvblxuICAvLyNyZWdpb24gTGlmZWN5Y2xlXG4gIGxvYWQoKSB7XG4gICAgdGhpcy5lbC5jaGlsZEVsZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLCB0aGlzLmVsLmFwcGVuZCh0aGlzLmVsLmNoaWxkRWxlbSksIHRoaXMudmlldy5jb250YWluZXIgPz89IHRoaXMuZWwuY2hpbGRFbGVtO1xuICB9XG4gIGxvYWRlZCgpIHtcbiAgICB0aGlzLm1hbmFnZXIub25MaWZlY3ljbGUoKCkgPT4gW1xuICAgICAgcygoKSA9PiB0aGlzLnZpZXcuc3RhdGlvbmFyeSwgKCkgPT4ge1xuICAgICAgICB0aGlzLmFyY2dpc1ZpZXdDaGFuZ2UuZW1pdCgpO1xuICAgICAgfSwgeyBpbml0aWFsOiAhMCB9KSxcbiAgICAgIHMoKCkgPT4gdGhpcy52aWV3LnJlYWR5LCAoKSA9PiB0aGlzLmFyY2dpc1ZpZXdSZWFkeUNoYW5nZS5lbWl0KCksIHsgaW5pdGlhbDogdGhpcy52aWV3LnJlYWR5IH0pXG4gICAgXSk7XG4gIH1cbiAgLy8jZW5kcmVnaW9uXG4gIC8vI3JlZ2lvbiBQcml2YXRlIE1ldGhvZHNcbiAgX2VkaXRNYXBQcm9wZXJ0aWVzKGkpIHtcbiAgICB0aGlzLm1hcCAmJiAodGhpcy5fbWFwID0gdGhpcy5tYXApLCB0aGlzLml0ZW1JZCAmJiAoaS5wb3J0YWxJdGVtID0geyBpZDogdGhpcy5pdGVtSWQgfSk7XG4gICAgY29uc3QgeyBiYXNlbWFwOiB0LCAuLi5vIH0gPSBpO1xuICAgIHQgfHwgKGkgPSBvKTtcbiAgICBjb25zdCB7IGdyb3VuZDogbiwgLi4udyB9ID0gaTtcbiAgICByZXR1cm4gbiB8fCAoaSA9IHcpLCBpO1xuICB9XG4gIGFzeW5jIF9lZGl0Vmlld1Byb3BlcnRpZXMoaSkge1xuICAgIGF3YWl0IHRoaXMubWFuYWdlci51c2UodGhpcy5fbWFwKSwgdGhpcy52aWV3LnVpIHx8IChpLnVpID0ge1xuICAgICAgY29tcG9uZW50czogW1wiYXR0cmlidXRpb25cIl1cbiAgICB9KSwgaS5tYXAgPz89IHRoaXMuX21hcDtcbiAgICBjb25zdCB0ID0gaCh0aGlzLmNlbnRlciwgdm9pZCAwKTtcbiAgICByZXR1cm4gdCAmJiAoaS5jZW50ZXIgPSB0KSwgdGhpcy52aWV3cG9pbnQgJiYgKGkudmlld3BvaW50ID0gdGhpcy52aWV3cG9pbnQpLCB0aGlzLnNjYWxlICE9PSB2b2lkIDAgJiYgKGkuc2NhbGUgPSB0aGlzLnNjYWxlKSwgdGhpcy5leHRlbnQgJiYgKGkuZXh0ZW50ID0gdGhpcy5leHRlbnQpLCB0aGlzLnpvb20gIT09IHZvaWQgMCAmJiAoaS56b29tID0gdGhpcy56b29tKSwgaTtcbiAgfVxufVxuYyhcImFyY2dpcy1tYXBcIiwgYik7XG5leHBvcnQge1xuICBiIGFzIEFyY2dpc01hcFxufTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==